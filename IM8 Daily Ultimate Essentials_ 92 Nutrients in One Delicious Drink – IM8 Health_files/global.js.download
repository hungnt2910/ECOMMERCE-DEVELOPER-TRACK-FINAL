window.ViewTransitionsAPI={_supportCache:null,_isDesktop:null,isSupported:()=>{if(window.ViewTransitionsAPI._supportCache!==null)return window.ViewTransitionsAPI._supportCache;try{if(window.ViewTransitionsAPI._isDesktop===null&&(window.ViewTransitionsAPI._isDesktop=!(window.innerWidth<768||"ontouchstart"in window||/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent)||matchMedia("(prefers-reduced-motion)").matches)),!window.ViewTransitionsAPI._isDesktop)return window.ViewTransitionsAPI._supportCache=!1,!1;const supported="startViewTransition"in document&&CSS?.supports?.("view-transition-name","main-content");return window.ViewTransitionsAPI._supportCache=supported,supported}catch{return window.ViewTransitionsAPI._supportCache=!1,!1}},transition:(updateCallback,options={})=>{if(!window.ViewTransitionsAPI.isSupported()||!updateCallback||typeof updateCallback!="function"){try{updateCallback()}catch(error){console.warn("Fallback update callback failed:",error)}return Promise.resolve()}try{options.transitionClass&&typeof options.transitionClass=="string"&&document.documentElement.classList.add(options.transitionClass);const transition=document.startViewTransition(()=>{try{updateCallback()}catch(error){throw console.warn("View transition callback failed:",error),error}});return options.transitionClass&&typeof options.transitionClass=="string"&&transition.finished.finally(()=>{try{document.documentElement.classList.remove(options.transitionClass)}catch(error){console.warn("Failed to remove transition class:",error)}}),transition.finished.catch(()=>{}),transition.finished}catch{try{updateCallback()}catch(callbackError){console.warn("Fallback callback failed:",callbackError)}return Promise.resolve()}},updateCart:updateCallback=>window.ViewTransitionsAPI.transition(updateCallback,{transitionClass:"cart-updating"}),updateProduct:updateCallback=>window.ViewTransitionsAPI.transition(updateCallback,{transitionClass:"product-updating"}),updateSearch:updateCallback=>window.ViewTransitionsAPI.transition(updateCallback,{transitionClass:"search-updating"})};try{if(window.ViewTransitionsAPI&&window.ViewTransitionsAPI.isSupported())try{const originalCartUpdate=window.cartUpdate||function(){};window.cartUpdate=function(...args){try{return window.ViewTransitionsAPI.updateCart(()=>originalCartUpdate.apply(this,args))}catch{return originalCartUpdate.apply(this,args)}}}catch{}}catch{}function getFocusableElements(container){return Array.from(container.querySelectorAll("summary, a[href], button:enabled, [tabindex]:not([tabindex^='-']), [draggable], area, input:not([type=hidden]):enabled, select:enabled, textarea:enabled, object, iframe"))}class SectionId{static#separator="__";static parseId(qualifiedSectionId){return qualifiedSectionId.split(SectionId.#separator)[0]}static parseSectionName(qualifiedSectionId){return qualifiedSectionId.split(SectionId.#separator)[1]}static getIdForSection(sectionId,sectionName){return`${sectionId}${SectionId.#separator}${sectionName}`}}class HTMLUpdateUtility{static viewTransition(oldNode,newContent,preProcessCallbacks=[],postProcessCallbacks=[]){preProcessCallbacks?.forEach(callback=>callback(newContent));const newNodeWrapper=document.createElement("div");HTMLUpdateUtility.setInnerHTML(newNodeWrapper,newContent.outerHTML);const newNode=newNodeWrapper.firstChild,uniqueKey=Date.now();oldNode.querySelectorAll("[id], [form]").forEach(element=>{element.id&&(element.id=`${element.id}-${uniqueKey}`),element.form&&element.setAttribute("form",`${element.form.getAttribute("id")}-${uniqueKey}`)}),oldNode.parentNode.insertBefore(newNode,oldNode),oldNode.style.display="none",postProcessCallbacks?.forEach(callback=>callback(newNode)),setTimeout(()=>oldNode.remove(),500)}static setInnerHTML(element,html){element.innerHTML=html,element.querySelectorAll("script").forEach(oldScriptTag=>{const newScriptTag=document.createElement("script");Array.from(oldScriptTag.attributes).forEach(attribute=>{newScriptTag.setAttribute(attribute.name,attribute.value)}),newScriptTag.appendChild(document.createTextNode(oldScriptTag.innerHTML)),oldScriptTag.parentNode.replaceChild(newScriptTag,oldScriptTag)})}}document.querySelectorAll('[id^="Details-"] summary').forEach(summary=>{summary.setAttribute("role","button"),summary.setAttribute("aria-expanded",summary.parentNode.hasAttribute("open")),summary.nextElementSibling.getAttribute("id")&&summary.setAttribute("aria-controls",summary.nextElementSibling.id),summary.addEventListener("click",event=>{event.currentTarget.setAttribute("aria-expanded",!event.currentTarget.closest("details").hasAttribute("open"))}),!summary.closest("header-drawer, menu-drawer")&&summary.parentElement.addEventListener("keyup",onKeyUpEscape)});const trapFocusHandlers={};function trapFocus(container,elementToFocus=container){var elements=getFocusableElements(container),first=elements[0],last=elements[elements.length-1];removeTrapFocus(),trapFocusHandlers.focusin=event=>{event.target!==container&&event.target!==last&&event.target!==first||document.addEventListener("keydown",trapFocusHandlers.keydown)},trapFocusHandlers.focusout=function(){document.removeEventListener("keydown",trapFocusHandlers.keydown)},trapFocusHandlers.keydown=function(event){event.code.toUpperCase()==="TAB"&&(event.target===last&&!event.shiftKey&&(event.preventDefault(),first.focus()),(event.target===container||event.target===first)&&event.shiftKey&&(event.preventDefault(),last.focus()))},document.addEventListener("focusout",trapFocusHandlers.focusout),document.addEventListener("focusin",trapFocusHandlers.focusin),elementToFocus.focus(),elementToFocus.tagName==="INPUT"&&["search","text","email","url"].includes(elementToFocus.type)&&elementToFocus.value&&elementToFocus.setSelectionRange(0,elementToFocus.value.length)}try{document.querySelector(":focus-visible")}catch{focusVisiblePolyfill()}function focusVisiblePolyfill(){const navKeys=["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","TAB","ENTER","SPACE","ESCAPE","HOME","END","PAGEUP","PAGEDOWN"];let currentFocusedElement=null,mouseClick=null;window.addEventListener("keydown",event=>{navKeys.includes(event.code.toUpperCase())&&(mouseClick=!1)}),window.addEventListener("mousedown",event=>{mouseClick=!0}),window.addEventListener("focus",()=>{currentFocusedElement&&currentFocusedElement.classList.remove("focused"),!mouseClick&&(currentFocusedElement=document.activeElement,currentFocusedElement.classList.add("focused"))},!0)}function pauseAllMedia(){document.querySelectorAll(".js-youtube").forEach(video=>{video.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}),document.querySelectorAll(".js-vimeo").forEach(video=>{video.contentWindow.postMessage('{"method":"pause"}',"*")}),document.querySelectorAll("video").forEach(video=>{video.classList.contains("js-exclude")||video.pause()}),document.querySelectorAll("product-model").forEach(model=>{model.modelViewerUI&&model.modelViewerUI.pause()})}function removeTrapFocus(elementToFocus=null){document.removeEventListener("focusin",trapFocusHandlers.focusin),document.removeEventListener("focusout",trapFocusHandlers.focusout),document.removeEventListener("keydown",trapFocusHandlers.keydown),elementToFocus&&elementToFocus.focus()}function onKeyUpEscape(event){if(event.code.toUpperCase()!=="ESCAPE")return;const openDetailsElement=event.target.closest("details[open]");if(!openDetailsElement)return;const summaryElement=openDetailsElement.querySelector("summary");openDetailsElement.removeAttribute("open"),summaryElement.setAttribute("aria-expanded",!1),summaryElement.focus()}class QuantityInput extends HTMLElement{constructor(){super(),this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.input.addEventListener("change",this.onInputChange.bind(this)),this.querySelectorAll("button").forEach(button=>button.addEventListener("click",this.onButtonClick.bind(this)))}quantityUpdateUnsubscriber=void 0;connectedCallback(){this.validateQtyRules(),this.quantityUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.quantityUpdate,this.validateQtyRules.bind(this))}disconnectedCallback(){this.quantityUpdateUnsubscriber&&this.quantityUpdateUnsubscriber()}onInputChange(event){this.validateQtyRules()}onButtonClick(event){event.preventDefault();const previousValue=this.input.value,button=event.target.closest(".quantity__button");button&&(button.style.transform="scale(0.95)",setTimeout(()=>{button.style.transform=""},100),button.classList.add("clicked"),setTimeout(()=>{button.classList.remove("clicked")},300)),event.target.name==="plus"?(parseInt(this.input.dataset.min)>parseInt(this.input.step)&&this.input.value==0?this.input.value=this.input.dataset.min:this.input.stepUp(),this.input.value!==previousValue&&(this.input.style.transform="scale(1.05)",setTimeout(()=>{this.input.style.transform=""},150))):(this.input.stepDown(),this.input.value!==previousValue&&(this.input.style.transform="scale(0.95)",setTimeout(()=>{this.input.style.transform=""},150))),previousValue!==this.input.value&&this.input.dispatchEvent(this.changeEvent),this.input.dataset.min===previousValue&&event.target.name==="minus"&&(this.input.value=parseInt(this.input.min))}validateQtyRules(){const value=parseInt(this.input.value);if(this.input.min&&this.querySelector(".quantity__button[name='minus']").classList.toggle("disabled",parseInt(value)<=parseInt(this.input.min)),this.input.max){const max=parseInt(this.input.max);this.querySelector(".quantity__button[name='plus']").classList.toggle("disabled",value>=max)}}}customElements.define("quantity-input",QuantityInput);function debounce(fn,wait){let t;return(...args)=>{clearTimeout(t),t=setTimeout(()=>fn.apply(this,args),wait)}}function throttle(fn,delay){let lastCall=0;return function(...args){const now=new Date().getTime();if(!(now-lastCall<delay))return lastCall=now,fn(...args)}}function fetchConfig(type="json"){return{method:"POST",headers:{"Content-Type":"application/json",Accept:`application/${type}`}}}typeof window.Shopify>"u"&&(window.Shopify={}),Shopify.bind=function(fn,scope){return function(){return fn.apply(scope,arguments)}},Shopify.setSelectorByValue=function(selector,value){for(var i=0,count=selector.options.length;i<count;i++){var option=selector.options[i];if(value==option.value||value==option.innerHTML)return selector.selectedIndex=i,i}},Shopify.addListener=function(target,eventName,callback){target.addEventListener?target.addEventListener(eventName,callback,!1):target.attachEvent("on"+eventName,callback)},Shopify.postLink=function(path,options){options=options||{};var method=options.method||"post",params=options.parameters||{},form=document.createElement("form");form.setAttribute("method",method),form.setAttribute("action",path);for(var key in params){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden"),hiddenField.setAttribute("name",key),hiddenField.setAttribute("value",params[key]),form.appendChild(hiddenField)}document.body.appendChild(form),form.submit(),document.body.removeChild(form)},Shopify.CountryProvinceSelector=function(country_domid,province_domid,options){this.countryEl=document.getElementById(country_domid),this.provinceEl=document.getElementById(province_domid),this.provinceContainer=document.getElementById(options.hideElement||province_domid),Shopify.addListener(this.countryEl,"change",Shopify.bind(this.countryHandler,this)),this.initCountry(),this.initProvince()},Shopify.CountryProvinceSelector.prototype={initCountry:function(){var value=this.countryEl.getAttribute("data-default");Shopify.setSelectorByValue(this.countryEl,value),this.countryHandler()},initProvince:function(){var value=this.provinceEl.getAttribute("data-default");value&&this.provinceEl.options.length>0&&Shopify.setSelectorByValue(this.provinceEl,value)},countryHandler:function(e){var opt=this.countryEl.options[this.countryEl.selectedIndex],raw=opt.getAttribute("data-provinces"),provinces=JSON.parse(raw);if(this.clearOptions(this.provinceEl),provinces&&provinces.length==0)this.provinceContainer.style.display="none";else{for(var i=0;i<provinces.length;i++){var opt=document.createElement("option");opt.value=provinces[i][0],opt.innerHTML=provinces[i][1],this.provinceEl.appendChild(opt)}this.provinceContainer.style.display=""}},clearOptions:function(selector){for(;selector.firstChild;)selector.removeChild(selector.firstChild)},setOptions:function(selector,values){for(var i=0,count=values.length;i<values.length;i++){var opt=document.createElement("option");opt.value=values[i],opt.innerHTML=values[i],selector.appendChild(opt)}}};class MenuDrawer extends HTMLElement{constructor(){super(),this.mainDetailsToggle=this.querySelector("details"),this.addEventListener("keyup",this.onKeyUp.bind(this)),this.addEventListener("focusout",this.onFocusOut.bind(this)),this.bindEvents()}bindEvents(){this.querySelectorAll("summary").forEach(summary=>summary.addEventListener("click",this.onSummaryClick.bind(this))),this.querySelectorAll("button:not(.localization-selector):not(.country-selector__close-button):not(.country-filter__reset-button)").forEach(button=>button.addEventListener("click",this.onCloseButtonClick.bind(this)))}onKeyUp(event){if(event.code.toUpperCase()!=="ESCAPE")return;const openDetailsElement=event.target.closest("details[open]");openDetailsElement&&(openDetailsElement===this.mainDetailsToggle?this.closeMenuDrawer(event,this.mainDetailsToggle.querySelector("summary")):this.closeSubmenu(openDetailsElement))}onSummaryClick(event){const summaryElement=event.currentTarget,detailsElement=summaryElement.parentNode,parentMenuElement=detailsElement.closest(".has-submenu"),isOpen=detailsElement.hasAttribute("open"),reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)");function addTrapFocus(){trapFocus(summaryElement.nextElementSibling,detailsElement.querySelector("button")),summaryElement.nextElementSibling.removeEventListener("transitionend",addTrapFocus)}detailsElement===this.mainDetailsToggle?(isOpen&&event.preventDefault(),isOpen?this.closeMenuDrawer(event,summaryElement):this.openMenuDrawer(summaryElement),window.matchMedia("(max-width: 990px)")&&document.documentElement.style.setProperty("--viewport-height",`${window.innerHeight}px`)):setTimeout(()=>{detailsElement.classList.add("menu-opening"),summaryElement.setAttribute("aria-expanded",!0),parentMenuElement&&parentMenuElement.classList.add("submenu-open"),!reducedMotion||reducedMotion.matches?addTrapFocus():summaryElement.nextElementSibling.addEventListener("transitionend",addTrapFocus)},100)}openMenuDrawer(summaryElement){setTimeout(()=>{this.mainDetailsToggle.classList.add("menu-opening")}),summaryElement.setAttribute("aria-expanded",!0),trapFocus(this.mainDetailsToggle,summaryElement),document.body.classList.add(`overflow-hidden-${this.dataset.breakpoint}`)}closeMenuDrawer(event,elementToFocus=!1){event!==void 0&&(this.mainDetailsToggle.classList.add("menu-closing"),setTimeout(()=>{this.mainDetailsToggle.classList.remove("menu-opening")},50),this.mainDetailsToggle.querySelectorAll("details").forEach(details=>{details.classList.add("menu-closing"),setTimeout(()=>{details.classList.remove("menu-opening")},50)}),this.mainDetailsToggle.querySelectorAll(".submenu-open").forEach(submenu=>{submenu.classList.remove("submenu-open")}),document.body.classList.remove(`overflow-hidden-${this.dataset.breakpoint}`),removeTrapFocus(elementToFocus),this.closeAnimation(this.mainDetailsToggle),event instanceof KeyboardEvent&&elementToFocus?.setAttribute("aria-expanded",!1))}onFocusOut(){setTimeout(()=>{this.mainDetailsToggle.hasAttribute("open")&&!this.mainDetailsToggle.contains(document.activeElement)&&this.closeMenuDrawer()})}onCloseButtonClick(event){const detailsElement=event.currentTarget.closest("details");this.closeSubmenu(detailsElement)}closeSubmenu(detailsElement){const parentMenuElement=detailsElement.closest(".submenu-open");parentMenuElement&&parentMenuElement.classList.remove("submenu-open"),detailsElement.classList.add("menu-closing"),setTimeout(()=>{detailsElement.classList.remove("menu-opening")},50),detailsElement.querySelector("summary").setAttribute("aria-expanded",!1),removeTrapFocus(detailsElement.querySelector("summary")),this.closeAnimation(detailsElement)}closeAnimation(detailsElement){let animationStart;const handleAnimation=time=>{animationStart===void 0&&(animationStart=time),time-animationStart<300?window.requestAnimationFrame(handleAnimation):(detailsElement.classList.remove("menu-closing"),detailsElement.removeAttribute("open"),detailsElement.querySelectorAll("details").forEach(details=>{details.classList.remove("menu-closing"),details.removeAttribute("open")}),detailsElement.closest("details[open]")&&trapFocus(detailsElement.closest("details[open]"),detailsElement.querySelector("summary")))};window.requestAnimationFrame(handleAnimation)}}customElements.define("menu-drawer",MenuDrawer);class HeaderDrawer extends MenuDrawer{constructor(){super()}openMenuDrawer(summaryElement){this.header=this.header||document.querySelector(".section-header"),this.borderOffset=this.borderOffset||this.closest(".header-wrapper").classList.contains("header-wrapper--border-bottom")?1:0,document.documentElement.style.setProperty("--header-bottom-position",`${parseInt(this.header.getBoundingClientRect().bottom-this.borderOffset)}px`),this.header.classList.add("menu-open"),setTimeout(()=>{this.mainDetailsToggle.classList.add("menu-opening")}),summaryElement.setAttribute("aria-expanded",!0),window.addEventListener("resize",this.onResize),trapFocus(this.mainDetailsToggle,summaryElement),document.body.classList.add(`overflow-hidden-${this.dataset.breakpoint}`)}closeMenuDrawer(event,elementToFocus){elementToFocus&&(super.closeMenuDrawer(event,elementToFocus),this.header.classList.remove("menu-open"),window.removeEventListener("resize",this.onResize))}onResize=()=>{this.header&&document.documentElement.style.setProperty("--header-bottom-position",`${parseInt(this.header.getBoundingClientRect().bottom-this.borderOffset)}px`),document.documentElement.style.setProperty("--viewport-height",`${window.innerHeight}px`)}}customElements.define("header-drawer",HeaderDrawer);class ModalDialog extends HTMLElement{constructor(){super(),this.querySelector('[id^="ModalClose-"]').addEventListener("click",this.hide.bind(this,!1)),this.addEventListener("keyup",event=>{event.code.toUpperCase()==="ESCAPE"&&this.hide()}),this.classList.contains("media-modal")?this.addEventListener("pointerup",event=>{}):this.addEventListener("click",event=>{})}connectedCallback(){this.moved||(this.moved=!0,document.body.appendChild(this))}show(opener){this.openedBy=opener;const popup=this.querySelector(".template-popup"),dialog=this.querySelector('[role="dialog"]')||this.querySelector(".modal__content")||this.firstElementChild;document.body.classList.add("overflow-hidden"),this.setAttribute("open",""),this.style.display="block",this.style.opacity="0",this.style.transition="opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",dialog&&(dialog.style.transform="scale(0.95) translateY(-10px)",dialog.style.opacity="0",dialog.style.transition="transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"),this.offsetHeight,requestAnimationFrame(()=>{this.style.opacity="1",dialog&&(dialog.style.transform="scale(1) translateY(0)",dialog.style.opacity="1")}),popup&&popup.loadContent(),trapFocus(this,this.querySelector('[role="dialog"]')),window.pauseAllMedia()}hide(){const dialog=this.querySelector('[role="dialog"]')||this.querySelector(".modal__content")||this.firstElementChild;this.style.transition="opacity 0.35s cubic-bezier(0.55, 0.055, 0.675, 0.19)",dialog&&(dialog.style.transition="transform 0.35s cubic-bezier(0.55, 0.055, 0.675, 0.19), opacity 0.35s cubic-bezier(0.55, 0.055, 0.675, 0.19)"),this.style.opacity="0",dialog&&(dialog.style.transform="scale(0.97) translateY(-5px)",dialog.style.opacity="0"),setTimeout(()=>{document.body.classList.remove("overflow-hidden"),document.body.dispatchEvent(new CustomEvent("modalClosed")),this.removeAttribute("open"),this.style.display="",this.style.opacity="",this.style.transition="",dialog&&(dialog.style.transform="",dialog.style.opacity="",dialog.style.transition=""),removeTrapFocus(this.openedBy),window.pauseAllMedia()},350)}}customElements.define("modal-dialog",ModalDialog);class BulkModal extends HTMLElement{constructor(){super()}connectedCallback(){const handleIntersection=(entries,observer)=>{if(entries[0].isIntersecting&&(observer.unobserve(this),this.innerHTML.trim()==="")){const productUrl=this.dataset.url.split("?")[0];fetch(`${productUrl}?section_id=bulk-quick-order-list`).then(response=>response.text()).then(responseText=>{const sourceQty=new DOMParser().parseFromString(responseText,"text/html").querySelector(".quick-order-list-container").parentNode;this.innerHTML=sourceQty.innerHTML}).catch(e=>{console.error(e)})}};new IntersectionObserver(handleIntersection.bind(this)).observe(document.querySelector(`#QuickBulk-${this.dataset.productId}-${this.dataset.sectionId}`))}}customElements.define("bulk-modal",BulkModal);class ModalOpener extends HTMLElement{constructor(){super();const button=this.querySelector("button");button&&button.addEventListener("click",()=>{const modal=document.querySelector(this.getAttribute("data-modal"));modal&&modal.show(button)})}}customElements.define("modal-opener",ModalOpener);class DeferredMedia extends HTMLElement{constructor(){super();const poster=this.querySelector('[id^="Deferred-Poster-"]');poster&&poster.addEventListener("click",this.loadContent.bind(this))}loadContent(focus=!0){window.pauseAllMedia();const content=document.createElement("div");content.appendChild(this.querySelector("template").content.firstElementChild.cloneNode(!0)),this.setAttribute("loaded",!0);const deferredElement=this.appendChild(content.querySelector("video, model-viewer, iframe"));focus&&deferredElement.focus(),deferredElement.nodeName=="VIDEO"&&deferredElement.getAttribute("autoplay")&&deferredElement.play()}}customElements.define("deferred-media",DeferredMedia);class SliderComponent extends HTMLElement{constructor(){if(super(),this.slider=this.querySelector('[id^="Slider-"]'),this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.enableSliderLooping=!1,this.currentPageElement=this.querySelector(".slider-counter--current"),this.pageTotalElement=this.querySelector(".slider-counter--total"),this.prevButton=this.querySelector('button[name="previous"]'),this.nextButton=this.querySelector('button[name="next"]'),!this.slider||!this.nextButton)return;this.initPages(),new ResizeObserver(entries=>this.initPages()).observe(this.slider),this.slider.addEventListener("scroll",this.update.bind(this)),this.prevButton.addEventListener("click",this.onButtonClick.bind(this)),this.nextButton.addEventListener("click",this.onButtonClick.bind(this))}initPages(){this.sliderItemsToShow=Array.from(this.sliderItems).filter(element=>element.clientWidth>0),!(this.sliderItemsToShow.length<2)&&(this.sliderItemOffset=this.sliderItemsToShow[1].offsetLeft-this.sliderItemsToShow[0].offsetLeft,this.slidesPerPage=Math.floor((this.slider.clientWidth-this.sliderItemsToShow[0].offsetLeft)/this.sliderItemOffset),this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage+1,this.update())}resetPages(){this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.initPages()}update(){if(!this.slider||!this.nextButton)return;const previousPage=this.currentPage;this.currentPage=Math.round(this.slider.scrollLeft/this.sliderItemOffset)+1,this.currentPageElement&&this.pageTotalElement&&(this.currentPageElement.textContent=this.currentPage,this.pageTotalElement.textContent=this.totalPages),this.currentPage!=previousPage&&this.dispatchEvent(new CustomEvent("slideChanged",{detail:{currentPage:this.currentPage,currentElement:this.sliderItemsToShow[this.currentPage-1]}})),!this.enableSliderLooping&&(this.isSlideVisible(this.sliderItemsToShow[0])&&this.slider.scrollLeft===0?this.prevButton.setAttribute("disabled","disabled"):this.prevButton.removeAttribute("disabled"),this.isSlideVisible(this.sliderItemsToShow[this.sliderItemsToShow.length-1])?this.nextButton.setAttribute("disabled","disabled"):this.nextButton.removeAttribute("disabled"))}isSlideVisible(element,offset=0){const lastVisibleSlide=this.slider.clientWidth+this.slider.scrollLeft-offset;return element.offsetLeft+element.clientWidth<=lastVisibleSlide&&element.offsetLeft>=this.slider.scrollLeft}onButtonClick(event){event.preventDefault();const step=event.currentTarget.dataset.step||1;this.slideScrollPosition=event.currentTarget.name==="next"?this.slider.scrollLeft+step*this.sliderItemOffset:this.slider.scrollLeft-step*this.sliderItemOffset,this.setSlidePosition(this.slideScrollPosition)}setSlidePosition(position){this.slider.scrollTo({left:position})}}customElements.define("slider-component",SliderComponent);class SlideshowComponent extends SliderComponent{constructor(){super(),this.sliderControlWrapper=this.querySelector(".slider-buttons"),this.enableSliderLooping=!0,this.sliderControlWrapper&&(this.sliderFirstItemNode=this.slider.querySelector(".slideshow__slide"),this.sliderItemsToShow.length>0&&(this.currentPage=1),this.announcementBarSlider=this.querySelector(".announcement-bar-slider"),this.announcerBarAnimationDelay=this.announcementBarSlider?250:0,this.sliderControlLinksArray=Array.from(this.sliderControlWrapper.querySelectorAll(".slider-counter__link")),this.sliderControlLinksArray.forEach(link=>link.addEventListener("click",this.linkToSlide.bind(this))),this.slider.addEventListener("scroll",this.setSlideVisibility.bind(this)),this.setSlideVisibility(),this.announcementBarSlider&&(this.announcementBarArrowButtonWasClicked=!1,this.reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)"),this.reducedMotion.addEventListener("change",()=>{this.slider.getAttribute("data-autoplay")==="true"&&this.setAutoPlay()}),[this.prevButton,this.nextButton].forEach(button=>{button.addEventListener("click",()=>{this.announcementBarArrowButtonWasClicked=!0},{once:!0})})),this.slider.getAttribute("data-autoplay")==="true"&&this.setAutoPlay())}setAutoPlay(){this.autoplaySpeed=this.slider.dataset.speed*1e3,this.addEventListener("mouseover",this.focusInHandling.bind(this)),this.addEventListener("mouseleave",this.focusOutHandling.bind(this)),this.addEventListener("focusin",this.focusInHandling.bind(this)),this.addEventListener("focusout",this.focusOutHandling.bind(this)),this.querySelector(".slideshow__autoplay")?(this.sliderAutoplayButton=this.querySelector(".slideshow__autoplay"),this.sliderAutoplayButton.addEventListener("click",this.autoPlayToggle.bind(this)),this.autoplayButtonIsSetToPlay=!0,this.play()):this.reducedMotion.matches||this.announcementBarArrowButtonWasClicked?this.pause():this.play()}onButtonClick(event){super.onButtonClick(event),this.wasClicked=!0;const isFirstSlide=this.currentPage===1,isLastSlide=this.currentPage===this.sliderItemsToShow.length;if(!isFirstSlide&&!isLastSlide){this.applyAnimationToAnnouncementBar(event.currentTarget.name);return}isFirstSlide&&event.currentTarget.name==="previous"?this.slideScrollPosition=this.slider.scrollLeft+this.sliderFirstItemNode.clientWidth*this.sliderItemsToShow.length:isLastSlide&&event.currentTarget.name==="next"&&(this.slideScrollPosition=0),this.setSlidePosition(this.slideScrollPosition),this.applyAnimationToAnnouncementBar(event.currentTarget.name)}setSlidePosition(position){this.setPositionTimeout&&clearTimeout(this.setPositionTimeout),this.setPositionTimeout=setTimeout(()=>{this.slider.scrollTo({left:position})},this.announcerBarAnimationDelay)}update(){super.update(),this.sliderControlButtons=this.querySelectorAll(".slider-counter__link"),this.prevButton.removeAttribute("disabled"),this.sliderControlButtons.length&&(this.sliderControlButtons.forEach(link=>{link.classList.remove("slider-counter__link--active"),link.removeAttribute("aria-current")}),this.sliderControlButtons[this.currentPage-1].classList.add("slider-counter__link--active"),this.sliderControlButtons[this.currentPage-1].setAttribute("aria-current",!0))}autoPlayToggle(){this.togglePlayButtonState(this.autoplayButtonIsSetToPlay),this.autoplayButtonIsSetToPlay?this.pause():this.play(),this.autoplayButtonIsSetToPlay=!this.autoplayButtonIsSetToPlay}focusOutHandling(event){if(this.sliderAutoplayButton){const focusedOnAutoplayButton=event.target===this.sliderAutoplayButton||this.sliderAutoplayButton.contains(event.target);if(!this.autoplayButtonIsSetToPlay||focusedOnAutoplayButton)return;this.play()}else!this.reducedMotion.matches&&!this.announcementBarArrowButtonWasClicked&&this.play()}focusInHandling(event){this.sliderAutoplayButton?(event.target===this.sliderAutoplayButton||this.sliderAutoplayButton.contains(event.target))&&this.autoplayButtonIsSetToPlay?this.play():this.autoplayButtonIsSetToPlay&&this.pause():this.announcementBarSlider.contains(event.target)&&this.pause()}play(){this.slider.setAttribute("aria-live","off"),clearInterval(this.autoplay),this.autoplay=setInterval(this.autoRotateSlides.bind(this),this.autoplaySpeed)}pause(){this.slider.setAttribute("aria-live","polite"),clearInterval(this.autoplay)}togglePlayButtonState(pauseAutoplay){pauseAutoplay?(this.sliderAutoplayButton.classList.add("slideshow__autoplay--paused"),this.sliderAutoplayButton.setAttribute("aria-label",window.accessibilityStrings.playSlideshow)):(this.sliderAutoplayButton.classList.remove("slideshow__autoplay--paused"),this.sliderAutoplayButton.setAttribute("aria-label",window.accessibilityStrings.pauseSlideshow))}autoRotateSlides(){const slideScrollPosition=this.currentPage===this.sliderItems.length?0:this.slider.scrollLeft+this.sliderItemOffset;this.setSlidePosition(slideScrollPosition),this.applyAnimationToAnnouncementBar()}setSlideVisibility(event){this.sliderItemsToShow.forEach((item,index)=>{const linkElements=item.querySelectorAll("a");index===this.currentPage-1?(linkElements.length&&linkElements.forEach(button=>{button.removeAttribute("tabindex")}),item.setAttribute("aria-hidden","false"),item.removeAttribute("tabindex")):(linkElements.length&&linkElements.forEach(button=>{button.setAttribute("tabindex","-1")}),item.setAttribute("aria-hidden","true"),item.setAttribute("tabindex","-1"))}),this.wasClicked=!1}applyAnimationToAnnouncementBar(button="next"){if(!this.announcementBarSlider)return;const itemsCount=this.sliderItems.length,increment=button==="next"?1:-1,currentIndex=this.currentPage-1;let nextIndex=(currentIndex+increment)%itemsCount;nextIndex=nextIndex===-1?itemsCount-1:nextIndex;const nextSlide=this.sliderItems[nextIndex],currentSlide=this.sliderItems[currentIndex],animationClassIn="announcement-bar-slider--fade-in",animationClassOut="announcement-bar-slider--fade-out",isFirstSlide=currentIndex===0,isLastSlide=currentIndex===itemsCount-1,direction=button==="next"&&!isLastSlide||button==="previous"&&isFirstSlide?"next":"previous";currentSlide.classList.add(`${animationClassOut}-${direction}`),nextSlide.classList.add(`${animationClassIn}-${direction}`),setTimeout(()=>{currentSlide.classList.remove(`${animationClassOut}-${direction}`),nextSlide.classList.remove(`${animationClassIn}-${direction}`)},this.announcerBarAnimationDelay*2)}linkToSlide(event){event.preventDefault();const slideScrollPosition=this.slider.scrollLeft+this.sliderFirstItemNode.clientWidth*(this.sliderControlLinksArray.indexOf(event.currentTarget)+1-this.currentPage);this.slider.scrollTo({left:slideScrollPosition})}}customElements.define("slideshow-component",SlideshowComponent);class VariantSelects extends HTMLElement{constructor(){super()}toggleQuantitySelector(target){const quantitySelector=document.querySelector(".product-form-quantity-selector");quantitySelector!==null&&(target.value==="One Time Purchase"?(quantitySelector.classList.remove("hidden"),quantitySelector.style.display="block"):quantitySelector.style.display="none")}updateProductDisplay({value}){const{standardEssentials,travelEssentials,oneTimePurchase}=window.storeConstants,checkedFormat=this.querySelector(".product-form__input--format input:checked"),updatedValueForBreakdown=this.querySelector(`input[value="${oneTimePurchase}"]:checked`)?oneTimePurchase:checkedFormat?.value,getVariantType=variantValue=>{switch(variantValue){case standardEssentials:return"standard";case travelEssentials:return"travel";case oneTimePurchase:return checkedFormat?.value===standardEssentials?"onetime_standard":"onetime_travel";default:return null}};[{name:"product-breakdown-banner-section",variantType:getVariantType(updatedValueForBreakdown)},{name:"meta_short_tags_text_main_new",variantType:getVariantType(value)}].forEach(({name,variantType})=>{if(variantType){const showElements=document.querySelectorAll(`.${name} [data-variant-type="${variantType}"]`),hideElements=document.querySelectorAll(`.${name} [data-variant-type]:not([data-variant-type="${variantType}"])`);showElements.length>0&&hideElements.length>0&&this.toggleComponentVisibility(showElements,hideElements)}}),this.updateProductDescription({value})}updateProductDescription({value}){const color=value.toLowerCase(),descriptions=["pink","black"];descriptions.includes(color)&&descriptions.forEach(descColor=>{const element=document.querySelector(`.meta_short_description_main_new[data-color="${descColor}"]`);element&&element.classList.toggle("hidden",descColor!==color)})}toggleComponentVisibility(showComponents,hideComponents){showComponents.forEach(component=>{component.classList.remove("hidden")}),hideComponents.forEach(component=>{component.classList.add("hidden")})}connectedCallback(){this.ensureNoHiddenVariantSelected(),this.addEventListener("change",event=>{const target=this.getInputForEventTarget(event.target);this.updateSelectionMetadata(event),this.toggleQuantitySelector(target),this.updateProductDisplay(target),publish(PUB_SUB_EVENTS.optionValueSelectionChange,{data:{event,target,selectedOptionValues:this.selectedOptionValues}})})}ensureNoHiddenVariantSelected(){console.log("[Hidden Variants] Running ensureNoHiddenVariantSelected (format-aware)...");const planFieldsets=this.querySelectorAll("fieldset");console.log("[Hidden Variants] Found fieldsets:",planFieldsets.length),planFieldsets.forEach((fieldset,index)=>{const allInputs=fieldset.querySelectorAll('input[type="radio"]');console.log(`[Hidden Variants] Fieldset ${index}:`,{totalInputs:allInputs.length,inputs:Array.from(allInputs).map(inp=>({id:inp.id,value:inp.value,checked:inp.checked,variantId:inp.dataset.variantId,variantHiddenCss:inp.dataset.variantHiddenCss,name:inp.name}))});const checkedInput=fieldset.querySelector('input[type="radio"]:checked');if(checkedInput&&checkedInput.dataset.variantHiddenCss==="true"){const isVisuallyHidden=window.getComputedStyle(checkedInput.parentElement).display==="none";if(console.log("[Hidden Variants] Checked input analysis:",{id:checkedInput.id,value:checkedInput.value,variantId:checkedInput.dataset.variantId,hasHiddenAttribute:checkedInput.dataset.variantHiddenCss==="true",isVisuallyHidden}),isVisuallyHidden){console.log("[Hidden Variants] Current selection is hidden, finding replacement...");let foundReplacement=!1;for(const input of allInputs)if(window.getComputedStyle(input.parentElement).display!=="none"&&!input.classList.contains("disabled")){console.log("[Hidden Variants] Selecting replacement variant:",input.id,input.value),input.checked=!0,foundReplacement=!0,input.dispatchEvent(new Event("change",{bubbles:!0}));break}foundReplacement||(console.log("[Hidden Variants] No replacement found, unchecking hidden variant"),checkedInput.checked=!1)}}})}updateSelectionMetadata({target}){const{value,tagName}=target;if(tagName==="SELECT"&&target.selectedOptions.length){Array.from(target.options).find(option=>option.getAttribute("selected")).removeAttribute("selected"),target.selectedOptions[0].setAttribute("selected","selected");const swatchValue=target.selectedOptions[0].dataset.optionSwatchValue,selectedDropdownSwatchValue=target.closest(".product-form__input").querySelector("[data-selected-value] > .swatch");if(!selectedDropdownSwatchValue)return;swatchValue?(selectedDropdownSwatchValue.style.setProperty("--swatch--background",swatchValue),selectedDropdownSwatchValue.classList.remove("swatch--unavailable")):(selectedDropdownSwatchValue.style.setProperty("--swatch--background","unset"),selectedDropdownSwatchValue.classList.add("swatch--unavailable")),selectedDropdownSwatchValue.style.setProperty("--swatch-focal-point",target.selectedOptions[0].dataset.optionSwatchFocalPoint||"unset")}else if(tagName==="INPUT"&&target.type==="radio"){const selectedSwatchValue=target.closest(".product-form__input").querySelector("[data-selected-value]");selectedSwatchValue&&(selectedSwatchValue.innerHTML=value)}}getInputForEventTarget(target){return target.tagName==="SELECT"?target.selectedOptions[0]:target}get selectedOptionValues(){return Array.from(this.querySelectorAll("select option[selected], fieldset input:checked")).map(({dataset})=>dataset.optionValueId)}}customElements.define("variant-selects",VariantSelects);class ProductRecommendations extends HTMLElement{observer=void 0;constructor(){super()}connectedCallback(){this.initializeRecommendations(this.dataset.productId)}initializeRecommendations(productId){this.observer?.unobserve(this),this.observer=new IntersectionObserver((entries,observer)=>{entries[0].isIntersecting&&(observer.unobserve(this),this.loadRecommendations(productId))},{rootMargin:"0px 0px 400px 0px"}),this.observer.observe(this)}loadRecommendations(productId){fetch(`${this.dataset.url}&product_id=${productId}&section_id=${this.dataset.sectionId}`).then(response=>response.text()).then(text=>{const html=document.createElement("div");html.innerHTML=text;const recommendations=html.querySelector("product-recommendations");recommendations?.innerHTML.trim().length&&(this.innerHTML=recommendations.innerHTML),!this.querySelector("slideshow-component")&&this.classList.contains("complementary-products")&&this.remove(),html.querySelector(".grid__item")&&this.classList.add("product-recommendations--loaded")}).catch(e=>{console.error(e)})}}customElements.define("product-recommendations",ProductRecommendations);class AccountIcon extends HTMLElement{constructor(){super(),this.icon=this.querySelector(".icon")}connectedCallback(){document.addEventListener("storefront:signincompleted",this.handleStorefrontSignInCompleted.bind(this))}handleStorefrontSignInCompleted(event){event?.detail?.avatar&&this.icon?.replaceWith(event.detail.avatar.cloneNode())}}customElements.define("account-icon",AccountIcon);class BulkAdd extends HTMLElement{constructor(){super(),this.queue=[],this.requestStarted=!1,this.ids=[]}startQueue(id,quantity){this.queue.push({id,quantity});const interval=setInterval(()=>{this.queue.length>0?this.requestStarted||this.sendRequest(this.queue):clearInterval(interval)},250)}sendRequest(queue){this.requestStarted=!0;const items={};queue.forEach(queueItem=>{items[parseInt(queueItem.id)]=queueItem.quantity}),this.queue=this.queue.filter(queueElement=>!queue.includes(queueElement)),(this.closest("quick-order-list")||this.closest("quick-add-bulk")).updateMultipleQty(items)}resetQuantityInput(id){const input=this.querySelector(`#Quantity-${id}`);input.value=input.getAttribute("value"),this.isEnterPressed=!1}setValidity(event,index,message){event.target.setCustomValidity(message),event.target.reportValidity(),this.resetQuantityInput(index),event.target.select()}validateQuantity(event){const inputValue=parseInt(event.target.value),index=event.target.dataset.index;inputValue<event.target.dataset.min?this.setValidity(event,index,window.quickOrderListStrings.min_error.replace("[min]",event.target.dataset.min)):inputValue>parseInt(event.target.max)?this.setValidity(event,index,window.quickOrderListStrings.max_error.replace("[max]",event.target.max)):inputValue%parseInt(event.target.step)!=0?this.setValidity(event,index,window.quickOrderListStrings.step_error.replace("[step]",event.target.step)):(event.target.setCustomValidity(""),event.target.reportValidity(),this.startQueue(index,inputValue))}getSectionsUrl(){return window.pageNumber?`${window.location.pathname}?page=${window.pageNumber}`:`${window.location.pathname}`}getSectionInnerHTML(html,selector){return new DOMParser().parseFromString(html,"text/html").querySelector(selector).innerHTML}}customElements.get("bulk-add")||customElements.define("bulk-add",BulkAdd);function quickAddToCart(productHandle,button){button.classList.add("loading"),button.setAttribute("aria-disabled",!0),button.querySelector(".loading__spinner").querySelector("circle").style.stroke="#fff",button.querySelector(".loading__spinner").classList.remove("hidden");const cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer");let error=!1;const productIdMap={"embroidered-cap":46073776799911,"vegan-travel-pouch":46073776996519,"signature-cup":46761894150311},formData=new FormData;productIdMap[productHandle]&&(formData.append("id",productIdMap[productHandle]),formData.append("quantity",1)),cart&&(formData.append("sections",cart.getSectionsToRender().map(section=>section.id)),formData.append("sections_url",window.location.pathname),cart.setActiveElement(document.activeElement));const config=fetchConfig("javascript");config.headers["X-Requested-With"]="XMLHttpRequest",delete config.headers["Content-Type"],config.body=formData,fetch(`${routes.cart_add_url}`,config).then(response=>response.json()).then(response=>{if(response.status){publish(PUB_SUB_EVENTS.cartError,{source:"product-form",productVariantId:formData.get("id"),errors:response.errors||response.description,message:response.message}),error=!0;return}else if(!cart){window.location=window.routes.cart_url;return}cart.renderContents(response)}).catch(e=>{console.error(e)}).finally(()=>{button.classList.remove("loading"),cart&&cart.classList.contains("is-empty")&&cart.classList.remove("is-empty"),error||button.removeAttribute("aria-disabled"),button.querySelector(".loading__spinner").classList.add("hidden")})}function showPopup(){const merchandiseWithNoOptions=["embroidered-cap","vegan-travel-pouch","signature-cup"];document.body.hasAttribute("data-quick-add-initialized")||(document.body.setAttribute("data-quick-add-initialized","true"),document.body.addEventListener("click",function(event){const button=event.target.closest("[quick-add__submit]");if(!button)return;const productHandle=button.getAttribute("data-product-handle"),closePopup=document.querySelector("[js-hb-popup]"),productDetailContainer=document.querySelector("[js-product-detail]"),popupGrid=document.querySelector("[js-hb-popup]");merchandiseWithNoOptions.includes(productHandle)?quickAddToCart(productHandle,button):fetch(`/products/${productHandle}?view=hb-popup-ajax`).then(response=>response.text()).then(data=>{productDetailContainer.innerHTML=data,requestAnimationFrame(()=>{popupGrid.classList.remove("hidden"),popupGrid.classList.add("active")});const closeButton=productDetailContainer.querySelector("[js-hb-close-popup]");closeButton&&closeButton.addEventListener("click",function(){closeHbPopup(popupGrid)}),productDetailContainer.addEventListener("click",function(event2){event2.stopPropagation()}),initHbPopupQuarterlyAndBanner(),initOtpLinkHandlers()}).catch(error=>{console.error("Error fetching product data:",error)})}),document.querySelector("[js-hb-popup]").addEventListener("click",function(){closeHbPopup(this)}))}function closeHbPopup(popupGrid){popupGrid.classList.contains("active")&&popupGrid.classList.remove("active")}function initOtpLinkHandlers(){console.log("[OTP] initOtpLinkHandlers called");const popupContainer=document.querySelector("[js-product-detail]")||document.querySelector(".hb_popup__inner");if(!popupContainer){console.log("[OTP] No popup container found");return}const otpLinks=popupContainer.querySelectorAll(".one-time-purchase-link");console.log("[OTP] Found OTP links:",otpLinks.length),otpLinks.forEach(function(otpLink){if(otpLink.dataset.listenerAttached==="true"){console.log("[OTP] Listener already attached for:",otpLink.dataset.productId);return}otpLink.dataset.listenerAttached="true",console.log("[OTP] Attaching click listener for product:",otpLink.dataset.productId,"variant:",otpLink.dataset.variantId),otpLink.addEventListener("click",async function(e){e.preventDefault();const variantId=this.dataset.variantId,link=this;link.style.pointerEvents="none",link.style.opacity="0.5",console.log("[One Time Purchase] Adding variant directly to cart:",variantId,"for product:",this.dataset.productHandle);const cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer");if(!cart){console.log("[One Time Purchase] No cart element found, redirecting to cart"),window.location.href="/cart?add="+variantId;return}try{const sectionsToRender=cart.getSectionsToRender?cart.getSectionsToRender().map(section=>section.id):[],body=JSON.stringify({items:[{id:parseInt(variantId),quantity:1}],sections:sectionsToRender,sections_url:window.location.pathname}),state=await(await fetch(window.routes.cart_add_url||"/cart/add.js",{...fetchConfig(),body})).text(),parsedState=JSON.parse(state);if(console.log("[One Time Purchase] Cart response:",parsedState),parsedState.status){console.error("[One Time Purchase] Error:",parsedState.description||parsedState.message),alert(parsedState.description||parsedState.message||"Error adding to cart");return}cart&&typeof cart.renderContents=="function"&&cart.renderContents(parsedState),cart&&cart.classList.contains("is-empty")&&cart.classList.remove("is-empty");const quickAddDrawer=document.querySelector("[js-hb-popup]");quickAddDrawer&&(quickAddDrawer.classList.remove("open"),quickAddDrawer.classList.remove("active"),quickAddDrawer.classList.add("hidden"))}catch(error){console.error("[One Time Purchase] Error adding to cart:",error),window.location.href="/cart"}finally{link.style.pointerEvents="",link.style.opacity=""}})})}let hbPopupEventListenersAdded=!1;function initHbPopupQuarterlyAndBanner(){console.log("[HB Popup] Initializing region-based variant selection and BFCM banner...");const popupContainer=document.querySelector("[js-product-detail]")||document.querySelector(".hb_popup__wraper");if(!popupContainer){console.log("[HB Popup] Popup container not found");return}function updateBfcmBanner(){const banner=popupContainer.querySelector("[data-bfcm-banner-inner]");if(!banner){console.log("[BFCM Banner] Banner element not found in popup");return}const variantSelects=popupContainer.querySelector("#variant-selects-hb-popup-ajax");if(!variantSelects){console.log("[BFCM Banner] No variant selects found - keeping banner hidden"),banner.classList.remove("bfcm-banner-visible"),banner.style.cssText="display:none!important;visibility:hidden!important;opacity:0!important;";return}const quarterlyWrapper=variantSelects.querySelector(".quarterly-variant-wrapper"),quarterlyInput=variantSelects.querySelector('input[data-quarterly-variant="true"]'),hasQuarterlyVariant=!!(quarterlyWrapper||quarterlyInput),doubleSubWrapper=variantSelects.querySelector(".double-subscription-variant-wrapper"),doubleSubInput=variantSelects.querySelector('input[data-double-subscription="true"]'),hasDoubleSubVariant=!!(doubleSubWrapper||doubleSubInput),hasOfferVariant=hasQuarterlyVariant||hasDoubleSubVariant;if(console.log("[BFCM Banner] Checking for offer variants:",{hasQuarterly:hasQuarterlyVariant,hasDoubleSub:hasDoubleSubVariant}),!hasOfferVariant){console.log("[BFCM Banner] Product has NO offer variants - keeping banner hidden"),banner.classList.remove("bfcm-banner-visible"),banner.style.cssText="display:none!important;visibility:hidden!important;opacity:0!important;";return}let isQuarterlySelected=!1;if(quarterlyWrapper){const inputInWrapper=quarterlyWrapper.querySelector('input[type="radio"]');inputInWrapper&&inputInWrapper.checked&&(isQuarterlySelected=!0)}!isQuarterlySelected&&quarterlyInput&&quarterlyInput.checked&&(isQuarterlySelected=!0);let isDoubleSubSelected=!1;if(doubleSubWrapper){const inputInWrapper=doubleSubWrapper.querySelector('input[type="radio"]');inputInWrapper&&inputInWrapper.checked&&(isDoubleSubSelected=!0)}!isDoubleSubSelected&&doubleSubInput&&doubleSubInput.checked&&(isDoubleSubSelected=!0);const showBanner=isQuarterlySelected||isDoubleSubSelected;console.log("[BFCM Banner] Result:",{quarterly:isQuarterlySelected,doubleSub:isDoubleSubSelected,show:showBanner}),showBanner?(banner.removeAttribute("style"),banner.classList.add("bfcm-banner-visible"),console.log("[BFCM Banner] \u2713 SHOWING banner")):(banner.classList.remove("bfcm-banner-visible"),banner.style.cssText="display:none!important;visibility:hidden!important;opacity:0!important;",console.log("[BFCM Banner] \u2717 HIDING banner"))}window.updateBfcmBannerInPopup=updateBfcmBanner;function autoSelectVariantByRegion(){const variantSelects=popupContainer.querySelector("#variant-selects-hb-popup-ajax");if(!variantSelects){updateBfcmBanner();return}function isInputVisible(input){if(!input)return!1;const wrapper=input.closest(".product-variant-option-wrapper");if(!wrapper)return!1;const style=window.getComputedStyle(wrapper);return style.display!=="none"&&style.visibility!=="hidden"}const quarterlyInput=variantSelects.querySelector('.quarterly-variant-wrapper input[type="radio"]')||variantSelects.querySelector('input[type="radio"][data-quarterly-variant="true"]'),doubleSubInput=variantSelects.querySelector('.double-subscription-variant-wrapper input[type="radio"]')||variantSelects.querySelector('input[type="radio"][data-double-subscription="true"]');let targetInput=null,variantType="";if(quarterlyInput&&isInputVisible(quarterlyInput)?(targetInput=quarterlyInput,variantType="quarterly (90-day)"):doubleSubInput&&isInputVisible(doubleSubInput)&&(targetInput=doubleSubInput,variantType="double subscription (60-day)"),!targetInput){console.log("[HB Popup] No premium variant visible, keeping default selection"),updateBfcmBanner();return}if(console.log("[HB Popup] Found visible",variantType,"input, checked:",targetInput.checked),!targetInput.checked){console.log("[HB Popup] Auto-selecting",variantType,"variant"),targetInput.checked=!0;const wrapper=targetInput.closest(".product-variant-option-wrapper"),label=wrapper?wrapper.querySelector("label"):targetInput.nextElementSibling;label&&label.click(),targetInput.dispatchEvent(new Event("change",{bubbles:!0}))}setTimeout(updateBfcmBanner,100)}hbPopupEventListenersAdded||(document.addEventListener("change",function(e){e.target.closest("#variant-selects-hb-popup-ajax")&&e.target.matches('input[type="radio"]')&&(console.log("[HB Popup] Variant radio changed"),setTimeout(updateBfcmBanner,50),setTimeout(updateBfcmBanner,150))}),document.addEventListener("click",function(e){e.target.closest("#variant-selects-hb-popup-ajax label")&&(console.log("[HB Popup] Label clicked"),setTimeout(updateBfcmBanner,50),setTimeout(updateBfcmBanner,150))}),hbPopupEventListenersAdded=!0),setTimeout(autoSelectVariantByRegion,100),setTimeout(autoSelectVariantByRegion,200),setTimeout(updateBfcmBanner,300),setTimeout(updateBfcmBanner,500)}showPopup(),document.addEventListener("showPopup:init",showPopup);const accordionItems=document.querySelectorAll("[js-accordion-item]");accordionItems.length&&document.querySelectorAll("[js-accordion-header]").forEach(button=>{button.addEventListener("click",function(){const accordionItem=this.parentElement,accordionPanel=accordionItem.querySelector("[js-accordion-panel]"),height=accordionPanel.querySelector(".hb-panel_inner").offsetHeight,isOpens=accordionItem.classList.contains("active");accordionItems.forEach(accordion=>{accordion.classList.remove("active"),accordion.querySelector("[js-accordion-panel]")&&(accordion.querySelector("[js-accordion-panel]").style.height=0)}),isOpens||(accordionItem.classList.add("active"),accordionPanel.style.height=`${height}px`)})});const updateFreeShippingText=()=>{const bar=document.querySelector(".cart-progress-bar");if(bar&&bar.dataset.applyShippingChecks==="true"){const isFreeShipping=bar.dataset.hasSubscriptionItems==="true",freeShippingText="Congrats, you have unlocked free shipping!",total=parseFloat(bar.dataset.cartTotal)||0,baseThreshold=parseFloat(bar.dataset.shippingThreshold)||0,symbol=bar.dataset.currency||"$",rate=window.Shopify?.currency?.rate||1,threshold=(baseThreshold*rate).toFixed(2),needed=Math.ceil(Math.max(0,threshold-total)),progressPercentage=isFreeShipping?100:Math.min(total/threshold*100,100).toFixed(0),progressMessage=bar.querySelector(".progress-message");progressMessage&&(progressMessage.innerText=isFreeShipping?freeShippingText:total<threshold?`You are ${symbol}${needed} away from free shipping`:freeShippingText);const progressMeter=bar.querySelector(".progress-meter"),progressIcon=bar.querySelector(".progress-icon");progressMeter&&(progressMeter.style.width=`${progressPercentage}%`),progressIcon&&(progressIcon.style.left=`calc(${progressPercentage}% - 2px)`)}},productToGiftMap={"46073779257511":["46244317462695","46244540022951","46281698476199","46281699885223"],"46166911811751":["46244317462695","46244540022951"],"46954316955815":["46244317462695","46244540022951","46281698476199","46281699885223"],"46073779323047":["46244317462695","46244540022951"],"46954316923047":["46244317462695","46244540022951"],"46073779388583":["46244317462695","46244540022951","46281699885223","46282600120487"],"46166929735847":["46244317462695","46244540022951"],"47315075989671":["46244317462695","46244540022951","47321715015847"],"47315076022439":["46244317462695","46244540022951","46281698476199","46281699885223","47321715015847"],"47315205226663":["46244317462695","46244540022951","47321715015847"],"47315205259431":["46244317462695","46244540022951","46281699885223","46282600120487","47321715015847"],"47315089129639":["46244317462695","46244540022951","47321715015847"]},quarterlySubscriptionVariantIds=new Set(["47315075989671","47315076022439","47315205226663","47315205259431","47315089129639"]),doubleSubscriptionVariantIds=new Set(["46954316955815","46954316923047"]),euCaStickGiftCountries=new Set(["CA","IL","CH","NO","AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"]),euCaStickGiftMap={"46166911811751":{giftVariantId:"47335234175143",sellingPlanId:"2546008231"},"46073779257511":{giftVariantId:"47335234175143",sellingPlanId:"2546008231"},"46954316923047":{giftVariantId:"47335272644775",sellingPlanId:"2951151783"},"46954316955815":{giftVariantId:"47335272644775",sellingPlanId:"2951151783"},"47315075989671":{giftVariantId:"47380378714279",sellingPlanId:"2948432039"},"47315076022439":{giftVariantId:"47380378714279",sellingPlanId:"2948432039"},"46073779323047":{giftVariantId:"47335282704551",sellingPlanId:"2546008231"},"47315089129639":{giftVariantId:"47380383137959",sellingPlanId:"2948432039"},"46166929735847":[{giftVariantId:"47335234175143",sellingPlanId:"2546008231"},{giftVariantId:"47335282704551",sellingPlanId:"2546008231"}],"46073779388583":[{giftVariantId:"47335234175143",sellingPlanId:"2546008231"},{giftVariantId:"47335282704551",sellingPlanId:"2546008231"}],"47315205226663":[{giftVariantId:"47380378714279",sellingPlanId:"2948432039"},{giftVariantId:"47380383137959",sellingPlanId:"2948432039"}],"47315205259431":[{giftVariantId:"47380378714279",sellingPlanId:"2948432039"},{giftVariantId:"47380383137959",sellingPlanId:"2948432039"}]},euCaStickGiftVariantIds=new Set(["47335234175143","47335272644775","47380378714279","47335282704551","47335282016423","47380383137959"]);document.addEventListener("DOMContentLoaded",()=>{subscribe(PUB_SUB_EVENTS.cartUpdate,event=>{const{eventType,cartData}=event;eventType&&(eventType==EVENT_TYPE.add||eventType==EVENT_TYPE.quantityChanged)&&syncAllGifts(cartData)})}),document.addEventListener("product-info:loaded",()=>{const popupProductInfo=document.querySelector("product-info[data-section='hb-popup-ajax']");if(!popupProductInfo)return;const productForm=popupProductInfo.querySelector("product-form"),atcButton=popupProductInfo.querySelector("#ProductSubmitButton-hb-popup-ajax"),isPreorder=productForm?.dataset?.preorder==="true";if(!atcButton)return;const setPopupAtcLabel=()=>{if(!atcButton)return;const priceEl=popupProductInfo.querySelector("#price-hb-popup-ajax"),priceText=priceEl?priceEl.textContent.trim():"",span=atcButton.querySelector("span");span&&(span.textContent=(isPreorder?"Pre-order":window.variantStrings?.addToCart||"Add to cart")+" -")};setPopupAtcLabel(),popupProductInfo.addEventListener("change",e=>{e.target.matches(".product-form__input input[type='radio']")&&setPopupAtcLabel()});const atcBlock=document.querySelector(".hb_popup__atc");if(atcBlock){const updatePadding=()=>{const h=atcBlock.getBoundingClientRect().height;popupProductInfo.style.paddingBottom=`${Math.ceil(h+40)}px`};updatePadding(),new ResizeObserver(updatePadding).observe(atcBlock)}});let syncAllGiftsRunning=!1,syncAllGiftsPending=null;async function syncAllGifts(eventCartData){if(syncAllGiftsRunning){console.log("[Gift Sync] Already running, queuing request..."),syncAllGiftsPending=eventCartData;return}syncAllGiftsRunning=!0;const cartDrawer=document.querySelector("cart-drawer");if(!cartDrawer){syncAllGiftsRunning=!1;return}try{const cart=await(await fetch("/cart.js")).json(),currentCountry=window.storeConstants?.countryCode||"",isEuCaCountry=euCaStickGiftCountries.has(currentCountry),sections=cartDrawer.getSectionsToRender().map(s=>s.id),desiredStandard={},desiredSticks={},currentStandard={},currentSticks={};cart.items.forEach(item=>{const vid=String(item.variant_id||item.id);if(productToGiftMap[vid]){const mult=doubleSubscriptionVariantIds.has(vid)?2:1;productToGiftMap[vid].forEach(gid=>{desiredStandard[gid]=(desiredStandard[gid]||0)+item.quantity*mult})}isEuCaCountry&&euCaStickGiftMap[vid]&&(Array.isArray(euCaStickGiftMap[vid])?euCaStickGiftMap[vid]:[euCaStickGiftMap[vid]]).forEach(c=>{const k=`${c.giftVariantId}_${c.sellingPlanId}`;desiredSticks[k]||(desiredSticks[k]={vid:c.giftVariantId,sp:c.sellingPlanId,qty:0}),desiredSticks[k].qty+=item.quantity});const vStr=String(item.variant_id);if(euCaStickGiftVariantIds.has(vStr)){let sp="";const raw=item.selling_plan_allocation?.selling_plan?.id;raw&&(sp=String(raw).replace("gid://shopify/SellingPlan/","")),currentSticks[`${vStr}_${sp}`]={qty:item.quantity,key:item.key}}else item.product_type===window.storeConstants?.freeGiftType&&(currentStandard[vStr]={qty:item.quantity,key:item.key})});const toAdd=[],toUpdate={};console.log("[Gift Sync] Desired gifts:",desiredStandard),console.log("[Gift Sync] Current gifts in cart:",currentStandard),Object.entries(desiredStandard).forEach(([gid,want])=>{const current=currentStandard[gid],have=current?current.qty:0;have===0?(toAdd.push({id:Number(gid),quantity:want}),console.log(`[Gift Sync] Will ADD gift ${gid} qty=${want}`)):have!==want&&(toUpdate[current.key]=want,console.log(`[Gift Sync] Will UPDATE gift ${gid} (key=${current.key}) from ${have} to ${want}`))}),Object.entries(currentStandard).forEach(([gid,current])=>{desiredStandard[gid]||(toUpdate[current.key]=0,console.log(`[Gift Sync] Will REMOVE gift ${gid} (key=${current.key}) - subscription removed`))}),Object.entries(desiredSticks).forEach(([k,d])=>{const c=currentSticks[k];c?c.qty!==d.qty&&(toUpdate[c.key]=d.qty):toAdd.push({id:Number(d.vid),quantity:d.qty,selling_plan:Number(d.sp)})}),Object.entries(currentSticks).forEach(([k,c])=>{desiredSticks[k]||(toUpdate[c.key]=0)});const hasAdds=toAdd.length>0,hasUpdates=Object.keys(toUpdate).length>0;if(!hasAdds&&!hasUpdates)return;let finalState;hasAdds&&!hasUpdates?finalState=await(await fetch(`${routes.cart_add_url}`,{...fetchConfig(),body:JSON.stringify({items:toAdd,sections})})).json():!hasAdds&&hasUpdates?finalState=await(await fetch(`${routes.cart_update_url}`,{...fetchConfig(),body:JSON.stringify({updates:toUpdate,sections})})).json():(await fetch(`${routes.cart_add_url}`,{...fetchConfig(),body:JSON.stringify({items:toAdd})}),finalState=await(await fetch(`${routes.cart_update_url}`,{...fetchConfig(),body:JSON.stringify({updates:toUpdate,sections})})).json()),finalState?.sections&&cartDrawer.renderContents(finalState)}catch(error){console.error("[Gift Sync] Error:",error)}finally{if(syncAllGiftsRunning=!1,syncAllGiftsPending!==null){console.log("[Gift Sync] Processing pending request...");const pendingData=syncAllGiftsPending;syncAllGiftsPending=null,setTimeout(()=>syncAllGifts(pendingData),50)}}}function toggleCartState(disable=!0){const cartContainer=document.querySelector("cart-drawer"),drawerInner=document.querySelector("#CartDrawer .drawer__inner"),checkoutButton=document.querySelector('.cart__ctas button[type="submit"]');if(cartContainer&&(cartContainer.style.pointerEvents="auto"),checkoutButton&&(disable?checkoutButton.setAttribute("disabled","true"):checkoutButton.removeAttribute("disabled")),document&&document.documentElement&&(document.documentElement.dataset.cartUpdating=disable?"true":"false"),cartContainer){let blocker=cartContainer.querySelector("#CartDrawer-Blocker");disable?(blocker||(blocker=document.createElement("div"),blocker.id="CartDrawer-Blocker",blocker.style.position="fixed",blocker.style.inset="0",blocker.style.background="transparent",blocker.style.zIndex="1",blocker.style.pointerEvents="auto",blocker.style.cursor="wait",["click","mousedown","mouseup","touchstart","touchend","pointerdown","pointerup"].forEach(evt=>{blocker.addEventListener(evt,e=>{e.stopPropagation(),e.preventDefault()},!0)}),cartContainer.appendChild(blocker)),drawerInner&&(drawerInner.setAttribute("inert",""),drawerInner.setAttribute("aria-busy","true"))):(blocker&&blocker.remove(),drawerInner&&(drawerInner.removeAttribute("inert"),drawerInner.removeAttribute("aria-busy")))}}async function addGiftItems(variantId,quantity){return console.log("[Gift] addGiftItems called (alias for syncAllGifts), variantId:",variantId,"quantity:",quantity),syncAllGifts()}
//# sourceMappingURL=/cdn/shop/t/121/assets/global.js.map?v=97877559066876142231768977089
