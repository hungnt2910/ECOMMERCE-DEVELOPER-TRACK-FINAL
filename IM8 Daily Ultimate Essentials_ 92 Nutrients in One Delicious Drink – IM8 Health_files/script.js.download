var ConvertBundle;(()=>{var e={89:(e,t,r)=>{var n=r(5838),o=r(8324);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},161:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Kafka=void 0;const n=r(1926),o=r(6749),i=r(3481),a={binary:function(e){return{headers:{[n.CONSTANTS.HEADER_CONTENT_TYPE]:e.datacontenttype,...(0,o.headersFor)(e)},key:e.partitionkey,value:e.data,body:e.data,timestamp:u(e.time)}},structured:function(e){e instanceof n.CloudEvent&&e.data_base64&&(e=e.cloneWith({data:void 0}));const t=e.toString();return{key:e.partitionkey,value:t,headers:{[n.CONSTANTS.HEADER_CONTENT_TYPE]:n.CONSTANTS.DEFAULT_CE_CONTENT_TYPE},body:t,timestamp:u(e.time)}},toEvent:function(e){if(!s(e))throw new n.ValidationError("No CloudEvent detected");const t=e;if(!t.value)throw new n.ValidationError("Value is null or undefined");if(!t.headers)throw new n.ValidationError("Headers are null or undefined");const r=(0,i.sanitize)(t.headers);switch(function(e){const t=e[n.CONSTANTS.HEADER_CONTENT_TYPE];if(t){if(t.startsWith(n.CONSTANTS.MIME_CE_BATCH))return n.Mode.BATCH;if(t.startsWith(n.CONSTANTS.MIME_CE))return n.Mode.STRUCTURED}return n.Mode.BINARY}(r)){case n.Mode.BINARY:return function(e){const t={},r={...e.headers};t.datacontenttype=r[n.CONSTANTS.HEADER_CONTENT_TYPE];for(const n in o.KAFKA_CE_HEADERS){const e=o.KAFKA_CE_HEADERS[n];r[e]&&(t[o.HEADER_MAP[e]]=r[e],e===o.KAFKA_CE_HEADERS.TIME&&(t.time=new Date(t.time).toISOString()),delete r[e])}for(const n in r)n.startsWith("ce_")&&(t[n.replace("ce_","")]=r[n]);return new n.CloudEvent({...t,data:c(e),partitionkey:e.key},!1)}(t);case n.Mode.STRUCTURED:return function(e){if(!e.headers[n.CONSTANTS.HEADER_CONTENT_TYPE]?.startsWith(n.CONSTANTS.MIME_CE_JSON))throw new n.ValidationError(`Unsupported event encoding ${e.headers[n.CONSTANTS.HEADER_CONTENT_TYPE]}`);const t=JSON.parse(e.value);return t.time=new Date(t.time).toISOString(),new n.CloudEvent({...t,partitionkey:e.key},!1)}(t);case n.Mode.BATCH:return function(e){if(!e.headers[n.CONSTANTS.HEADER_CONTENT_TYPE]?.startsWith(n.CONSTANTS.MIME_CE_BATCH))throw new n.ValidationError(`Unsupported event encoding ${e.headers[n.CONSTANTS.HEADER_CONTENT_TYPE]}`);const t=JSON.parse(e.value);return t.map((t=>new n.CloudEvent({...t,partitionkey:e.key},!1)))}(t);default:throw new n.ValidationError("Unknown Message mode")}},isEvent:s};function s(e){const t=(0,i.sanitize)(e.headers);return!!t[o.KAFKA_CE_HEADERS.ID]||t[n.CONSTANTS.HEADER_CONTENT_TYPE]?.startsWith(n.CONSTANTS.MIME_CE)||t[n.CONSTANTS.HEADER_CONTENT_TYPE]?.startsWith(n.CONSTANTS.MIME_CE_BATCH)}function c(e){let t=e.value;const r=e.headers[n.CONSTANTS.HEADER_CONTENT_TYPE];return r&&r.startsWith(n.CONSTANTS.MIME_JSON)&&("string"==typeof e.value?t=JSON.parse(e.value):"object"==typeof e.value&&Buffer.isBuffer(e.value)&&(t=JSON.parse(e.value.toString()))),t}function u(e){return e?`${Date.parse(e)}`:void 0}t.Kafka=a},237:(e,t,r)=>{"use strict";var n,o=r(9272),i=r(8863)(/^\s*(?:function)?\*/),a=r(1944)(),s=r(6153),c=o("Object.prototype.toString"),u=o("Function.prototype.toString");e.exports=function(e){if("function"!=typeof e)return!1;if(i(u(e)))return!0;if(!a)return"[object GeneratorFunction]"===c(e);if(!s)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&s(t)}return s(e)===n}},254:e=>{"use strict";e.exports=SyntaxError},291:e=>{"use strict";e.exports=Math.max},315:e=>{"use strict";e.exports=URIError},320:e=>{"use strict";e.exports=Object},331:(e,t,r)=>{var n=r(1774);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},527:(e,t,r)=>{var n=r(8268)(r(631),"Set");e.exports=n},631:(e,t,r)=>{var n=r(6210),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},778:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},858:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},939:e=>{"use strict";e.exports=EvalError},966:(e,t,r)=>{var n=r(331),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},967:(e,t,r)=>{"use strict";e.exports=p,e.exports.default=p;const n={type:["string","null"],minLength:1},o={type:["string","null"],format:"uri",minLength:1},i={type:["string","null"],minLength:1},a={type:["string","null"],format:"date-time",minLength:1},s={type:["object","string","number","array","boolean","null"]},c={type:["string","null"],contentEncoding:"base64"},u=r(8149).A,l=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,f=r(8603).U9.uri,d=r(8603).U9["date-time"];function p(e,{instancePath:t="",parentData:r,parentDataProperty:g,rootData:h=e}={}){if(!e||"object"!=typeof e||Array.isArray(e))return p.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.id&&(r="id")||void 0===e.source&&(r="source")||void 0===e.specversion&&(r="specversion")||void 0===e.type&&(r="type"))return p.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;if(void 0!==e.id){let r=e.id;const n=0;if(0===0){if("string"!=typeof r)return p.errors=[{instancePath:t+"/id",schemaPath:"#/definitions/iddef/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(u(r)<1)return p.errors=[{instancePath:t+"/id",schemaPath:"#/definitions/iddef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}var y=0===n}else y=!0;if(y){if(void 0!==e.source){let r=e.source;const n=0,o=0;if(0===o&&0===o){if("string"!=typeof r)return p.errors=[{instancePath:t+"/source",schemaPath:"#/definitions/sourcedef/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(u(r)<1)return p.errors=[{instancePath:t+"/source",schemaPath:"#/definitions/sourcedef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;if(!l.test(r))return p.errors=[{instancePath:t+"/source",schemaPath:"#/definitions/sourcedef/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}y=0===n}else y=!0;if(y){if(void 0!==e.specversion){let r=e.specversion;const n=0;if(0===0){if("string"!=typeof r)return p.errors=[{instancePath:t+"/specversion",schemaPath:"#/definitions/specversiondef/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(u(r)<1)return p.errors=[{instancePath:t+"/specversion",schemaPath:"#/definitions/specversiondef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}y=0===n}else y=!0;if(y){if(void 0!==e.type){let r=e.type;const n=0;if(0===0){if("string"!=typeof r)return p.errors=[{instancePath:t+"/type",schemaPath:"#/definitions/typedef/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(u(r)<1)return p.errors=[{instancePath:t+"/type",schemaPath:"#/definitions/typedef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}y=0===n}else y=!0;if(y){if(void 0!==e.datacontenttype){let r=e.datacontenttype;const o=0,i=0;if("string"!=typeof r&&null!==r)return p.errors=[{instancePath:t+"/datacontenttype",schemaPath:"#/definitions/datacontenttypedef/type",keyword:"type",params:{type:n.type},message:"must be string,null"}],!1;if(0===i&&"string"==typeof r&&u(r)<1)return p.errors=[{instancePath:t+"/datacontenttype",schemaPath:"#/definitions/datacontenttypedef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;y=0===o}else y=!0;if(y){if(void 0!==e.dataschema){let r=e.dataschema;const n=0,i=0;if("string"!=typeof r&&null!==r)return p.errors=[{instancePath:t+"/dataschema",schemaPath:"#/definitions/dataschemadef/type",keyword:"type",params:{type:o.type},message:"must be string,null"}],!1;if(0===i&&0===i&&"string"==typeof r){if(u(r)<1)return p.errors=[{instancePath:t+"/dataschema",schemaPath:"#/definitions/dataschemadef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;if(!f(r))return p.errors=[{instancePath:t+"/dataschema",schemaPath:"#/definitions/dataschemadef/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}y=0===n}else y=!0;if(y){if(void 0!==e.subject){let r=e.subject;const n=0,o=0;if("string"!=typeof r&&null!==r)return p.errors=[{instancePath:t+"/subject",schemaPath:"#/definitions/subjectdef/type",keyword:"type",params:{type:i.type},message:"must be string,null"}],!1;if(0===o&&"string"==typeof r&&u(r)<1)return p.errors=[{instancePath:t+"/subject",schemaPath:"#/definitions/subjectdef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;y=0===n}else y=!0;if(y){if(void 0!==e.time){let r=e.time;const n=0,o=0;if("string"!=typeof r&&null!==r)return p.errors=[{instancePath:t+"/time",schemaPath:"#/definitions/timedef/type",keyword:"type",params:{type:a.type},message:"must be string,null"}],!1;if(0===o&&0===o&&"string"==typeof r){if(u(r)<1)return p.errors=[{instancePath:t+"/time",schemaPath:"#/definitions/timedef/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;if(!d.validate(r))return p.errors=[{instancePath:t+"/time",schemaPath:"#/definitions/timedef/format",keyword:"format",params:{format:"date-time"},message:'must match format "date-time"'}],!1}y=0===n}else y=!0;if(y){if(void 0!==e.data){let r=e.data;const n=0;if("object"!=typeof r&&"string"!=typeof r&&("number"!=typeof r||!isFinite(r))&&"boolean"!=typeof r)return p.errors=[{instancePath:t+"/data",schemaPath:"#/definitions/datadef/type",keyword:"type",params:{type:s.type},message:"must be object,string,number,array,boolean,null"}],!1;y=0===n}else y=!0;if(y)if(void 0!==e.data_base64){let r=e.data_base64;const n=0;if("string"!=typeof r&&null!==r)return p.errors=[{instancePath:t+"/data_base64",schemaPath:"#/definitions/data_base64def/type",keyword:"type",params:{type:c.type},message:"must be string,null"}],!1;y=0===n}else y=!0}}}}}}}}}return p.errors=null,!0}},978:(e,t,r)=>{var n=r(2332),o=r(7227),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=s},1055:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=r(0,o.length-a.length),c=[],u=0;u<s;u++)c[u]="$"+u;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},1102:(e,t,r)=>{var n=r(1401);function o(e){var t,r=n.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=n.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9\\_:.-]/gim;function s(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function c(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function u(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function l(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,r){"use strict";var n="",a=0,s=!1,c=!1,u=0,l=e.length,f="",d="";e:for(u=0;u<l;u++){var p=e.charAt(u);if(!1===s){if("<"===p){s=u;continue}}else if(!1===c){if("<"===p){n+=r(e.slice(a,u)),s=u,a=u;continue}if(">"===p||u===l-1){n+=r(e.slice(a,s)),f=o(d=e.slice(s,u+1)),n+=t(s,n.length,f,d,i(d)),a=u+1,s=!1;continue}if('"'===p||"'"===p)for(var g=1,h=e.charAt(u-g);""===h.trim()||"="===h;){if("="===h){c=p;continue e}h=e.charAt(u-++g)}}else if(p===c){c=!1;continue}}return a<l&&(n+=r(e.substr(a))),n},t.parseAttr=function(e,t){"use strict";var r=0,o=0,i=[],f=!1,d=e.length;function p(e,r){if(!((e=(e=n.trim(e)).replace(a,"").toLowerCase()).length<1)){var o=t(e,r||"");o&&i.push(o)}}for(var g=0;g<d;g++){var h,y=e.charAt(g);if(!1!==f||"="!==y)if(!1===f||g!==o)if(/\s|\n|\t/.test(y)){if(e=e.replace(/\s|\n|\t/g," "),!1===f){if(-1===(h=s(e,g))){p(n.trim(e.slice(r,g))),f=!1,r=g+1;continue}g=h-1;continue}if(-1===(h=u(e,g-1))){p(f,l(n.trim(e.slice(r,g)))),f=!1,r=g+1;continue}}else;else{if(-1===(h=e.indexOf(y,g+1)))break;p(f,n.trim(e.slice(o+1,h))),f=!1,r=(g=h)+1}else f=e.slice(r,g),r=g+1,o='"'===e.charAt(r)||"'"===e.charAt(r)?r:c(e,g+1)}return r<e.length&&(!1===f?p(e.slice(r)):p(f,l(n.trim(e.slice(r))))),n.trim(i.join(" "))}},1283:e=>{"use strict";e.exports=Math.floor},1323:e=>{"use strict";e.exports=Math.pow},1389:e=>{e.exports=function(e){return this.__data__.has(e)}},1401:e=>{e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},1403:(e,t,r)=>{var n=r(5058),o=r(3433),i=r(9562),a=r(527),s=r(7345),c=r(8742),u=r(4235),l="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",g="[object DataView]",h=u(n),y=u(o),E=u(i),_=u(a),v=u(s),T=c;(n&&T(new n(new ArrayBuffer(1)))!=g||o&&T(new o)!=l||i&&T(i.resolve())!=f||a&&T(new a)!=d||s&&T(new s)!=p)&&(T=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case h:return g;case y:return l;case E:return f;case _:return d;case v:return p}return t}),e.exports=T},1423:e=>{e.exports=function(e){return this.__data__.has(e)}},1445:(e,t,r)=>{var n=r(9511),o=r(3103);r(4640);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||n.whiteList,e.onAttr=e.onAttr||n.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||n.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||n.safeAttrValue,this.options=e}a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return o(e,(function(e,t,o,c,u){var l=r[o],f=!1;if(!0===l?f=l:"function"==typeof l?f=l(c):l instanceof RegExp&&(f=l.test(c)),!0!==f&&(f=!1),c=s(o,c)){var d,p={position:t,sourcePosition:e,source:u,isWhite:f};return f?i(d=n(o,c,p))?o+":"+c:d:i(d=a(o,c,p))?void 0:d}}))},e.exports=a},1546:(e,t,r)=>{"use strict";var n=r(6409),o=r(9971),i=r(8622)(),a=r(1686),s=r(1653),c=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||c(t)!==t)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,u=!0;if("length"in e&&a){var l=a(e,"length");l&&!l.configurable&&(n=!1),l&&!l.writable&&(u=!1)}return(n||u||!r)&&(i?o(e,"length",t,!0,!0):o(e,"length",t)),e}},1566:(e,t,r)=>{var n=r(8176);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},1569:(e,t,r)=>{var n=r(331);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},1592:e=>{"use strict";e.exports=ReferenceError},1616:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1637:e=>{e.exports=function(e,t){return e.has(t)}},1653:e=>{"use strict";e.exports=TypeError},1677:(e,t,r)=>{var n=r(4278),o=r(6722),i=r(8324),a=r(9818),s=r(2579),c=r(9289),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),l=!r&&o(e),f=!r&&!l&&a(e),d=!r&&!l&&!f&&c(e),p=r||l||f||d,g=p?n(e.length,String):[],h=g.length;for(var y in e)!t&&!u.call(e,y)||p&&("length"==y||f&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,h))||g.push(y);return g}},1679:(e,t,r)=>{e=r.nmd(e);var n=r(6210),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},1686:(e,t,r)=>{"use strict";var n=r(9250);if(n)try{n([],"length")}catch(o){n=null}e.exports=n},1691:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(r){t=!1}e.exports=t},1707:(e,t,r)=>{var n=r(631)["__core-js_shared__"];e.exports=n},1774:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},1926:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CONSTANTS=t.Emitter=t.httpTransport=t.emitterFor=t.MQTTMessageFactory=t.MQTT=t.Kafka=t.HTTP=t.Mode=t.ValidationError=t.V03=t.V1=t.CloudEvent=void 0;const o=r(6642);Object.defineProperty(t,"CloudEvent",{enumerable:!0,get:function(){return o.CloudEvent}}),Object.defineProperty(t,"V1",{enumerable:!0,get:function(){return o.V1}}),Object.defineProperty(t,"V03",{enumerable:!0,get:function(){return o.V03}});const i=r(5590);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return i.ValidationError}});const a=r(3090);Object.defineProperty(t,"emitterFor",{enumerable:!0,get:function(){return a.emitterFor}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return a.Emitter}});const s=r(7241);Object.defineProperty(t,"httpTransport",{enumerable:!0,get:function(){return s.httpTransport}});const c=r(7418);Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return c.Mode}}),Object.defineProperty(t,"HTTP",{enumerable:!0,get:function(){return c.HTTP}}),Object.defineProperty(t,"Kafka",{enumerable:!0,get:function(){return c.Kafka}}),Object.defineProperty(t,"MQTT",{enumerable:!0,get:function(){return c.MQTT}}),Object.defineProperty(t,"MQTTMessageFactory",{enumerable:!0,get:function(){return c.MQTTMessageFactory}});const u=n(r(6583));t.CONSTANTS=u.default},1944:(e,t,r)=>{"use strict";var n=r(4877);e.exports=function(){return n()&&!!Symbol.toStringTag}},2033:e=>{"use strict";e.exports=Math.abs},2091:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},2205:(e,t,r)=>{var n=r(9427),o=r(4434),i=r(1389);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},2216:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const i=new Uint8Array(16);function a(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)}const s=[];for(let l=0;l<256;++l)s.push((l+256).toString(16).slice(1));function c(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}const u=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();const o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return c(o)}},2226:(e,t,r)=>{"use strict";var n=r(2473),o=r(1653),i=r(8312),a=r(2908);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new o("a function is required");return a(n,i,e)}},2332:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}},2406:(e,t,r)=>{var n=r(5581);e.exports=function(){this.__data__=new n,this.size=0}},2423:(e,t,r)=>{var n=r(8077);e.exports=function(e){return n(this,e).get(e)}},2431:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(4877);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},2473:(e,t,r)=>{"use strict";var n=r(1055);e.exports=Function.prototype.bind||n},2526:(e,t,r)=>{"use strict";function n(e,t){return r=e,n=(n=t)||{},new Promise((function(e,t){var o=new XMLHttpRequest,i=[],a=[],s={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var u in o.open(n.method||"get",r,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,r){i.push(t=t.toLowerCase()),a.push([t,r]),s[t]=s[t]?s[t]+","+r:r})),e(c())},o.onerror=t,o.withCredentials="include"==n.credentials,n.headers)o.setRequestHeader(u,n.headers[u]);o.send(n.body||null)}));var r,n}r.d(t,{l:()=>n})},2579:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=r??9007199254740991)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},2653:(e,t,r)=>{var n=r(2205),o=r(858),i=r(1637);e.exports=function(e,t,r,a,s,c){var u=1&r,l=e.length,f=t.length;if(l!=f&&!(u&&f>l))return!1;var d=c.get(e),p=c.get(t);if(d&&p)return d==t&&p==e;var g=-1,h=!0,y=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++g<l;){var E=e[g],_=t[g];if(a)var v=u?a(_,E,g,t,e,c):a(E,_,g,e,t,c);if(void 0!==v){if(v)continue;h=!1;break}if(y){if(!o(t,(function(e,t){if(!i(y,t)&&(E===e||s(E,e,r,a,c)))return y.push(t)}))){h=!1;break}}else if(E!==_&&!s(E,_,r,a,c)){h=!1;break}}return c.delete(e),c.delete(t),h}},2792:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2793:(e,t,r)=>{"use strict";var n=r(2473),o=r(7766),i=r(2908);e.exports=function(){return i(n,o,arguments)}},2908:(e,t,r)=>{"use strict";var n=r(2473),o=r(7766),i=r(8312),a=r(8939);e.exports=a||n.call(i,o)},3026:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parserByEncoding=t.DateParser=t.Base64Parser=t.parserByContentType=t.PassThroughParser=t.JSONParser=t.Parser=void 0;const o=n(r(5370)),i=n(r(6583)),a=r(5590),s=JSON;class Parser{}t.Parser=Parser;class JSONParser{constructor(e){this.decorator=e}parse(e){"string"==typeof e&&(/^[[|{|"]/.test(e)||(e=`"${e}"`)),this.decorator&&(e=this.decorator.parse(e)),(0,a.isDefinedOrThrow)(e,new a.ValidationError("null or undefined payload")),(0,a.isStringOrObjectOrThrow)(e,new a.ValidationError("invalid payload type, allowed are: string or object")),"true"==={}[i.default.USE_BIG_INT_ENV]?JSON=(0,o.default)({useNativeBigInt:!0}):JSON=s;return t=e,(0,a.isString)(t)?JSON.parse(t):t;var t}}t.JSONParser=JSONParser;class PassThroughParser extends Parser{parse(e){return e}}t.PassThroughParser=PassThroughParser;const c=new JSONParser;t.parserByContentType={[i.default.MIME_JSON]:c,[i.default.MIME_CE_JSON]:c,[i.default.DEFAULT_CONTENT_TYPE]:c,[i.default.DEFAULT_CE_CONTENT_TYPE]:c,[i.default.MIME_OCTET_STREAM]:new PassThroughParser};class Base64Parser{constructor(e){this.decorator=e}parse(e){let t=e;return this.decorator&&(t=this.decorator.parse(e)),Buffer.from(t,"base64").toString()}}t.Base64Parser=Base64Parser;t.DateParser=class DateParser extends Parser{parse(e){let t=new Date(Date.parse(e));return"Invalid Date"===t.toString()&&(t=new Date),t.toISOString()}},t.parserByEncoding={base64:{[i.default.MIME_CE_JSON]:new JSONParser(new Base64Parser),[i.default.MIME_OCTET_STREAM]:new PassThroughParser}}},3090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.emitterFor=void 0;const n=r(7418),o=r(4250),i={binding:n.HTTP,mode:n.Mode.BINARY};t.emitterFor=function(e,t=i){if(!e)throw new TypeError("A TransportFunction is required");const{binding:r,mode:o}={...i,...t};return function(t,i){switch(i=i||{},o){case n.Mode.BINARY:return e(r.binary(t),i);case n.Mode.STRUCTURED:return e(r.structured(t),i);default:throw new TypeError(`Unexpected transport mode: ${o}`)}}};class Emitter{static getInstance(){return Emitter.instance||(Emitter.instance=new o.EventEmitter),Emitter.instance}static on(e,t){Emitter.getInstance().on(e,t)}static async emitEvent(e,t=!0){t?await Promise.all(Emitter.getInstance().listeners("cloudevent").map((async t=>t(e)))):Emitter.getInstance().emit("cloudevent",e)}}t.Emitter=Emitter,Emitter.instance=void 0},3103:(e,t,r)=>{var n=r(4640);e.exports=function(e,t){";"!==(e=n.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,o=!1,i=0,a=0,s="";function c(){if(!o){var r=n.trim(e.slice(i,a)),c=r.indexOf(":");if(-1!==c){var u=n.trim(r.slice(0,c)),l=n.trim(r.slice(c+1));if(u){var f=t(i,s.length,u,l,r);f&&(s+=f+"; ")}}}i=a+1}for(;a<r;a++){var u=e[a];if("/"===u&&"*"===e[a+1]){var l=e.indexOf("*/",a+2);if(-1===l)break;i=(a=l+1)+1,o=!1}else"("===u?o=!0:")"===u?o=!1:";"===u?o||c():"\n"===u&&c()}return n.trim(s)}},3197:e=>{"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,t)}catch(p){p!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(e){try{var t=n.call(e);return i.test(t)}catch(r){return!1}},s=function(e){try{return!a(e)&&(n.call(e),!0)}catch(t){return!1}},c=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var d=document.all;c.call(d)===c.call(document.all)&&(f=function(e){if((l||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(r){}return!1})}e.exports=o?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{o(e,null,t)}catch(n){if(n!==r)return!1}return!a(e)&&s(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return s(e);if(a(e))return!1;var t=c.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},3229:(e,t,r)=>{"use strict";var n=r(3197),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var a,s;arguments.length>=3&&(a=r),s=e,"[object Array]"===o.call(s)?function(e,t,r){for(var n=0,o=e.length;n<o;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,a):"string"==typeof e?function(e,t,r){for(var n=0,o=e.length;n<o;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,a):function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,a)}},3433:(e,t,r)=>{var n=r(8268)(r(631),"Map");e.exports=n},3434:(e,t,r)=>{"use strict";r.d(t,{n:()=>n,z:()=>o});let n=function(e){return e.TEST="testing",e.DEVELOPMENT="development",e.STAGING="staging",e.PRODUCTION="production",e}({}),o=function(e){return e.SHOPPING_ASSISTANT="shopping-assistant",e}({})},3452:(e,t,r)=>{var n=r(89),o=r(978),i=r(9244);e.exports=function(e){return n(e,i,o)}},3469:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},3481:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.v03structuredParsers=t.v03binaryParsers=t.v03headerMap=t.v1structuredParsers=t.v1binaryParsers=t.v1headerMap=t.sanitize=t.headersFor=t.requiredHeaders=t.allowedContentTypes=void 0;const o=r(3026),i=r(6642),a=n(r(6583));function s(e,t=new o.PassThroughParser){return{name:e,parser:t}}t.allowedContentTypes=[a.default.DEFAULT_CONTENT_TYPE,a.default.MIME_JSON,a.default.MIME_OCTET_STREAM],t.requiredHeaders=[a.default.CE_HEADERS.ID,a.default.CE_HEADERS.SOURCE,a.default.CE_HEADERS.TYPE,a.default.CE_HEADERS.SPEC_VERSION],t.headersFor=function(e){const r={};let n;return n=e.specversion===i.V1?t.v1headerMap:t.v03headerMap,Object.getOwnPropertyNames(e).forEach((t=>{const o=e[t];if(void 0!==o){const e=n[t];e?r[e.name]=e.parser.parse(o):t!==a.default.DATA_ATTRIBUTE&&t!==`${a.default.DATA_ATTRIBUTE}_base64`&&(r[`${a.default.EXTENSIONS_PREFIX}${t}`]=o)}})),e.time&&(r[a.default.CE_HEADERS.TIME]=new Date(e.time).toISOString()),r},t.sanitize=function(e){const t={};return Array.from(Object.keys(e)).filter((t=>Object.hasOwnProperty.call(e,t))).forEach((r=>t[r.toLowerCase()]=e[r])),t},t.v1headerMap=Object.freeze({[a.default.CE_ATTRIBUTES.CONTENT_TYPE]:s(a.default.HEADER_CONTENT_TYPE),[a.default.CE_ATTRIBUTES.SUBJECT]:s(a.default.CE_HEADERS.SUBJECT),[a.default.CE_ATTRIBUTES.TYPE]:s(a.default.CE_HEADERS.TYPE),[a.default.CE_ATTRIBUTES.SPEC_VERSION]:s(a.default.CE_HEADERS.SPEC_VERSION),[a.default.CE_ATTRIBUTES.SOURCE]:s(a.default.CE_HEADERS.SOURCE),[a.default.CE_ATTRIBUTES.ID]:s(a.default.CE_HEADERS.ID),[a.default.CE_ATTRIBUTES.TIME]:s(a.default.CE_HEADERS.TIME),[a.default.STRUCTURED_ATTRS_1.DATA_SCHEMA]:s(a.default.BINARY_HEADERS_1.DATA_SCHEMA)}),t.v1binaryParsers=Object.freeze({[a.default.CE_HEADERS.TYPE]:s(a.default.CE_ATTRIBUTES.TYPE),[a.default.CE_HEADERS.SPEC_VERSION]:s(a.default.CE_ATTRIBUTES.SPEC_VERSION),[a.default.CE_HEADERS.SOURCE]:s(a.default.CE_ATTRIBUTES.SOURCE),[a.default.CE_HEADERS.ID]:s(a.default.CE_ATTRIBUTES.ID),[a.default.CE_HEADERS.TIME]:s(a.default.CE_ATTRIBUTES.TIME,new o.DateParser),[a.default.BINARY_HEADERS_1.DATA_SCHEMA]:s(a.default.STRUCTURED_ATTRS_1.DATA_SCHEMA),[a.default.CE_HEADERS.SUBJECT]:s(a.default.CE_ATTRIBUTES.SUBJECT),[a.default.CE_ATTRIBUTES.CONTENT_TYPE]:s(a.default.CE_ATTRIBUTES.CONTENT_TYPE),[a.default.HEADER_CONTENT_TYPE]:s(a.default.CE_ATTRIBUTES.CONTENT_TYPE)}),t.v1structuredParsers=Object.freeze({[a.default.CE_ATTRIBUTES.TYPE]:s(a.default.CE_ATTRIBUTES.TYPE),[a.default.CE_ATTRIBUTES.SPEC_VERSION]:s(a.default.CE_ATTRIBUTES.SPEC_VERSION),[a.default.CE_ATTRIBUTES.SOURCE]:s(a.default.CE_ATTRIBUTES.SOURCE),[a.default.CE_ATTRIBUTES.ID]:s(a.default.CE_ATTRIBUTES.ID),[a.default.CE_ATTRIBUTES.TIME]:s(a.default.CE_ATTRIBUTES.TIME,new o.DateParser),[a.default.STRUCTURED_ATTRS_1.DATA_SCHEMA]:s(a.default.STRUCTURED_ATTRS_1.DATA_SCHEMA),[a.default.CE_ATTRIBUTES.CONTENT_TYPE]:s(a.default.CE_ATTRIBUTES.CONTENT_TYPE),[a.default.CE_ATTRIBUTES.SUBJECT]:s(a.default.CE_ATTRIBUTES.SUBJECT),[a.default.CE_ATTRIBUTES.DATA]:s(a.default.CE_ATTRIBUTES.DATA),[a.default.STRUCTURED_ATTRS_1.DATA_BASE64]:s(a.default.STRUCTURED_ATTRS_1.DATA_BASE64)}),t.v03headerMap=Object.freeze({[a.default.CE_ATTRIBUTES.CONTENT_TYPE]:s(a.default.HEADER_CONTENT_TYPE),[a.default.CE_ATTRIBUTES.SUBJECT]:s(a.default.CE_HEADERS.SUBJECT),[a.default.CE_ATTRIBUTES.TYPE]:s(a.default.CE_HEADERS.TYPE),[a.default.CE_ATTRIBUTES.SPEC_VERSION]:s(a.default.CE_HEADERS.SPEC_VERSION),[a.default.CE_ATTRIBUTES.SOURCE]:s(a.default.CE_HEADERS.SOURCE),[a.default.CE_ATTRIBUTES.ID]:s(a.default.CE_HEADERS.ID),[a.default.CE_ATTRIBUTES.TIME]:s(a.default.CE_HEADERS.TIME),[a.default.STRUCTURED_ATTRS_03.CONTENT_ENCODING]:s(a.default.BINARY_HEADERS_03.CONTENT_ENCODING),[a.default.STRUCTURED_ATTRS_03.SCHEMA_URL]:s(a.default.BINARY_HEADERS_03.SCHEMA_URL)}),t.v03binaryParsers=Object.freeze({[a.default.CE_HEADERS.TYPE]:s(a.default.CE_ATTRIBUTES.TYPE),[a.default.CE_HEADERS.SPEC_VERSION]:s(a.default.CE_ATTRIBUTES.SPEC_VERSION),[a.default.CE_HEADERS.SOURCE]:s(a.default.CE_ATTRIBUTES.SOURCE),[a.default.CE_HEADERS.ID]:s(a.default.CE_ATTRIBUTES.ID),[a.default.CE_HEADERS.TIME]:s(a.default.CE_ATTRIBUTES.TIME,new o.DateParser),[a.default.BINARY_HEADERS_03.SCHEMA_URL]:s(a.default.STRUCTURED_ATTRS_03.SCHEMA_URL),[a.default.CE_HEADERS.SUBJECT]:s(a.default.CE_ATTRIBUTES.SUBJECT),[a.default.BINARY_HEADERS_03.CONTENT_ENCODING]:s(a.default.STRUCTURED_ATTRS_03.CONTENT_ENCODING),[a.default.HEADER_CONTENT_TYPE]:s(a.default.CE_ATTRIBUTES.CONTENT_TYPE)}),t.v03structuredParsers=Object.freeze({[a.default.CE_ATTRIBUTES.TYPE]:s(a.default.CE_ATTRIBUTES.TYPE),[a.default.CE_ATTRIBUTES.SPEC_VERSION]:s(a.default.CE_ATTRIBUTES.SPEC_VERSION),[a.default.CE_ATTRIBUTES.SOURCE]:s(a.default.CE_ATTRIBUTES.SOURCE),[a.default.CE_ATTRIBUTES.ID]:s(a.default.CE_ATTRIBUTES.ID),[a.default.CE_ATTRIBUTES.TIME]:s(a.default.CE_ATTRIBUTES.TIME,new o.DateParser),[a.default.STRUCTURED_ATTRS_03.SCHEMA_URL]:s(a.default.STRUCTURED_ATTRS_03.SCHEMA_URL),[a.default.STRUCTURED_ATTRS_03.CONTENT_ENCODING]:s(a.default.STRUCTURED_ATTRS_03.CONTENT_ENCODING),[a.default.CE_ATTRIBUTES.CONTENT_TYPE]:s(a.default.CE_ATTRIBUTES.CONTENT_TYPE),[a.default.CE_ATTRIBUTES.SUBJECT]:s(a.default.CE_ATTRIBUTES.SUBJECT),[a.default.CE_ATTRIBUTES.DATA]:s(a.default.CE_ATTRIBUTES.DATA)})},3614:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(3434);const o={env:n.n.PRODUCTION,legacyEventIngestionUrl:"https://e.9gti.com",eventIngestionUrl:"https://ei.9gti.com",chatEventIngestionUrl:"https://eic.5gtb.com",revenueAddonUrl:"https://gorgias-convert.com",sentrySamplingRate:.1,sentryDsn:"",sessionStorageSessionId:"gorgias.session-id",localStorageSeenCampaignIds:"gorgias.seen-campaigns-ids",localStorageCustomerId:"gorgias.customer-id",localStorageGuestId:"gorgias.guest-id",localStorageShopifySessionToken:"gorgias.shopify-session-token",localStorageAnonymousShopifySessionToken:"gorgias.anonymous-shopify-session-token",localStorageSalesHelpOnSearchState:"gorgias.sales-help-on-search-state",localStorageSalesHelpOnSearchOutput:"gorgias.sales-help-on-search-output",sessionStorageCampaignsEvaluation:"gorgias.assistant-evaluation",sessionStorageRenderedOnceSent:"gorgias.renderedOnceSent",globalBridgeApiVariable:"GorgiasBridge",aiAgentUrl:"https://aiagent.gorgias.help",aiAgentUrlV2:"https://s.6gsa.com"},i=(n.n.DEVELOPMENT,n.n.STAGING,{...o,sentryDsn:"",revenueAddonUrl:"https://testing.com",env:n.n.TEST}),a=(()=>{try{return o}catch{return i}})()},3669:e=>{"use strict";e.exports=Math.round},3853:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var n=r(7451),o=r(4269),i=r(2526),a=r(3614);const s=async(e,t)=>{const r=`${a.A.revenueAddonUrl}/assistant/discount-codes/reveal`,s={account_id:e,campaign_id:t},c={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)};try{const e=await(0,i.l)(r,c);if(!e.ok)throw new n.G("Error while revealing discount offer");return await e.json()}catch(u){throw o.A.error(u,{},{payload:s}),new n.G(`Error while revealing discount offer: ${u}`)}}},3854:(e,t,r)=>{"use strict";r.d(t,{ep:()=>_,cH:()=>v,YK:()=>c,Ww:()=>f,yf:()=>m,PK:()=>p});var n=r(3614),o=r(7738),i=r(7665);const a={whiteList:{...(0,i.getDefaultWhiteList)()}};function s(e){if(null!==e)switch(typeof e){case"string":e=(0,i.filterXSS)(e,a);break;case"object":if(e instanceof Array){const t=e.length;for(let r=0;r<t;r++)e[r]=s(e[r])}else for(const t in e)e[t]=s(e[t])}return e}function c(){return window?.ShopifyAnalytics?.meta?.page?.customerId?s(window.ShopifyAnalytics.meta.page.customerId.toString()):window?.meta?.page?.customerId?s(window.meta.page.customerId.toString()):window?._st?.cid?s(window._st.cid.toString()):s((0,o.Gq)(n.A.localStorageCustomerId))}var u=r(2216);function l(){const e=["00000000-0000-0000-4000-000000000000","00000000-0000-0000-5000-000000000000"];try{const t=window?.ShopifyAnalytics?.lib?.user().traits()?.uniqToken;if(t&&!e.includes(t))return s(t)}catch(t){console.error(t)}return s(function(){let e=(0,o.Gq)(n.A.localStorageGuestId);return e||(e=(0,u.A)(),(0,o.SO)(n.A.localStorageGuestId,e)),e}())}function f(){const e=l();return"string"==typeof e&&(e.startsWith('"')||e.endsWith('"'))?e.replace(/^"+|"+$/g,""):e}const d="gorgias:cart-updated";function p(e){document.addEventListener(d,e)}var g=r(4269),h=r(6518);let y=function(e){return e.CUSTOMER_ID="customer_id",e.GUEST_ID="gorgias.guest_id",e.SESSION_ID="gorgias.session_id",e}({});function E(){return[{key:y.GUEST_ID,value:f()},{key:y.SESSION_ID,value:(0,h.u0)()}]}function _(){try{return E()}catch(e){return e instanceof Error&&g.A.error(e),[]}}function v(){try{return E()}catch(e){return e instanceof Error&&g.A.error(e),[]}}var T=r(2526);function A(){return Boolean(window.Shopify&&!!window?.Shopify?.routes)}function m(){if(!A())return;const e={[y.CUSTOMER_ID]:c(),[y.GUEST_ID]:f(),[y.SESSION_ID]:(0,h.u0)()};try{(0,T.l)("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({attributes:e})})}catch(t){g.A.error(t,{},{attributes:e})}}},3887:(e,t,r)=>{var n=r(8176);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},3956:(e,t,r)=>{var n=r(8742),o=r(8384);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},3958:(e,t,r)=>{var n=r(631).Uint8Array;e.exports=n},4071:(e,t,r)=>{var n=r(8742),o=r(1616),i=r(8384),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},4128:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4235:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(r){}try{return e+""}catch(r){}}return""}},4250:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}h(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&h(e,"error",t,r)}(e,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,i,a,u;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):g(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function h(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,l=g(c,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4269:(e,t,r)=>{"use strict";var n;r.d(t,{A:()=>h}),function(e){e.fatal="fatal",e.error="error",e.warning="warning",e.log="log",e.info="info",e.debug="debug",e.critical="critical"}(n||(n={}));const o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s="?",c=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function u(e){return(e&&e.message||"No error message").split("\n").filter((e=>!!e))[0]}function l(e){try{const t=function(e){if(!e.stack)return null;const t=[],r=e.stack.split("\n");let n,c;for(let u=0;u<r.length;++u){if(n=o.exec(r[u]))c={filename:n[2]&&0===n[2].indexOf("address at ")?n[2].substr(11):n[2],function:n[1]||s,lineno:n[3]?+n[3]:null,colno:n[4]?+n[4]:null};else if(n=a.exec(r[u]))c={filename:n[2],function:n[1]||s,lineno:+n[3],colno:n[4]?+n[4]:null};else{if(!(n=i.exec(r[u])))continue;0!==u||n[5]||void 0===e.columnNumber||(t[0].column=e.columnNumber+1),c={filename:n[3],function:n[1]||s,lineno:n[4]?+n[4]:null,colno:n[5]?+n[5]:null}}!c.function&&c.lineno&&(c.function=s),t.push(c)}return t.length?{value:u(e),type:e.name,stacktrace:{frames:t.reverse()}}:null}(e);if(t)return t}catch(t){}return{value:u(e),type:e&&e.name,stacktrace:{frames:[]}}}class MicroSentryClient{constructor(e){if(e&&e.dsn){const t=c.exec(e.dsn),r=t?t.slice(1):[],n=r[5].split("/"),o=n.slice(0,-1).join("/");this.apiUrl=r[0]+"://"+r[3]+(r[4]?":"+r[4]:"")+(o?"/"+o:"")+"/api/"+n.pop()+"/store/",this.authHeader="Sentry sentry_version=7,sentry_key="+r[1]+(r[2]?",sentry_secret="+r[2]:"")}this.environment=e&&e.environment}prepare(e){return{...this.getRequestBlank(),exception:{values:[l(e)]}}}report(e){this.send(this.prepare(e))}send(e){this.apiUrl&&e&&this.createRequest(e)}createRequest(e){const t=new XMLHttpRequest;t.open("POST",this.apiUrl,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Sentry-Auth",this.authHeader||""),t.send(JSON.stringify(e))}getRequestBlank(){return{platform:"javascript",sdk:{name:"micro-sentry.javascript.core",version:"0.0.0"},timestamp:Date.now()/1e3,environment:this.environment}}}function f(e,t){return"[object RegExp]"===Object.prototype.toString.call(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t)}function d(){return window}class BrowserMicroSentryClient extends MicroSentryClient{constructor(e,t=d()){super(e),this.options=e,this.window=t,this.destroyed=!1,this._state={};const{plugins:r=[],beforeSend:n=e=>e,beforeBreadcrumb:o=e=>e,blacklistUrls:i=[],ignoreErrors:a=[],release:s}=this.options||{};this.plugins=r.map((e=>new e(this))),this.beforeSend=n,this.beforeBreadcrumb=o,this.blacklistUrls=i,this.ignoreErrors=a,this.release=s}get state(){return this._state}clearState(){this._state={}}setTags(e){return this.setKeyState("tags",{...e}),this}setTag(e,t){return this.extendState({tags:{[e]:t}}),this}setExtra(e,t){return this.extendState({extra:{[e]:t}}),this}setExtras(e){return this.setKeyState("extra",{...e}),this}setUser(e){return this.setKeyState("user",{...e}),this}clone(){const e=new BrowserMicroSentryClient({...this.options,plugins:[]});return e.extendState(this.state),e}withScope(e){const t=this.clone();e(t),t.destroy(),this.setBreadcrumbs(void 0)}addBreadcrumb(e){this.extendState({breadcrumbs:[{timestamp:Date.now()/1e3,...this.beforeBreadcrumb(e)}]})}setBreadcrumbs(e){this.setKeyState("breadcrumbs",e)}captureMessage(e,t){this.send({...this.getRequestBlank(),message:e,level:t})}destroy(){this.destroyed=!0,this.plugins.forEach((e=>{e.destroy&&e.destroy()}))}isIgnoredError(e){return!!this.ignoreErrors.length&&this.getPossibleEventMessages(e).some((e=>this.ignoreErrors.some((t=>f(e,t)))))}getRequestBlank(){return{request:{url:this.window.location.toString(),headers:{"User-Agent":this.window.navigator.userAgent}},...super.getRequestBlank(),sdk:{name:"micro-sentry.javascript.browser",version:"0.0.0"},...this.state}}send(e){this.destroyed||this.isDeniedUrl(e)||this.isIgnoredError(e)||(super.send(this.beforeSend({release:this.release,...e})),this.setBreadcrumbs(void 0))}getPossibleEventMessages(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:r=""}=e.exception.values&&e.exception.values[0]||{};return[`${r}`,`${t}: ${r}`]}catch(t){return[]}return[]}isDeniedUrl(e){if(!this.blacklistUrls.length)return!1;const t=this.getEventFilterUrl(e);return!!t&&this.blacklistUrls.some((e=>f(t,e)))}getEventFilterUrl(e){try{if(e.exception){const t=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return t&&t[t.length-1].filename||null}return null}catch(t){return null}}extendState(e){this._state=Object.keys(e).reduce(((t,r)=>{const n=this._state[r],o=Array.isArray(n)?n:null,i=e[r],a=Array.isArray(i)?i:null;return{...t,[r]:o||a?[...o||[],...a||[]]:{..."string"!=typeof n?n:{},..."string"!=typeof i?i:{}}}}),this._state)}setKeyState(e,t){this._state[e]=t}}var p=r(3434),g=r(3614);const h=new class Logger{_initialized=!1;init=()=>{!this._initialized&&g.A.sentryDsn&&(this._client=new BrowserMicroSentryClient({dsn:g.A.sentryDsn,environment:g.A.env}),this._initialized=!0)};warn=e=>{console.warn(e)};info=console.info;debug=(...e)=>{g.A.env!==p.n.PRODUCTION&&console.log("[CONVERT-BUNDLE]",...e)};error=(e,t,r)=>{if(console.error(e),!(Math.random()>g.A.sentrySamplingRate)){for(const e in t)this._client?.setTag(e,String(t[e]));for(const e in r)this._client?.setExtra(e,String(r[e]));this._client?.report(new Error(e.message||JSON.stringify(e)))}}}},4278:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},4434:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},4442:function(e,t,r){var n;!function(){"use strict";var o,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,s=Math.floor,c="[BigNumber Error] ",u=c+"Number primitive has more than 15 significant digits: ",l=1e14,f=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,h=1e9;function y(e){var t=0|e;return e>0||e===t?t:t-1}function E(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=f-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function _(e,t){var r,n,o=e.c,i=t.c,a=e.s,s=t.s,c=e.e,u=t.e;if(!a||!s)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=c==u,!o||!i)return n?0:!o^r?1:-1;if(!n)return c>u^r?1:-1;for(s=(c=o.length)<(u=i.length)?c:u,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^r?1:-1;return c==u?0:c>u^r?1:-1}function v(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(c+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function T(e){var t=e.c.length-1;return y(e.e/f)==t&&e.c[t]%2!=0}function A(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function m(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}o=function e(t){var r,n,o,S,b,C,O,w,I,R,D=z.prototype={constructor:z,toString:null,valueOf:null},N=new z(1),P=20,U=4,j=-7,x=21,M=-1e7,L=1e7,k=!1,B=1,G=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function z(e,t){var r,a,c,l,p,g,h,y,E=this;if(!(E instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber)return E.s=e.s,void(!e.c||e.e>L?E.c=E.e=null:e.e<M?E.c=[E.e=0]:(E.e=e.e,E.c=e.c.slice()));if((g="number"==typeof e)&&0*e==0){if(E.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,p=e;p>=10;p/=10,l++);return void(l>L?E.c=E.e=null:(E.e=l,E.c=[e]))}y=String(e)}else{if(!i.test(y=String(e)))return o(E,y,g);E.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(l=y.indexOf("."))>-1&&(y=y.replace(".","")),(p=y.search(/e/i))>0?(l<0&&(l=p),l+=+y.slice(p+1),y=y.substring(0,p)):l<0&&(l=y.length)}else{if(v(t,2,F.length,"Base"),10==t&&V)return q(E=new z(e),P+E.e+1,U);if(y=String(e),g="number"==typeof e){if(0*e!=0)return o(E,y,g,t);if(E.s=1/e<0?(y=y.slice(1),-1):1,z.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(u+e)}else E.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(r=F.slice(0,t),l=p=0,h=y.length;p<h;p++)if(r.indexOf(a=y.charAt(p))<0){if("."==a){if(p>l){l=h;continue}}else if(!c&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){c=!0,p=-1,l=0;continue}return o(E,String(e),g,t)}g=!1,(l=(y=n(y,t,10,E.s)).indexOf("."))>-1?y=y.replace(".",""):l=y.length}for(p=0;48===y.charCodeAt(p);p++);for(h=y.length;48===y.charCodeAt(--h););if(y=y.slice(p,++h)){if(h-=p,g&&z.DEBUG&&h>15&&(e>d||e!==s(e)))throw Error(u+E.s*e);if((l=l-p-1)>L)E.c=E.e=null;else if(l<M)E.c=[E.e=0];else{if(E.e=l,E.c=[],p=(l+1)%f,l<0&&(p+=f),p<h){for(p&&E.c.push(+y.slice(0,p)),h-=f;p<h;)E.c.push(+y.slice(p,p+=f));p=f-(y=y.slice(p)).length}else p-=h;for(;p--;y+="0");E.c.push(+y)}}else E.c=[E.e=0]}function $(e,t,r,n){var o,i,a,s,c;if(null==r?r=U:v(r,0,8),!e.c)return e.toString();if(o=e.c[0],a=e.e,null==t)c=E(e.c),c=1==n||2==n&&(a<=j||a>=x)?A(c,a):m(c,a,"0");else if(i=(e=q(new z(e),t,r)).e,s=(c=E(e.c)).length,1==n||2==n&&(t<=i||i<=j)){for(;s<t;c+="0",s++);c=A(c,i)}else if(t-=a,c=m(c,i,"0"),i+1>s){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-s)>0)for(i+1==s&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function W(e,t){for(var r,n,o=1,i=new z(e[0]);o<e.length;o++)(!(n=new z(e[o])).s||(r=_(i,n))===t||0===r&&i.s===t)&&(i=n);return i}function K(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*f-1)>L?e.c=e.e=null:r<M?e.c=[e.e=0]:(e.e=r,e.c=t),e}function q(e,t,r,n){var o,i,c,u,d,g,h,y=e.c,E=p;if(y){e:{for(o=1,u=y[0];u>=10;u/=10,o++);if((i=t-o)<0)i+=f,c=t,d=y[g=0],h=s(d/E[o-c-1]%10);else if((g=a((i+1)/f))>=y.length){if(!n)break e;for(;y.length<=g;y.push(0));d=h=0,o=1,c=(i%=f)-f+1}else{for(d=u=y[g],o=1;u>=10;u/=10,o++);h=(c=(i%=f)-f+o)<0?0:s(d/E[o-c-1]%10)}if(n=n||t<0||null!=y[g+1]||(c<0?d:d%E[o-c-1]),n=r<4?(h||n)&&(0==r||r==(e.s<0?3:2)):h>5||5==h&&(4==r||n||6==r&&(i>0?c>0?d/E[o-c]:0:y[g-1])%10&1||r==(e.s<0?8:7)),t<1||!y[0])return y.length=0,n?(t-=e.e+1,y[0]=E[(f-t%f)%f],e.e=-t||0):y[0]=e.e=0,e;if(0==i?(y.length=g,u=1,g--):(y.length=g+1,u=E[f-i],y[g]=c>0?s(d/E[o-c]%E[c])*u:0),n)for(;;){if(0==g){for(i=1,c=y[0];c>=10;c/=10,i++);for(c=y[0]+=u,u=1;c>=10;c/=10,u++);i!=u&&(e.e++,y[0]==l&&(y[0]=1));break}if(y[g]+=u,y[g]!=l)break;y[g--]=0,u=1}for(i=y.length;0===y[--i];y.pop());}e.e>L?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function Y(e){var t,r=e.e;return null===r?e.toString():(t=E(e.c),t=r<=j||r>=x?A(t,r):m(t,r,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(c+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(r=e[t],0,h,t),P=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(r=e[t],0,8,t),U=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(v(r[0],-h,0,t),v(r[1],0,h,t),j=r[0],x=r[1]):(v(r,-h,h,t),j=-(x=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)v(r[0],-h,-1,t),v(r[1],1,h,t),M=r[0],L=r[1];else{if(v(r,-h,h,t),!r)throw Error(c+t+" cannot be zero: "+r);M=-(L=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(c+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw k=!r,Error(c+"crypto unavailable");k=r}else k=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(r=e[t],0,9,t),B=r),e.hasOwnProperty(t="POW_PRECISION")&&(v(r=e[t],0,h,t),G=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(c+t+" not an object: "+r);H=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(c+t+" invalid: "+r);V="0123456789"==r.slice(0,10),F=r}}return{DECIMAL_PLACES:P,ROUNDING_MODE:U,EXPONENTIAL_AT:[j,x],RANGE:[M,L],CRYPTO:k,MODULO_MODE:B,POW_PRECISION:G,FORMAT:H,ALPHABET:F}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,r,n=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-h&&o<=h&&o===s(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%f)<1&&(t+=f),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=l||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(c+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return W(arguments,-1)},z.minimum=z.min=function(){return W(arguments,1)},z.random=(S=9007199254740992,b=Math.random()*S&2097151?function(){return s(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,i,u=0,l=[],d=new z(N);if(null==e?e=P:v(e,0,h),o=a(e/f),k)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)(i=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(l.push(i%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw k=!1,Error(c+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)(i=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(l.push(i%1e14),u+=7);u=o/7}if(!k)for(;u<o;)(i=b())<9e15&&(l[u++]=i%1e14);for(o=l[--u],e%=f,o&&e&&(i=p[f-e],l[u]=s(o/i)*i);0===l[u];l.pop(),u--);if(u<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=f);for(u=1,i=l[0];i>=10;i/=10,u++);u<f&&(n-=f-u)}return d.e=n,d.c=l,d}),z.sum=function(){for(var e=1,t=arguments,r=new z(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var o,i,a=[0],s=0,c=e.length;s<c;){for(i=a.length;i--;a[i]*=t);for(a[0]+=n.indexOf(e.charAt(s++)),o=0;o<a.length;o++)a[o]>r-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/r|0,a[o]%=r)}return a.reverse()}return function(n,o,i,a,s){var c,u,l,f,d,p,g,h,y=n.indexOf("."),_=P,v=U;for(y>=0&&(f=G,G=0,n=n.replace(".",""),p=(h=new z(o)).pow(n.length-y),G=f,h.c=t(m(E(p.c),p.e,"0"),10,i,e),h.e=h.c.length),l=f=(g=t(n,o,i,s?(c=F,e):(c=e,F))).length;0==g[--f];g.pop());if(!g[0])return c.charAt(0);if(y<0?--l:(p.c=g,p.e=l,p.s=a,g=(p=r(p,h,_,v,i)).c,d=p.r,l=p.e),y=g[u=l+_+1],f=i/2,d=d||u<0||null!=g[u+1],d=v<4?(null!=y||d)&&(0==v||v==(p.s<0?3:2)):y>f||y==f&&(4==v||d||6==v&&1&g[u-1]||v==(p.s<0?8:7)),u<1||!g[0])n=d?m(c.charAt(1),-_,c.charAt(0)):c.charAt(0);else{if(g.length=u,d)for(--i;++g[--u]>i;)g[u]=0,u||(++l,g=[1].concat(g));for(f=g.length;!g[--f];);for(y=0,n="";y<=f;n+=c.charAt(g[y++]));n=m(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,o,i,a,s=0,c=e.length,u=t%g,l=t/g|0;for(e=e.slice();c--;)s=((o=u*(i=e[c]%g)+(n=l*i+(a=e[c]/g|0)*u)%g*g+s)/r|0)+(n/g|0)+l*a,e[c]=o%r;return s&&(e=[s].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,i,a,c){var u,d,p,g,h,E,_,v,T,A,m,S,b,C,O,w,I,R=n.s==o.s?1:-1,D=n.c,N=o.c;if(!(D&&D[0]&&N&&N[0]))return new z(n.s&&o.s&&(D?!N||D[0]!=N[0]:N)?D&&0==D[0]||!N?0*R:R/0:NaN);for(T=(v=new z(R)).c=[],R=i+(d=n.e-o.e)+1,c||(c=l,d=y(n.e/f)-y(o.e/f),R=R/f|0),p=0;N[p]==(D[p]||0);p++);if(N[p]>(D[p]||0)&&d--,R<0)T.push(1),g=!0;else{for(C=D.length,w=N.length,p=0,R+=2,(h=s(c/(N[0]+1)))>1&&(N=e(N,h,c),D=e(D,h,c),w=N.length,C=D.length),b=w,m=(A=D.slice(0,w)).length;m<w;A[m++]=0);I=N.slice(),I=[0].concat(I),O=N[0],N[1]>=c/2&&O++;do{if(h=0,(u=t(N,A,w,m))<0){if(S=A[0],w!=m&&(S=S*c+(A[1]||0)),(h=s(S/O))>1)for(h>=c&&(h=c-1),_=(E=e(N,h,c)).length,m=A.length;1==t(E,A,_,m);)h--,r(E,w<_?I:N,_,c),_=E.length,u=1;else 0==h&&(u=h=1),_=(E=N.slice()).length;if(_<m&&(E=[0].concat(E)),r(A,E,m,c),m=A.length,-1==u)for(;t(N,A,w,m)<1;)h++,r(A,w<m?I:N,m,c),m=A.length}else 0===u&&(h++,A=[0]);T[p++]=h,A[0]?A[m++]=D[b]||0:(A=[D[b]],m=1)}while((b++<C||null!=A[0])&&R--);g=null!=A[0],T[0]||T.splice(0,1)}if(c==l){for(p=1,R=T[0];R>=10;R/=10,p++);q(v,i+(v.e=p+d*f-1)+1,a,g)}else v.e=d,v.r=+g;return v}}(),C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,w=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,r,n){var o,i=r?t:t.replace(R,"");if(I.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(C,(function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?e:t})),n&&(o=n,i=i.replace(O,"$1").replace(w,"0.$1")),t!=i))return new z(i,o);if(z.DEBUG)throw Error(c+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},D.absoluteValue=D.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},D.comparedTo=function(e,t){return _(this,new z(e,t))},D.decimalPlaces=D.dp=function(e,t){var r,n,o,i=this;if(null!=e)return v(e,0,h),null==t?t=U:v(t,0,8),q(new z(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=((o=r.length-1)-y(this.e/f))*f,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},D.dividedBy=D.div=function(e,t){return r(this,new z(e,t),P,U)},D.dividedToIntegerBy=D.idiv=function(e,t){return r(this,new z(e,t),0,1)},D.exponentiatedBy=D.pow=function(e,t){var r,n,o,i,u,l,d,p,g=this;if((e=new z(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new z(t)),u=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return p=new z(Math.pow(+Y(g),u?e.s*(2-T(e)):+Y(e))),t?p.mod(t):p;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(n=!l&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||u&&g.c[1]>=24e7:g.c[0]<8e13||u&&g.c[0]<=9999975e7)))return i=g.s<0&&T(e)?-0:0,g.e>-1&&(i=1/i),new z(l?1/i:i);G&&(i=a(G/f+2))}for(u?(r=new z(.5),l&&(e.s=1),d=T(e)):d=(o=Math.abs(+Y(e)))%2,p=new z(N);;){if(d){if(!(p=p.times(g)).c)break;i?p.c.length>i&&(p.c.length=i):n&&(p=p.mod(t))}if(o){if(0===(o=s(o/2)))break;d=o%2}else if(q(e=e.times(r),e.e+1,1),e.e>14)d=T(e);else{if(0===(o=+Y(e)))break;d=o%2}g=g.times(g),i?g.c&&g.c.length>i&&(g.c.length=i):n&&(g=g.mod(t))}return n?p:(l&&(p=N.div(p)),t?p.mod(t):i?q(p,G,U,undefined):p)},D.integerValue=function(e){var t=new z(this);return null==e?e=U:v(e,0,8),q(t,t.e+1,e)},D.isEqualTo=D.eq=function(e,t){return 0===_(this,new z(e,t))},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(e,t){return _(this,new z(e,t))>0},D.isGreaterThanOrEqualTo=D.gte=function(e,t){return 1===(t=_(this,new z(e,t)))||0===t},D.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},D.isLessThan=D.lt=function(e,t){return _(this,new z(e,t))<0},D.isLessThanOrEqualTo=D.lte=function(e,t){return-1===(t=_(this,new z(e,t)))||0===t},D.isNaN=function(){return!this.s},D.isNegative=function(){return this.s<0},D.isPositive=function(){return this.s>0},D.isZero=function(){return!!this.c&&0==this.c[0]},D.minus=function(e,t){var r,n,o,i,a=this,s=a.s;if(t=(e=new z(e,t)).s,!s||!t)return new z(NaN);if(s!=t)return e.s=-t,a.plus(e);var c=a.e/f,u=e.e/f,d=a.c,p=e.c;if(!c||!u){if(!d||!p)return d?(e.s=-t,e):new z(p?a:NaN);if(!d[0]||!p[0])return p[0]?(e.s=-t,e):new z(d[0]?a:3==U?-0:0)}if(c=y(c),u=y(u),d=d.slice(),s=c-u){for((i=s<0)?(s=-s,o=d):(u=c,o=p),o.reverse(),t=s;t--;o.push(0));o.reverse()}else for(n=(i=(s=d.length)<(t=p.length))?s:t,s=t=0;t<n;t++)if(d[t]!=p[t]){i=d[t]<p[t];break}if(i&&(o=d,d=p,p=o,e.s=-e.s),(t=(n=p.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=l-1;n>s;){if(d[--n]<p[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=l}d[n]-=p[n]}for(;0==d[0];d.splice(0,1),--u);return d[0]?K(e,d,u):(e.s=3==U?-1:1,e.c=[e.e=0],e)},D.modulo=D.mod=function(e,t){var n,o,i=this;return e=new z(e,t),!i.c||!e.s||e.c&&!e.c[0]?new z(NaN):!e.c||i.c&&!i.c[0]?new z(i):(9==B?(o=e.s,e.s=1,n=r(i,e,0,3),e.s=o,n.s*=o):n=r(i,e,0,B),(e=i.minus(n.times(e))).c[0]||1!=B||(e.s=i.s),e)},D.multipliedBy=D.times=function(e,t){var r,n,o,i,a,s,c,u,d,p,h,E,_,v,T,A=this,m=A.c,S=(e=new z(e,t)).c;if(!(m&&S&&m[0]&&S[0]))return!A.s||!e.s||m&&!m[0]&&!S||S&&!S[0]&&!m?e.c=e.e=e.s=null:(e.s*=A.s,m&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=y(A.e/f)+y(e.e/f),e.s*=A.s,(c=m.length)<(p=S.length)&&(_=m,m=S,S=_,o=c,c=p,p=o),o=c+p,_=[];o--;_.push(0));for(v=l,T=g,o=p;--o>=0;){for(r=0,h=S[o]%T,E=S[o]/T|0,i=o+(a=c);i>o;)r=((u=h*(u=m[--a]%T)+(s=E*u+(d=m[a]/T|0)*h)%T*T+_[i]+r)/v|0)+(s/T|0)+E*d,_[i--]=u%v;_[i]=r}return r?++n:_.splice(0,1),K(e,_,n)},D.negated=function(){var e=new z(this);return e.s=-e.s||null,e},D.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new z(e,t)).s,!o||!t)return new z(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/f,a=e.e/f,s=n.c,c=e.c;if(!i||!a){if(!s||!c)return new z(o/0);if(!s[0]||!c[0])return c[0]?e:new z(s[0]?n:0*o)}if(i=y(i),a=y(a),s=s.slice(),o=i-a){for(o>0?(a=i,r=c):(o=-o,r=s),r.reverse();o--;r.push(0));r.reverse()}for((o=s.length)-(t=c.length)<0&&(r=c,c=s,s=r,t=o),o=0;t;)o=(s[--t]=s[t]+c[t]+o)/l|0,s[t]=l===s[t]?0:s[t]%l;return o&&(s=[o].concat(s),++a),K(e,s,a)},D.precision=D.sd=function(e,t){var r,n,o,i=this;if(null!=e&&e!==!!e)return v(e,1,h),null==t?t=U:v(t,0,8),q(new z(i),e,t);if(!(r=i.c))return null;if(n=(o=r.length-1)*f+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},D.shiftedBy=function(e){return v(e,-9007199254740991,d),this.times("1e"+e)},D.squareRoot=D.sqrt=function(){var e,t,n,o,i,a=this,s=a.c,c=a.s,u=a.e,l=P+4,f=new z("0.5");if(1!==c||!s||!s[0])return new z(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(c=Math.sqrt(+Y(a)))||c==1/0?(((t=E(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=y((u+1)/2)-(u<0||u%2),n=new z(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new z(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(i=n,n=f.times(i.plus(r(a,i,l,1))),E(i.c).slice(0,c)===(t=E(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(q(n,n.e+P+2,1),e=!n.times(n).eq(a));break}if(!o&&(q(i,i.e+P+2,0),i.times(i).eq(a))){n=i;break}l+=4,c+=4,o=1}return q(n,n.e+P+1,U,e)},D.toExponential=function(e,t){return null!=e&&(v(e,0,h),e++),$(this,e,t,1)},D.toFixed=function(e,t){return null!=e&&(v(e,0,h),e=e+this.e+1),$(this,e,t)},D.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=H;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,a=n.split("."),s=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",f=a[0],d=a[1],p=o.s<0,g=p?f.slice(1):f,h=g.length;if(u&&(i=s,s=u,u=i,h-=i),s>0&&h>0){for(i=h%s||s,f=g.substr(0,i);i<h;i+=s)f+=l+g.substr(i,s);u>0&&(f+=l+g.slice(i)),p&&(f="-"+f)}n=d?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):f}return(r.prefix||"")+n+(r.suffix||"")},D.toFraction=function(e){var t,n,o,i,a,s,u,l,d,g,h,y,_=this,v=_.c;if(null!=e&&(!(u=new z(e)).isInteger()&&(u.c||1!==u.s)||u.lt(N)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Y(u));if(!v)return new z(_);for(t=new z(N),d=n=new z(N),o=l=new z(N),y=E(v),a=t.e=y.length-_.e-1,t.c[0]=p[(s=a%f)<0?f+s:s],e=!e||u.comparedTo(t)>0?a>0?t:d:u,s=L,L=1/0,u=new z(y),l.c[0]=0;g=r(u,t,0,1),1!=(i=n.plus(g.times(o))).comparedTo(e);)n=o,o=i,d=l.plus(g.times(i=d)),l=i,t=u.minus(g.times(i=t)),u=i;return i=r(e.minus(n),o,0,1),l=l.plus(i.times(d)),n=n.plus(i.times(o)),l.s=d.s=_.s,h=r(d,o,a*=2,U).minus(_).abs().comparedTo(r(l,n,a,U).minus(_).abs())<1?[d,o]:[l,n],L=s,h},D.toNumber=function(){return+Y(this)},D.toPrecision=function(e,t){return null!=e&&v(e,1,h),$(this,e,t,2)},D.toString=function(e){var t,r=this,o=r.s,i=r.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=j||i>=x?A(E(r.c),i):m(E(r.c),i,"0"):10===e&&V?t=m(E((r=q(new z(r),P+i+1,U)).c),r.e,"0"):(v(e,2,F.length,"Base"),t=n(m(E(r.c),i,"0"),10,e,o,!0)),o<0&&r.c[0]&&(t="-"+t)),t},D.valueOf=D.toJSON=function(){return Y(this)},D._isBigNumber=!0,null!=t&&z.set(t),z}(),o.default=o.BigNumber=o,void 0===(n=(function(){return o}).call(t,r,t,e))||(e.exports=n)}()},4558:(e,t,r)=>{var n=r(9511),o=r(1445);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,n)t[i]=n[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},4640:e=>{e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},4678:(e,t,r)=>{var n=r(161),o=r(5544),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},4827:(e,t,r)=>{var n=r(8176),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},4853:(e,t,r)=>{"use strict";var n=r(9039),o="undefined"==typeof globalThis?global:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}},4877:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4883:e=>{e.exports=function(e){return this.__data__.get(e)}},5058:(e,t,r)=>{var n=r(8268)(r(631),"DataView");e.exports=n},5085:(e,t,r)=>{var n=r(5451),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(c){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},5191:(e,t,r)=>{"use strict";var n,o=r(2226),i=r(1686);try{n=[].__proto__===Array.prototype}catch(u){if(!u||"object"!=typeof u||!("code"in u)||"ERR_PROTO_ACCESS"!==u.code)throw u}var a=!!n&&i&&i(Object.prototype,"__proto__"),s=Object,c=s.getPrototypeOf;e.exports=a&&"function"==typeof a.get?o([a.get]):"function"==typeof c&&function(e){return c(null==e?e:s(e))}},5207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTTP=void 0;const n=r(5277),o=r(1926),i=r(3481),a=r(5590),s=r(3026);function c(e){const t=(0,i.sanitize)(e.headers),r=function(e){const t=e[o.CONSTANTS.HEADER_CONTENT_TYPE];if(t){if(t.startsWith(o.CONSTANTS.MIME_CE_BATCH))return o.Mode.BATCH;if(t.startsWith(o.CONSTANTS.MIME_CE))return o.Mode.STRUCTURED}if(e[o.CONSTANTS.CE_HEADERS.ID])return o.Mode.BINARY;throw new a.ValidationError("no cloud event detected")}(t),n=function(e,t,r){if(e!==o.Mode.BINARY)return"string"==typeof r?JSON.parse(r).specversion:r.specversion;{const e=t[o.CONSTANTS.CE_HEADERS.SPEC_VERSION];if(e)return e}return o.V1}(r,t,e.body);switch(r){case o.Mode.BINARY:return function(e,t){const r={...e.headers};let n=e.body;if(!r)throw new a.ValidationError("headers is null or undefined");const c=(0,i.sanitize)(r),u={},l=t===o.V03?i.v03binaryParsers:i.v1binaryParsers;for(const o in l)if(c[o]){const e=l[o];u[e.name]=e.parser.parse(c[o]),delete c[o],delete r[o]}for(const i in r)i.startsWith(o.CONSTANTS.EXTENSIONS_PREFIX)&&(u[i.substring(o.CONSTANTS.EXTENSIONS_PREFIX.length)]=r[i]);const f=s.parserByContentType[u.datacontenttype];f&&n&&(n=f.parse(n));u.datacontenttype===o.CONSTANTS.MIME_JSON&&u.datacontentencoding===o.CONSTANTS.ENCODING_BASE64&&delete u.datacontentencoding;return new o.CloudEvent({...u,data:n},!1)}(e,n);case o.Mode.STRUCTURED:return function(e,t){const r=e.body,n=e.headers;if(!r)throw new a.ValidationError("payload is null or undefined");if(!n)throw new a.ValidationError("headers is null or undefined");(0,a.isStringOrObjectOrThrow)(r,new a.ValidationError("payload must be an object or a string"));const c=(0,i.sanitize)(n),u=c[o.CONSTANTS.HEADER_CONTENT_TYPE],l=u?s.parserByContentType[u]:new s.JSONParser;if(!l)throw new a.ValidationError(`invalid content type ${c[o.CONSTANTS.HEADER_CONTENT_TYPE]}`);const f={...l.parse(r)},d={},p=t===o.V03?i.v03structuredParsers:i.v1structuredParsers;for(const o in p){const e=f[o];if(e){const t=p[o];d[t.name]=t.parser.parse(e)}delete f[o]}for(const o in f)d[o]=f[o];if(d.data_base64||d.datacontentencoding===o.CONSTANTS.ENCODING_BASE64){const e=d.data_base64||d.data;d.data=new Uint32Array(Buffer.from(e,"base64")),delete d.data_base64,delete d.datacontentencoding}return new o.CloudEvent(d,!1)}(e,n);case o.Mode.BATCH:return function(e){const t=[],r=JSON.parse(e.body);return r.forEach((e=>{t.push(new o.CloudEvent(e))})),t}(e);default:throw new a.ValidationError("Unknown Message mode")}}t.HTTP={binary:function(e){const t={...{[o.CONSTANTS.HEADER_CONTENT_TYPE]:o.CONSTANTS.DEFAULT_CONTENT_TYPE},...(0,i.headersFor)(e)};let r=e.data;return"object"!=typeof e.data||n.types.isTypedArray(e.data)||(r=JSON.stringify(e.data)),{headers:t,body:r}},structured:function(e){return e.data_base64&&(e=e.cloneWith({data:void 0})),{headers:{[o.CONSTANTS.HEADER_CONTENT_TYPE]:o.CONSTANTS.DEFAULT_CE_CONTENT_TYPE},body:e.toString()}},toEvent:c,isEvent:function(e){try{return c(e),!0}catch(t){return!1}}}},5277:(e,t,r)=>{var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])y(s)||!A(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(e,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var i={},a=/^$/;if({}.NODE_DEBUG){var s={}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function c(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),f(n,e,n.depth)}function u(e,t){var r=c.styles[t];return r?"\x1b["+c.colors[r][0]+"m"+e+"\x1b["+c.colors[r][1]+"m":e}function l(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&b(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return _(o)||(o=f(e,o,n)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(_(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(E(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),S(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(r);if(0===a.length){if(b(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(T(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(m(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return d(r)}var u,l="",A=!1,C=["{","}"];(g(r)&&(A=!0,C=["[","]"]),b(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return T(r)&&(l=" "+RegExp.prototype.toString.call(r)),m(r)&&(l=" "+Date.prototype.toUTCString.call(r)),S(r)&&(l=" "+d(r)),0!==a.length||A&&0!=r.length?n<0?T(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=A?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)I(t,String(a))?i.push(p(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))})),i}(e,r,n,s,a):a.map((function(t){return p(e,r,n,s,t,A)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,l,C)):C[0]+l+C[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),I(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=y(r)?f(e,c.value,null):f(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function y(e){return null===e}function E(e){return"number"==typeof e}function _(e){return"string"==typeof e}function v(e){return void 0===e}function T(e){return A(e)&&"[object RegExp]"===C(e)}function A(e){return"object"==typeof e&&null!==e}function m(e){return A(e)&&"[object Date]"===C(e)}function S(e){return A(e)&&("[object Error]"===C(e)||e instanceof Error)}function b(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!i[e])if(a.test(e)){var r=process.pid;i[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else i[e]=function(){};return i[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(9612),t.isArray=g,t.isBoolean=h,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=E,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=T,t.types.isRegExp=T,t.isObject=A,t.isDate=m,t.types.isDate=m,t.isError=S,t.types.isNativeError=S,t.isFunction=b,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(2091);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;console.log("%s - %s",(e=new Date,r=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":"),[e.getDate(),w[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(778),t._extend=function(e,t){if(!t||!A(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(a){r(a)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=R,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};e.apply(this,t).then((function(e){process.nextTick(i.bind(null,null,e))}),(function(e){process.nextTick(D.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},5282:(e,t,r)=>{var n=r(7351),o=r(5581),i=r(3433);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},5325:(e,t,r)=>{var n=r(9424),o=r(7546),i=r(5943),a=r(4235),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?d:s).test(a(e))}},5363:(e,t,r)=>{var n=r(4442),o=e.exports;!function(){"use strict";var e,t,r,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function c(o,i){var a,u,l,f,d,p=e,g=i[o],h=null!=g&&(g instanceof n||n.isBigNumber(g));switch(g&&"object"==typeof g&&"function"==typeof g.toJSON&&(g=g.toJSON(o)),"function"==typeof r&&(g=r.call(i,o,g)),typeof g){case"string":return h?g:s(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":case"bigint":return String(g);case"object":if(!g)return"null";if(e+=t,d=[],"[object Array]"===Object.prototype.toString.apply(g)){for(f=g.length,a=0;a<f;a+=1)d[a]=c(a,g)||"null";return l=0===d.length?"[]":e?"[\n"+e+d.join(",\n"+e)+"\n"+p+"]":"["+d.join(",")+"]",e=p,l}if(r&&"object"==typeof r)for(f=r.length,a=0;a<f;a+=1)"string"==typeof r[a]&&(l=c(u=r[a],g))&&d.push(s(u)+(e?": ":":")+l);else Object.keys(g).forEach((function(t){var r=c(t,g);r&&d.push(s(t)+(e?": ":":")+r)}));return l=0===d.length?"{}":e?"{\n"+e+d.join(",\n"+e)+"\n"+p+"}":"{"+d.join(",")+"}",e=p,l}}"function"!=typeof o.stringify&&(o.stringify=function(n,o,i){var a;if(e="",t="","number"==typeof i)for(a=0;a<i;a+=1)t+=" ";else"string"==typeof i&&(t=i);if(r=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("JSON.stringify");return c("",{"":n})})}()},5370:(e,t,r)=>{var n=r(5363).stringify,o=r(5578);e.exports=function(e){return{parse:o(e),stringify:n}},e.exports.parse=o(),e.exports.stringify=n},5451:(e,t,r)=>{var n=r(631).Symbol;e.exports=n},5510:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},5513:(e,t,r)=>{"use strict";var n=r(7503);e.exports=function(e){return!!n(e)}},5537:e=>{"use strict";e.exports=Math.min},5544:(e,t,r)=>{var n=r(8109)(Object.keys,Object);e.exports=n},5578:(e,t,r)=>{var n=null;const o=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,i=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;e.exports=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=e){if(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0),t.alwaysParseAsBig=!0===e.alwaysParseAsBig&&e.alwaysParseAsBig,t.useNativeBigInt=!0===e.useNativeBigInt&&e.useNativeBigInt,void 0!==e.constructorAction){if("error"!==e.constructorAction&&"ignore"!==e.constructorAction&&"preserve"!==e.constructorAction)throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`);t.constructorAction=e.constructorAction}if(void 0!==e.protoAction){if("error"!==e.protoAction&&"ignore"!==e.protoAction&&"preserve"!==e.protoAction)throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`);t.protoAction=e.protoAction}}var a,s,c,u,l={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},f=function(e){throw{name:"SyntaxError",message:e,at:a,text:c}},d=function(e){return e&&e!==s&&f("Expected '"+e+"' instead of '"+s+"'"),s=c.charAt(a),a+=1,s},p=function(){var e,o="";for("-"===s&&(o="-",d("-"));s>="0"&&s<="9";)o+=s,d();if("."===s)for(o+=".";d()&&s>="0"&&s<="9";)o+=s;if("e"===s||"E"===s)for(o+=s,d(),"-"!==s&&"+"!==s||(o+=s,d());s>="0"&&s<="9";)o+=s,d();if(e=+o,isFinite(e))return null==n&&(n=r(4442)),o.length>15?t.storeAsString?o:t.useNativeBigInt?BigInt(o):new n(o):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(e):new n(e):e;f("Bad number")},g=function(){var e,t,r,n="";if('"'===s)for(var o=a;d();){if('"'===s)return a-1>o&&(n+=c.substring(o,a-1)),d(),n;if("\\"===s){if(a-1>o&&(n+=c.substring(o,a-1)),d(),"u"===s){for(r=0,t=0;t<4&&(e=parseInt(d(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof l[s])break;n+=l[s]}o=a}}f("Bad string")},h=function(){for(;s&&s<=" ";)d()};return u=function(){switch(h(),s){case"{":return function(){var e,r=Object.create(null);if("{"===s){if(d("{"),h(),"}"===s)return d("}"),r;for(;s;){if(e=g(),h(),d(":"),!0===t.strict&&Object.hasOwnProperty.call(r,e)&&f('Duplicate key "'+e+'"'),!0===o.test(e)?"error"===t.protoAction?f("Object contains forbidden prototype property"):"ignore"===t.protoAction?u():r[e]=u():!0===i.test(e)?"error"===t.constructorAction?f("Object contains forbidden constructor property"):"ignore"===t.constructorAction?u():r[e]=u():r[e]=u(),h(),"}"===s)return d("}"),r;d(","),h()}}f("Bad object")}();case"[":return function(){var e=[];if("["===s){if(d("["),h(),"]"===s)return d("]"),e;for(;s;){if(e.push(u()),h(),"]"===s)return d("]"),e;d(","),h()}}f("Bad array")}();case'"':return g();case"-":return p();default:return s>="0"&&s<="9"?p():function(){switch(s){case"t":return d("t"),d("r"),d("u"),d("e"),!0;case"f":return d("f"),d("a"),d("l"),d("s"),d("e"),!1;case"n":return d("n"),d("u"),d("l"),d("l"),null}f("Unexpected '"+s+"'")}()}},function(e,t){var r;return c=e+"",a=0,s=" ",r=u(),h(),s&&f("Syntax error"),"function"==typeof t?function e(r,n){var o,i=r[n];return i&&"object"==typeof i&&Object.keys(i).forEach((function(t){void 0!==(o=e(i,t))?i[t]=o:delete i[t]})),t.call(r,n,i)}({"":r},""):r}}},5581:(e,t,r)=>{var n=r(9936),o=r(966),i=r(1569),a=r(8925),s=r(6949);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},5590:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidType=t.asData=t.isJsonContentType=t.clone=t.asBase64=t.base64AsBinary=t.asBuffer=t.isBuffer=t.isBase64=t.equalsOrThrow=t.isStringOrObjectOrThrow=t.isDefinedOrThrow=t.isStringOrThrow=t.isBinary=t.isDate=t.isInteger=t.isBoolean=t.isDefined=t.isObject=t.isString=t.ValidationError=void 0;const r=function(){try{return globalThis}catch(e){try{return self}catch(e){return global}}}();class ValidationError extends TypeError{constructor(e,t){super(t instanceof Array?t?.reduce(((e,t)=>e.concat(`\n  ${t instanceof Object?JSON.stringify(t):t}`)),e):e),this.errors=t||[]}}t.ValidationError=ValidationError;t.isString=e=>"string"==typeof e;t.isObject=e=>"object"==typeof e;t.isDefined=e=>null!=e;t.isBoolean=e=>"boolean"==typeof e;t.isInteger=e=>Number.isInteger(e);t.isDate=e=>e instanceof Date;t.isBinary=e=>ArrayBuffer.isView(e);t.isStringOrThrow=(e,r)=>!!(0,t.isString)(e)||(()=>{throw r})();t.isDefinedOrThrow=(e,r)=>!!(0,t.isDefined)(e)||(()=>{throw r})();t.isStringOrObjectOrThrow=(e,r)=>!!(0,t.isString)(e)||(!!(0,t.isObject)(e)||(()=>{throw r})());t.equalsOrThrow=(e,t,r)=>e===t||(()=>{throw r})();t.isBase64=e=>Buffer.from(e,"base64").toString("base64")===e;t.isBuffer=e=>e instanceof Buffer;t.asBuffer=e=>(0,t.isBinary)(e)?Buffer.from(e):(0,t.isBuffer)(e)?e:(()=>{throw new TypeError("is not buffer or a valid binary")})();t.base64AsBinary=e=>{return Uint8Array.from((t=e,r.atob?r.atob(t):Buffer.from(t,"base64").toString("binary")),(e=>e.charCodeAt(0)));var t};t.asBase64=e=>(0,t.asBuffer)(e).toString("base64");t.clone=e=>JSON.parse(JSON.stringify(e));t.isJsonContentType=e=>e&&e.match(/(json)/i);t.asData=(e,r)=>{const n=(0,t.isString)(e)&&!(0,t.isBase64)(e)&&(0,t.isJsonContentType)(r)?JSON.parse(e):e;return(0,t.isBinary)(n)?(0,t.asBase64)(n):n};t.isValidType=e=>(0,t.isBoolean)(e)||(0,t.isInteger)(e)||(0,t.isString)(e)||(0,t.isDate)(e)||(0,t.isBinary)(e)||(0,t.isObject)(e)},5624:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5838:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},5943:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6012:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},6021:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(3853),o=r(3854);const i={subscribeToCartUpdated:o.PK,createCartAttributes:o.ep,createCheckoutAttributes:o.cH,revealDiscountOffer:n.X}},6153:(e,t,r)=>{"use strict";var n=r(6507),o=r(6665),i=r(5191);e.exports=n?function(e){return n(e)}:o?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return o(e)}:i?function(e){return i(e)}:null},6179:(e,t,r)=>{var n=r(8077);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},6210:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},6300:(e,t,r)=>{var n=r(7298),o=r(8384);e.exports=function e(t,r,i,a,s){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,a,e,s))}},6409:(e,t,r)=>{"use strict";var n,o=r(320),i=r(7809),a=r(939),s=r(8332),c=r(1592),u=r(254),l=r(1653),f=r(315),d=r(2033),p=r(1283),g=r(291),h=r(5537),y=r(1323),E=r(3669),_=r(8036),v=Function,T=function(e){try{return v('"use strict"; return ('+e+").constructor;")()}catch(t){}},A=r(1686),m=r(1691),S=function(){throw new l},b=A?function(){try{return S}catch(e){try{return A(arguments,"callee").get}catch(t){return S}}}():S,C=r(2431)(),O=r(6153),w=r(6665),I=r(6507),R=r(7766),D=r(8312),N={},P="undefined"!=typeof Uint8Array&&O?O(Uint8Array):n,U={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":C&&O?O([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":N,"%AsyncGenerator%":N,"%AsyncGeneratorFunction%":N,"%AsyncIteratorPrototype%":N,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":a,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":N,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&O?O(O([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&C&&O?O((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":o,"%Object.getOwnPropertyDescriptor%":A,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":s,"%ReferenceError%":c,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&C&&O?O((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&O?O(""[Symbol.iterator]()):n,"%Symbol%":C?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":b,"%TypedArray%":P,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":f,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":R,"%Object.defineProperty%":m,"%Object.getPrototypeOf%":w,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":g,"%Math.min%":h,"%Math.pow%":y,"%Math.round%":E,"%Math.sign%":_,"%Reflect.getPrototypeOf%":I};if(O)try{null.error}catch(K){var j=O(O(K));U["%Error.prototype%"]=j}var x=function e(t){var r;if("%AsyncFunction%"===t)r=T("async function () {}");else if("%GeneratorFunction%"===t)r=T("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=T("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&O&&(r=O(o.prototype))}return U[t]=r,r},M={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=r(2473),k=r(8187),B=L.call(D,Array.prototype.concat),G=L.call(R,Array.prototype.splice),H=L.call(D,String.prototype.replace),F=L.call(D,String.prototype.slice),V=L.call(D,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,W=function(e,t){var r,n=e;if(k(M,n)&&(n="%"+(r=M[n])[0]+"%"),k(U,n)){var o=U[n];if(o===N&&(o=x(n)),void 0===o&&!t)throw new l("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new l('"allowMissing" argument must be a boolean');if(null===V(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=F(e,0,1),r=F(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return H(e,z,(function(e,t,r,o){n[n.length]=r?H(o,$,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=W("%"+n+"%",t),i=o.name,a=o.value,s=!1,c=o.alias;c&&(n=c[0],G(r,B([0,1],c)));for(var f=1,d=!0;f<r.length;f+=1){var p=r[f],g=F(p,0,1),h=F(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===h||"'"===h||"`"===h)&&g!==h)throw new u("property names with quotes must have matching quotes");if("constructor"!==p&&d||(s=!0),k(U,i="%"+(n+="."+p)+"%"))a=U[i];else if(null!=a){if(!(p in a)){if(!t)throw new l("base intrinsic for "+e+" exists, but the property is not available.");return}if(A&&f+1>=r.length){var y=A(a,p);a=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:a[p]}else d=k(a,p),a=a[p];d&&!s&&(U[i]=a)}}return a}},6452:(e,t,r)=>{var n=r(8077);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6507:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},6518:(e,t,r)=>{"use strict";r.d(t,{rq:()=>s,l:()=>c,u0:()=>i,Wq:()=>a,RM:()=>u});var n=r(2216),o=r(3614);function i(){let e=window.sessionStorage.getItem(o.A.sessionStorageSessionId);return e||(e=(0,n.A)(),window.sessionStorage.setItem(o.A.sessionStorageSessionId,e)),e}function a(e){window.sessionStorage.setItem(o.A.sessionStorageCampaignsEvaluation,JSON.stringify(e))}function s(){const e=window.sessionStorage.getItem(o.A.sessionStorageCampaignsEvaluation);return e?JSON.parse(e):{}}function c(){return window.sessionStorage.getItem(o.A.sessionStorageRenderedOnceSent)}function u(){window.sessionStorage.setItem(o.A.sessionStorageRenderedOnceSent,"true")}},6583:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Object.freeze({CHARSET_DEFAULT:"utf-8",EXTENSIONS_PREFIX:"ce-",ENCODING_BASE64:"base64",DATA_ATTRIBUTE:"data",MIME_JSON:"application/json",MIME_OCTET_STREAM:"application/octet-stream",MIME_CE:"application/cloudevents",MIME_CE_JSON:"application/cloudevents+json",MIME_CE_BATCH:"application/cloudevents-batch+json",HEADER_CONTENT_TYPE:"content-type",DEFAULT_CONTENT_TYPE:"application/json; charset=utf-8",DEFAULT_CE_CONTENT_TYPE:"application/cloudevents+json; charset=utf-8",CE_HEADERS:{TYPE:"ce-type",SPEC_VERSION:"ce-specversion",SOURCE:"ce-source",ID:"ce-id",TIME:"ce-time",SUBJECT:"ce-subject"},CE_ATTRIBUTES:{ID:"id",TYPE:"type",SOURCE:"source",SPEC_VERSION:"specversion",TIME:"time",CONTENT_TYPE:"datacontenttype",SUBJECT:"subject",DATA:"data"},BINARY_HEADERS_03:{SCHEMA_URL:"ce-schemaurl",CONTENT_ENCODING:"ce-datacontentencoding"},STRUCTURED_ATTRS_03:{SCHEMA_URL:"schemaurl",CONTENT_ENCODING:"datacontentencoding"},BINARY_HEADERS_1:{DATA_SCHEMA:"ce-dataschema"},STRUCTURED_ATTRS_1:{DATA_SCHEMA:"dataschema",DATA_BASE64:"data_base64"},USE_BIG_INT_ENV:"CE_USE_BIG_INT"});t.default=r},6617:e=>{e.exports=function(){return!1}},6642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloudEvent=t.V03=t.V1=void 0;const n=r(8055),o=r(1926),i=r(7330),a=r(5590);t.V1="1.0",t.V03="0.3";class CloudEvent{constructor(e,r=!0){const o={...e};if(this.id=o.id||(0,n.v4)(),delete o.id,this.time=o.time||(new Date).toISOString(),delete o.time,this.type=o.type,delete o.type,this.source=o.source,delete o.source,this.specversion=o.specversion||t.V1,delete o.specversion,this.datacontenttype=o.datacontenttype,delete o.datacontenttype,this.subject=o.subject,delete o.subject,this.datacontentencoding=o.datacontentencoding,delete o.datacontentencoding,this.dataschema=o.dataschema,delete o.dataschema,this.data_base64=o.data_base64,this.data_base64&&(this.data=(0,a.base64AsBinary)(this.data_base64)),delete o.data_base64,this.schemaurl=o.schemaurl,delete o.schemaurl,(0,a.isBinary)(o.data)&&(this.data_base64=(0,a.asBase64)(o.data)),this.data=void 0!==o.data?o.data:this.data,delete o.data,this.specversion===t.V1&&this.schemaurl)throw new TypeError("cannot set schemaurl on version 1.0 event");if(this.specversion===t.V03&&this.dataschema)throw new TypeError("cannot set dataschema on version 0.3 event");for(const[t,n]of Object.entries(o)){if(!t.match(/^[a-z0-9]+$/)&&r)throw new a.ValidationError(`invalid extension name: ${t}\nCloudEvents attribute names MUST consist of lower-case letters ('a' to 'z')\nor digits ('0' to '9') from the ASCII character set. Attribute names SHOULD\nbe descriptive and terse and SHOULD NOT exceed 20 characters in length.`);if(!(0,a.isValidType)(n)&&r)throw new a.ValidationError(`invalid extension value: ${n}\nExtension values must conform to the CloudEvent type system.\nSee: https://github.com/cloudevents/spec/blob/v1.0/spec.md#type-system`);this[t]=n}r&&this.validate(),Object.freeze(this)}toJSON(){const e={...this};return e.time=new Date(this.time).toISOString(),e.data_base64&&e.data&&delete e.data,e}toString(){return JSON.stringify(this)}validate(){try{return(0,i.validateCloudEvent)(this)}catch(e){throw e instanceof a.ValidationError?e:new a.ValidationError("invalid payload",[e])}}async emit(e=!0){return await o.Emitter.emitEvent(this,e),this}cloneWith(e,t=!0){return CloudEvent.cloneWith(this,e,t)}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}static cloneWith(e,t,r=!0){return new CloudEvent(Object.assign({},e,t),r)}}t.CloudEvent=CloudEvent},6665:(e,t,r)=>{"use strict";var n=r(320);e.exports=n.getPrototypeOf||null},6676:(e,t,r)=>{var n=r(4558).FilterCSS,o=r(4558).getDefaultWhiteList,i=r(1401);function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var s=new n;function c(e){return e.replace(u,"&lt;").replace(l,"&gt;")}var u=/</g,l=/>/g,f=/"/g,d=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,g=/&colon;?/gim,h=/&newline;?/gim,y=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,E=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_=/u\s*r\s*l\s*\(.*/gi;function v(e){return e.replace(f,"&quot;")}function T(e){return e.replace(d,'"')}function A(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function m(e){return e.replace(g,":").replace(h," ")}function S(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return i.trim(t)}function b(e){return e=S(e=m(e=A(e=T(e))))}function C(e){return e=c(e=v(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=a,t.onTag=function(e,t,r){},t.onIgnoreTag=function(e,t,r){},t.onTagAttr=function(e,t,r){},t.onIgnoreTagAttr=function(e,t,r){},t.safeAttrValue=function(e,t,r,n){if(r=b(r),"href"===t||"src"===t){if("#"===(r=i.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(y.lastIndex=0,y.test(r))return""}else if("style"===t){if(E.lastIndex=0,E.test(r))return"";if(_.lastIndex=0,_.test(r)&&(y.lastIndex=0,y.test(r)))return"";!1!==n&&(r=(n=n||s).process(r))}return r=C(r)},t.escapeHtml=c,t.escapeQuote=v,t.unescapeQuote=T,t.escapeHtmlEntities=A,t.escapeDangerHtml5Entities=m,t.clearNonPrintableCharacter=S,t.friendlyAttrValue=b,t.escapeAttrValue=C,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],o=!1;return{onIgnoreTag:function(a,s,c){if(function(t){return!!r||-1!==i.indexOf(e,t)}(a)){if(c.isClosing){var u="[/removed]",l=c.position+10;return n.push([!1!==o?o:c.position,l]),o=!1,u}return o||(o=c.position),"[removed]"}return t(a,s,c)},remove:function(e){var t="",r=0;return i.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},t.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var o=e.indexOf("--\x3e",n);if(-1===o)break;r=o+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=s,t.getDefaultCSSWhiteList=o},6722:(e,t,r)=>{var n=r(3956),o=r(8384),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},6749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headersFor=t.HEADER_MAP=t.KAFKA_CE_HEADERS=void 0;const n=r(1926);t.KAFKA_CE_HEADERS=Object.freeze({ID:"ce_id",TYPE:"ce_type",SOURCE:"ce_source",SPEC_VERSION:"ce_specversion",TIME:"ce_time",SUBJECT:"ce_subject",DATACONTENTTYPE:"ce_datacontenttype",DATASCHEMA:"ce_dataschema"}),t.HEADER_MAP={[t.KAFKA_CE_HEADERS.ID]:"id",[t.KAFKA_CE_HEADERS.TYPE]:"type",[t.KAFKA_CE_HEADERS.SOURCE]:"source",[t.KAFKA_CE_HEADERS.SPEC_VERSION]:"specversion",[t.KAFKA_CE_HEADERS.TIME]:"time",[t.KAFKA_CE_HEADERS.SUBJECT]:"subject",[t.KAFKA_CE_HEADERS.DATACONTENTTYPE]:"datacontenttype",[t.KAFKA_CE_HEADERS.DATASCHEMA]:"dataschema"},t.headersFor=function(e){const t={};return Object.getOwnPropertyNames(e).forEach((r=>{r!=n.CONSTANTS.CE_ATTRIBUTES.DATA&&r!=n.CONSTANTS.STRUCTURED_ATTRS_1.DATA_BASE64&&(t[`ce_${r}`]=e[r])})),t}},6887:(e,t,r)=>{var n=r(8176),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},6949:(e,t,r)=>{var n=r(331);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},7086:(e,t,r)=>{"use strict";var n=r(1944)(),o=r(9272)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},a=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"callee"in e&&"[object Function]"===o(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a},7143:(e,t,r)=>{var n=r(5581),o=r(3433),i=r(9427);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},7227:e=>{e.exports=function(){return[]}},7241:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.httpTransport=void 0;const o=n(r(9864)),i=n(r(9018));t.httpTransport=function(e){const t=new URL(e);let r;if("https:"===t.protocol)r=i.default;else{if("http:"!==t.protocol)throw new TypeError(`unsupported protocol ${t.protocol}`);r=o.default}return function(e,n){return new Promise(((o,i)=>{n={...n};const a={method:"POST",headers:{...e.headers,...n.headers}};try{const n={body:"",headers:{}},s=r.request(t,a,(e=>{e.setEncoding("utf-8"),n.headers=e.headers,e.on("data",(e=>n.body+=e)),e.on("end",(()=>{o(n)}))}));s.on("error",i),s.write(e.body),s.end()}catch(s){i(s)}}))}}},7298:(e,t,r)=>{var n=r(9167),o=r(2653),i=r(8616),a=r(9331),s=r(1403),c=r(8324),u=r(9818),l=r(9289),f="[object Arguments]",d="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,h,y,E){var _=c(e),v=c(t),T=_?d:s(e),A=v?d:s(t),m=(T=T==f?p:T)==p,S=(A=A==f?p:A)==p,b=T==A;if(b&&u(e)){if(!u(t))return!1;_=!0,m=!1}if(b&&!m)return E||(E=new n),_||l(e)?o(e,t,r,h,y,E):i(e,t,T,r,h,y,E);if(!(1&r)){var C=m&&g.call(e,"__wrapped__"),O=S&&g.call(t,"__wrapped__");if(C||O){var w=C?e.value():e,I=O?t.value():t;return E||(E=new n),y(w,I,r,h,E)}}return!!b&&(E||(E=new n),a(e,t,r,h,y,E))}},7330:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateCloudEvent=void 0;const o=r(5590),i=r(6642),a=n(r(967));t.validateCloudEvent=function(e){if(e.specversion!==i.V1)return!1;if(!(0,a.default)(e))throw new o.ValidationError("invalid payload",a.default.errors);const t=/^[a-z0-9]+$/;for(const r in e)if(!1===t.test(r)&&"data_base64"!==r)throw new o.ValidationError(`invalid attribute name: "${r}"`);return!0}},7345:(e,t,r)=>{var n=r(8268)(r(631),"WeakMap");e.exports=n},7351:(e,t,r)=>{var n=r(1566),o=r(2792),i=r(4827),a=r(6887),s=r(3887);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},7418:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,o(r(5207),t),o(r(219),t),o(r(9753),t),function(e){e.BINARY="binary",e.STRUCTURED="structured",e.BATCH="batch"}(t.Mode||(t.Mode={}))},7451:(e,t,r)=>{"use strict";r.d(t,{G:()=>RequestError});class RevenueError extends Error{constructor(e){super(e),this.name="RevenueError"}}class RequestError extends RevenueError{constructor(e){super(e),this.name="RequestError"}}},7483:(e,t,r)=>{var n=r(8077);e.exports=function(e){return n(this,e).has(e)}},7503:(e,t,r)=>{"use strict";var n=r(3229),o=r(4853),i=r(7770),a=r(9272),s=r(1686),c=r(6153),u=a("Object.prototype.toString"),l=r(1944)(),f="undefined"==typeof globalThis?global:globalThis,d=o(),p=a("String.prototype.slice"),g=a("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},h={__proto__:null};n(d,l&&s&&c?function(e){var t=new f[e];if(Symbol.toStringTag in t&&c){var r=c(t),n=s(r,Symbol.toStringTag);if(!n&&r){var o=c(r);n=s(o,Symbol.toStringTag)}h["$"+e]=i(n.get)}}:function(e){var t=new f[e],r=t.slice||t.set;r&&(h["$"+e]=i(r))});e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l){var t=p(u(e),8,-1);return g(d,t)>-1?t:"Object"===t&&function(e){var t=!1;return n(h,(function(r,n){if(!t)try{r(e),t=p(n,1)}catch(o){}})),t}(e)}return s?function(e){var t=!1;return n(h,(function(r,n){if(!t)try{"$"+r(e)===n&&(t=p(n,1))}catch(o){}})),t}(e):null}},7546:(e,t,r)=>{var n,o=r(1707),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},7658:(e,t,r)=>{var n=r(6300);e.exports=function(e,t){return n(e,t)}},7665:(e,t,r)=>{var n=r(6676),o=r(1102),i=r(8235);function a(e,t){return new i(t).process(e)}(t=e.exports=a).filterXSS=a,t.FilterXSS=i,function(){for(var e in n)t[e]=n[e];for(var r in o)t[r]=o[r]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},7738:(e,t,r)=>{"use strict";function n(e){return localStorage.getItem(e)}function o(e){localStorage.removeItem(e)}function i(e,t){localStorage.setItem(e,JSON.stringify(t))}r.d(t,{Gq:()=>n,Ai:()=>o,SO:()=>i})},7766:e=>{"use strict";e.exports=Function.prototype.apply},7770:(e,t,r)=>{"use strict";var n=r(1546),o=r(1691),i=r(2226),a=r(2793);e.exports=function(e){var t=i(arguments),r=e.length-(arguments.length-1);return n(t,1+(r>0?r:0),!0)},o?o(e.exports,"apply",{value:a}):e.exports.apply=a},7791:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},7809:e=>{"use strict";e.exports=Error},7824:(e,t,r)=>{var n=r(9424),o=r(1616);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},7856:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},8036:(e,t,r)=>{"use strict";var n=r(6012);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},8055:(e,t,r)=>{"use strict";var n;r.r(t),r.d(t,{NIL:()=>P,parse:()=>y,stringify:()=>l,v1:()=>h,v3:()=>O,v4:()=>w,v5:()=>N,validate:()=>s,version:()=>U});var o=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const s=function(e){return"string"==typeof e&&a.test(e)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var f,d,p=0,g=0;const h=function(e,t,r){var n=t&&r||0,o=t||new Array(16),a=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:d;if(null==a||null==s){var c=e.random||(e.rng||i)();null==a&&(a=f=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=d=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:g+1,y=u-p+(h-g)/1e4;if(y<0&&void 0===e.clockseq&&(s=s+1&16383),(y<0||u>p)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=u,g=h,d=s;var E=(1e4*(268435455&(u+=122192928e5))+h)%4294967296;o[n++]=E>>>24&255,o[n++]=E>>>16&255,o[n++]=E>>>8&255,o[n++]=255&E;var _=u/4294967296*1e4&268435455;o[n++]=_>>>8&255,o[n++]=255&_,o[n++]=_>>>24&15|16,o[n++]=_>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var v=0;v<6;++v)o[n+v]=a[v];return t||l(o)};const y=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function E(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return l(a)}try{n.name=e}catch(o){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function _(e){return 14+(e+64>>>9<<4)+1}function v(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function T(e,t,r,n,o,i){return v((a=v(v(t,e),v(n,i)))<<(s=o)|a>>>32-s,r);var a,s}function A(e,t,r,n,o,i,a){return T(t&r|~t&n,e,t,o,i,a)}function m(e,t,r,n,o,i,a){return T(t&n|r&~n,e,t,o,i,a)}function S(e,t,r,n,o,i,a){return T(t^r^n,e,t,o,i,a)}function b(e,t,r,n,o,i,a){return T(r^(t|~n),e,t,o,i,a)}const C=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[_(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=r,c=n,u=o,l=i;r=A(r,n,o,i,e[a],7,-680876936),i=A(i,r,n,o,e[a+1],12,-389564586),o=A(o,i,r,n,e[a+2],17,606105819),n=A(n,o,i,r,e[a+3],22,-1044525330),r=A(r,n,o,i,e[a+4],7,-176418897),i=A(i,r,n,o,e[a+5],12,1200080426),o=A(o,i,r,n,e[a+6],17,-1473231341),n=A(n,o,i,r,e[a+7],22,-45705983),r=A(r,n,o,i,e[a+8],7,1770035416),i=A(i,r,n,o,e[a+9],12,-1958414417),o=A(o,i,r,n,e[a+10],17,-42063),n=A(n,o,i,r,e[a+11],22,-1990404162),r=A(r,n,o,i,e[a+12],7,1804603682),i=A(i,r,n,o,e[a+13],12,-40341101),o=A(o,i,r,n,e[a+14],17,-1502002290),r=m(r,n=A(n,o,i,r,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=m(i,r,n,o,e[a+6],9,-1069501632),o=m(o,i,r,n,e[a+11],14,643717713),n=m(n,o,i,r,e[a],20,-373897302),r=m(r,n,o,i,e[a+5],5,-701558691),i=m(i,r,n,o,e[a+10],9,38016083),o=m(o,i,r,n,e[a+15],14,-660478335),n=m(n,o,i,r,e[a+4],20,-405537848),r=m(r,n,o,i,e[a+9],5,568446438),i=m(i,r,n,o,e[a+14],9,-1019803690),o=m(o,i,r,n,e[a+3],14,-187363961),n=m(n,o,i,r,e[a+8],20,1163531501),r=m(r,n,o,i,e[a+13],5,-1444681467),i=m(i,r,n,o,e[a+2],9,-51403784),o=m(o,i,r,n,e[a+7],14,1735328473),r=S(r,n=m(n,o,i,r,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=S(i,r,n,o,e[a+8],11,-2022574463),o=S(o,i,r,n,e[a+11],16,1839030562),n=S(n,o,i,r,e[a+14],23,-35309556),r=S(r,n,o,i,e[a+1],4,-1530992060),i=S(i,r,n,o,e[a+4],11,1272893353),o=S(o,i,r,n,e[a+7],16,-155497632),n=S(n,o,i,r,e[a+10],23,-1094730640),r=S(r,n,o,i,e[a+13],4,681279174),i=S(i,r,n,o,e[a],11,-358537222),o=S(o,i,r,n,e[a+3],16,-722521979),n=S(n,o,i,r,e[a+6],23,76029189),r=S(r,n,o,i,e[a+9],4,-640364487),i=S(i,r,n,o,e[a+12],11,-421815835),o=S(o,i,r,n,e[a+15],16,530742520),r=b(r,n=S(n,o,i,r,e[a+2],23,-995338651),o,i,e[a],6,-198630844),i=b(i,r,n,o,e[a+7],10,1126891415),o=b(o,i,r,n,e[a+14],15,-1416354905),n=b(n,o,i,r,e[a+5],21,-57434055),r=b(r,n,o,i,e[a+12],6,1700485571),i=b(i,r,n,o,e[a+3],10,-1894986606),o=b(o,i,r,n,e[a+10],15,-1051523),n=b(n,o,i,r,e[a+1],21,-2054922799),r=b(r,n,o,i,e[a+8],6,1873313359),i=b(i,r,n,o,e[a+15],10,-30611744),o=b(o,i,r,n,e[a+6],15,-1560198380),n=b(n,o,i,r,e[a+13],21,1309151649),r=b(r,n,o,i,e[a+4],6,-145523070),i=b(i,r,n,o,e[a+11],10,-1120210379),o=b(o,i,r,n,e[a+2],15,718787259),n=b(n,o,i,r,e[a+9],21,-343485551),r=v(r,s),n=v(n,c),o=v(o,u),i=v(i,l)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(_(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};const O=E("v3",48,C);const w=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return l(n)};function I(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function R(e,t){return e<<t|e>>>32-t}const D=function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=s[f][p];for(var g=16;g<80;++g)d[g]=R(d[g-3]^d[g-8]^d[g-14]^d[g-16],1);for(var h=r[0],y=r[1],E=r[2],_=r[3],v=r[4],T=0;T<80;++T){var A=Math.floor(T/20),m=R(h,5)+I(A,y,E,_)+v+t[A]+d[T]>>>0;v=_,_=E,E=R(y,30)>>>0,y=h,h=m}r[0]=r[0]+h>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+E>>>0,r[3]=r[3]+_>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};const N=E("v5",80,D),P="00000000-0000-0000-0000-000000000000";const U=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},8077:(e,t,r)=>{var n=r(4128);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},8109:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},8149:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,o=0;for(;o<t;)n++,r=e.charCodeAt(o++),r>=55296&&r<=56319&&o<t&&(r=e.charCodeAt(o),56320==(64512&r)&&o++);return n}t.A=r,r.code='require("ajv/dist/runtime/ucs2length").default'},8176:(e,t,r)=>{var n=r(8268)(Object,"create");e.exports=n},8187:(e,t,r)=>{"use strict";var n=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=r(2473);e.exports=i.call(n,o)},8235:(e,t,r)=>{var n=r(4558).FilterCSS,o=r(6676),i=r(1102),a=i.parseTag,s=i.parseAttr,c=r(1401);function u(e){return null==e}function l(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new n(e.css))}l.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,i=t.onIgnoreTag,l=t.onTagAttr,f=t.onIgnoreTagAttr,d=t.safeAttrValue,p=t.escapeHtml,g=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var h=!1;t.stripIgnoreTagBody&&(h=o.StripTagBody(t.stripIgnoreTagBody,i),i=h.onIgnoreTag);var y=a(e,(function(e,t,o,a,h){var y={sourcePosition:e,position:t,isClosing:h,isWhite:Object.prototype.hasOwnProperty.call(r,o)},E=n(o,a,y);if(!u(E))return E;if(y.isWhite){if(y.isClosing)return"</"+o+">";var _=function(e){var t=c.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=c.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=c.trim(e.slice(0,-1))),{html:e,closing:r}}(a),v=r[o],T=s(_.html,(function(e,t){var r=-1!==c.indexOf(v,e),n=l(o,e,t,r);return u(n)?r?(t=d(o,e,t,g))?e+'="'+t+'"':e:u(n=f(o,e,t,r))?void 0:n:n}));return a="<"+o,T&&(a+=" "+T),_.closing&&(a+=" /"),a+=">"}return u(E=i(o,a,y))?p(a):E}),p);return h&&(y=h.remove(y)),y},e.exports=l},8268:(e,t,r)=>{var n=r(5325),o=r(5510);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},8312:e=>{"use strict";e.exports=Function.prototype.call},8324:e=>{var t=Array.isArray;e.exports=t},8332:e=>{"use strict";e.exports=RangeError},8384:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8551:e=>{e.exports=function(e){return function(t){return e(t)}}},8603:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}t.U9=void 0,t.U9={date:r(i,a),time:r(c,u),"date-time":r((function(e){const t=e.split(l);return 2===t.length&&i(t[0])&&c(t[1],!0)}),f),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return d.test(e)&&p.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(_.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return g.lastIndex=0,g.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=y&&e>=h}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:E},double:{type:"number",validate:E},password:!0,binary:!0},t.U9,r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,f),Object.keys(t.U9);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){const t=n.exec(e);if(!t)return!1;const r=+t[1],i=+t[2],a=+t[3];return i>=1&&i<=12&&a>=1&&a<=(2===i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[i])}function a(e,t){if(e&&t)return e>t?1:e<t?-1:0}const s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function c(e,t){const r=s.exec(e);if(!r)return!1;const n=+r[1],o=+r[2],i=+r[3],a=r[5];return(n<=23&&o<=59&&i<=59||23===n&&59===o&&60===i)&&(!t||""!==a)}function u(e,t){if(!e||!t)return;const r=s.exec(e),n=s.exec(t);return r&&n?(e=r[1]+r[2]+r[3]+(r[4]||""))>(t=n[1]+n[2]+n[3]+(n[4]||""))?1:e<t?-1:0:void 0}const l=/t|\s/i;function f(e,t){if(!e||!t)return;const[r,n]=e.split(l),[o,i]=t.split(l),s=a(r,o);return void 0!==s?s||u(n,i):void 0}const d=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;const h=-(2**31),y=2**31-1;function E(){return!0}const _=/[^\\]\\Z/},8616:(e,t,r)=>{var n=r(5451),o=r(3958),i=r(1774),a=r(2653),s=r(7791),c=r(3469),u=n?n.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,r,n,u,f,d){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var g=1&n;if(p||(p=c),e.size!=t.size&&!g)return!1;var h=d.get(e);if(h)return h==t;n|=2,d.set(e,t);var y=a(p(e),p(t),n,u,f,d);return d.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},8622:(e,t,r)=>{"use strict";var n=r(1691),o=function(){return!!n};o.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},8742:(e,t,r)=>{var n=r(5451),o=r(5085),i=r(5624),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},8863:(e,t,r)=>{"use strict";var n=r(9272),o=r(9941),i=n("RegExp.prototype.exec"),a=r(1653);e.exports=function(e){if(!o(e))throw new a("`regex` must be a RegExp");return function(t){return null!==i(e,t)}}},8925:(e,t,r)=>{var n=r(331);e.exports=function(e){return n(this.__data__,e)>-1}},8939:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},9018:()=>{},9039:e=>{"use strict";e.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},9167:(e,t,r)=>{var n=r(5581),o=r(2406),i=r(7856),a=r(4883),s=r(1423),c=r(7143);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},9244:(e,t,r)=>{var n=r(1677),o=r(4678),i=r(7824);e.exports=function(e){return i(e)?n(e):o(e)}},9250:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},9272:(e,t,r)=>{"use strict";var n=r(6409),o=r(2226),i=o([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o([r]):r}},9289:(e,t,r)=>{var n=r(4071),o=r(8551),i=r(1679),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},9331:(e,t,r)=>{var n=r(3452),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,a,s){var c=1&r,u=n(e),l=u.length;if(l!=n(t).length&&!c)return!1;for(var f=l;f--;){var d=u[f];if(!(c?d in t:o.call(t,d)))return!1}var p=s.get(e),g=s.get(t);if(p&&g)return p==t&&g==e;var h=!0;s.set(e,t),s.set(t,e);for(var y=c;++f<l;){var E=e[d=u[f]],_=t[d];if(i)var v=c?i(_,E,d,t,e,s):i(E,_,d,e,t,s);if(!(void 0===v?E===_||a(E,_,r,i,s):v)){h=!1;break}y||(y="constructor"==d)}if(h&&!y){var T=e.constructor,A=t.constructor;T==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof T&&T instanceof T&&"function"==typeof A&&A instanceof A||(h=!1)}return s.delete(e),s.delete(t),h}},9424:(e,t,r)=>{var n=r(8742),o=r(5943);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},9427:(e,t,r)=>{var n=r(5282),o=r(6452),i=r(2423),a=r(7483),s=r(6179);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},9511:(e,t)=>{function r(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var n=/javascript\s*\:/gim;t.whiteList=r(),t.getDefaultWhiteList=r,t.onAttr=function(e,t,r){},t.onIgnoreAttr=function(e,t,r){},t.safeAttrValue=function(e,t){return n.test(t)?"":t}},9562:(e,t,r)=>{var n=r(8268)(r(631),"Promise");e.exports=n},9612:(e,t,r)=>{"use strict";var n=r(7086),o=r(237),i=r(7503),a=r(5513);function s(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=s(Object.prototype.toString),f=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(c)var g=s(BigInt.prototype.valueOf);if(u)var h=s(Symbol.prototype.valueOf);function y(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function E(e){return"[object Map]"===l(e)}function _(e){return"[object Set]"===l(e)}function v(e){return"[object WeakMap]"===l(e)}function T(e){return"[object WeakSet]"===l(e)}function A(e){return"[object ArrayBuffer]"===l(e)}function m(e){return"undefined"!=typeof ArrayBuffer&&(A.working?A(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function b(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||b(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},E.working="undefined"!=typeof Map&&E(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(E.working?E(e):e instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(_.working?_(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},T.working="undefined"!=typeof WeakSet&&T(new WeakSet),t.isWeakSet=function(e){return T(e)},A.working="undefined"!=typeof ArrayBuffer&&A(new ArrayBuffer),t.isArrayBuffer=m,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=b;var C="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(e){return"[object SharedArrayBuffer]"===l(e)}function w(e){return void 0!==C&&(void 0===O.working&&(O.working=O(new C)),O.working?O(e):e instanceof C)}function I(e){return y(e,f)}function R(e){return y(e,d)}function D(e){return y(e,p)}function N(e){return c&&y(e,g)}function P(e){return u&&y(e,h)}t.isSharedArrayBuffer=w,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=I,t.isStringObject=R,t.isBooleanObject=D,t.isBigIntObject=N,t.isSymbolObject=P,t.isBoxedPrimitive=function(e){return I(e)||R(e)||D(e)||N(e)||P(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(m(e)||w(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQTTMessageFactory=t.MQTT=void 0;const n=r(1926),o=r(5590),i={binary:function(e){const t={...e};let r=t.data;!r&&t.data_base64&&(r=(0,o.base64AsBinary)(t.data_base64));return delete t.data,delete t.data_base64,a(e.datacontenttype,t,r)},structured:function(e){let t;t=e instanceof n.CloudEvent?e.toJSON():e;return a(n.CONSTANTS.DEFAULT_CE_CONTENT_TYPE,{},t)},toEvent:function(e,t=!1){if(t&&!s(e))throw new n.ValidationError("No CloudEvent detected");if(c(e)){const t="string"==typeof e.body?JSON.parse(e.body):e.body;return new n.CloudEvent({...t},!1)}return new n.CloudEvent({...e.headers,data:e.body},!1)},isEvent:s};function a(e,t,r){return{PUBLISH:{"Content Type":e},body:r,get payload(){return this.body},headers:t,get"User Properties"(){return this.headers}}}function s(e){return function(e){return!!(e.headers.id&&e.headers.source&&e.headers.type&&e.headers.specversion)}(e)||c(e)}function c(e){return e&&e.PUBLISH&&e?.PUBLISH["Content Type"]?.startsWith(n.CONSTANTS.MIME_CE_JSON)||!1}t.MQTT=i,t.MQTTMessageFactory=a},9818:(e,t,r)=>{e=r.nmd(e);var n=r(631),o=r(6617),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c},9864:()=>{},9936:e=>{e.exports=function(){this.__data__=[],this.size=0}},9941:(e,t,r)=>{"use strict";var n,o=r(9272),i=r(1944)(),a=r(8187),s=r(1686);if(i){var c=o("RegExp.prototype.exec"),u={},l=function(){throw u},f={toString:l,valueOf:l};"symbol"==typeof Symbol.toPrimitive&&(f[Symbol.toPrimitive]=l),n=function(e){if(!e||"object"!=typeof e)return!1;var t=s(e,"lastIndex");if(!(t&&a(t,"value")))return!1;try{c(e,f)}catch(r){return r===u}}}else{var d=o("Object.prototype.toString");n=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===d(e)}}e.exports=n},9971:(e,t,r)=>{"use strict";var n=r(1691),o=r(254),i=r(1653),a=r(1686);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new i("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],f=!!a&&a(e,t);if(n)n(e,t,{configurable:null===u&&f?f.configurable:!u,enumerable:null===s&&f?f.enumerable:!s,value:r,writable:null===c&&f?f.writable:!c});else{if(!l&&(s||c||u))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n={};(()=>{"use strict";r.r(n),r.d(n,{observeCartChangesIfEnabled:()=>Ne});var e=r(3614),t=r(4269);const o=async()=>{const t=await Promise.resolve().then(r.bind(r,6021)).then((e=>e.default));window[e.A.globalBridgeApiVariable]={...window[e.A.globalBridgeApiVariable],...t}},i=()=>{window.dispatchEvent(new Event("gorgias-bridge-loaded")),t.A.debug("Bridge loaded")},a=()=>window.gorgiasChatConfiguration.application?.config,s=()=>a()?.shopType??"",c=()=>a()?.shopName??"";function u(){const e=a();return e?.account?.id}const l=()=>window.gorgiasChatConfiguration.application?.id;var f=r(3854),d=r(6518);var p=r(2526),g=r(7451);var h=r(3434);function y(e,t=!1){const r=window.gorgiasChatConfiguration?.featureFlags??void 0;return r&&Object.hasOwnProperty.call(r,e)?Boolean(r[e]):t}function E(){return y("aiorc-ai-shopping-assistant-trigger-on-search-caching")}let _=function(e){return e.SALES="sales",e.SUPPORT="support",e}({}),v=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e.TRIAL="trial",e}({}),T=function(e){return e.OK="ok",e.LIMIT_REACHED="limit-reached",e}({});const A=(e=500,r=30)=>new Promise((n=>{let o=0;const i=setInterval((()=>{t.A.debug("Checking subscription status attempt:",o);const e=b(),a=m(e),s=S(),c=a||s;c||void 0!==e&&void 0!==s||o>=r?(clearInterval(i),n({convert:a,aiSalesAgent:!!s,analytics:!!c})):o++}),e)})),m=e=>y("revenue-beta-testers")||e?.status===v.ACTIVE&&e.usage_status===T.OK,S=()=>{if(!window.gorgiasChatConfiguration.aiAgent)return;const e=y("ai-shopping-assistant-ab-testing"),t=y("ai-shopping-assistant-enforce-deactivation"),r=window.GorgiasChat?.getExperiments?.(),n=r?.[h.z.SHOPPING_ASSISTANT];if(e&&null!=n)return n;if(t)return!1;const o=window.gorgiasChatConfiguration.aiAgent.enabled,i=window.gorgiasChatConfiguration.aiAgent.scopes;return o&&i?.includes(_.SALES)},b=()=>window.RevenueAddon?.subscription;var C=r(7738);const O=()=>window.RevenueAddon,w=()=>{const t=(()=>{const e=O();return e&&e.campaigns&&Array.isArray(e.campaigns)?e.campaigns:[]})(),r=(0,C.Gq)(e.A.localStorageSeenCampaignIds),n=r?.split(",")??[];return t.filter((e=>!n.includes(e.id)))};var I=r(7658),R=r.n(I);const D=()=>"mobile"===(()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"})(),N=()=>!(!window.gorgiasChatConfiguration.aiAgent?.isSalesHelpOnSearchEnabled||!S()||y("linear.task_AIORC-6090.kill-switch-for-trigger-on-search")||y("ai-shopping-assistant-shopify-search-desktop-only")&&D());let P=function(e){return e.TIME_SPENT_ON_PAGE="time_spent_on_page",e.CURRENT_URL="current_url",e.BUSINESS_HOURS="business_hours",e.CART_VALUE="cart_value",e.PRODUCT_TAGS="product_tags",e.CURRENT_PRODUCT_TAGS="current_product_tags",e.VISIT_COUNT="visit_count",e.SESSION_TIME="session_time",e.SINGLE_IN_VIEW="single_in_view",e.EXIT_INTENT="exit_intent",e.DEVICE_TYPE="device_type",e.ORDERS_COUNT="orders_count",e.AMOUNT_SPENT="amount_spent",e.ORDERED_PRODUCTS="ordered_products",e.CUSTOMER_TAGS="customer_tags",e.COUNTRY_CODE="country_code",e.INCOGNITO_VISITOR="incognito_visitor",e}({});const U=[P.AMOUNT_SPENT,P.ORDERS_COUNT,P.ORDERED_PRODUCTS,P.CUSTOMER_TAGS,P.COUNTRY_CODE];function j(e){return e.triggers.some((e=>U.includes(e.type)))}function x(e){return{...e,triggers:e.triggers.filter((e=>U.includes(e.type))).map(M)}}function M(e){return e.type===P.ORDERED_PRODUCTS&&Array.isArray(e.value)&&(t=e.value,Array.isArray(t)&&t.every((e=>R()(Object.keys(e),["productId","productTitle"]))))?{...e,value:e.value.map((e=>e.productId)).join(",")}:e.type===P.AMOUNT_SPENT||e.type===P.ORDERS_COUNT?{...e,value:Number(e.value)}:e;var t}const L=[P.COUNTRY_CODE];function k(e,t,r){const n=r.find((e=>e.id===t.id)),o=n?.triggers.find((e=>e.type===P.INCOGNITO_VISITOR)),i=function(e,t,r){return!e&&t?r.filter((e=>L.includes(e.key))):r}(e,"true"===o?.value,t.rules);return i.every((e=>e.matches))}function B(e){return e.map((e=>({id:e.id,rules:e.triggers.map((e=>({key:e.type,value:e.value,operator:e.operator})))})))}async function G(){const r=w(),n=r.filter(j).map(x);const o=(0,d.rq)(),i=Object.keys(o),a=n.filter((e=>!i.includes(e.id)));if(a.length>0){const n=(0,f.YK)(),i={guest_id:(0,f.Ww)(),account_id:u(),campaigns:B(a),customer_id:n?parseInt(n):void 0};try{const t=await(0,p.l)(`${e.A.revenueAddonUrl}/assistant/evaluations`,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)});if(!t.ok)throw new g.G("Error while evaluating campaigns");const{campaigns:n,visitor_identified:a}=await t.json(),s=function(e,t,r){return t.reduce(((t,n)=>(t[n.id]=k(e,n,r),t)),{})}(a,n,r);return{...o,...s}}catch(s){t.A.error(s,{},{payload:i})}}return{}}let H=function(e){return e.DISCOUNT_CODE_SENT="discount-code-sent",e.PRODUCT_ADD_TO_CART="chat-product-add-to-cart",e.PRODUCT_CLICKED="chat-product-clicked",e.PRODUCT_VIEWED="com.gorgias.convert.product.viewed",e.PRODUCT_SEARCHED="com.gorgias.convert.product.searched",e.CAMPAIGN_CLICKED="campaign-clicked",e.CAMPAIGN_DISPLAYED="campaign-displayed",e.CAMPAIGN_LINK_CLICKED="campaign-link-clicked",e.CAMPAIGN_TRIGGERS_MET="campaign-triggers-met",e.APP_LOADED="com.gorgias.convert.app.loaded",e.COLLECTION_VIEWED="com.gorgias.convert.collection.viewed",e.CART_UPDATED="com.gorgias.convert.cart.updated",e.AI_JOURNEY_FORM_SUBMITTED="com.gorgias.ai-journey.form.submitted",e}({}),F=function(e){return e.SESSION_START="session-start",e.FLOWS_CLICKED="flows-clicked",e.MESSAGE_SENT_BY_SHOPPER="message-sent-by-shopper",e.HEADER_ORDERS_CLICKED="header-orders-clicked",e.HEADER_PRODUCT_CART_CLICKED="header-product-cart-clicked",e.AI_AGENT_TIMESTAMP_CLICKED="ai-agent-timestamp-clicked",e.AI_AGENT_MESSAGE_SEEN="ai-agent-message-seen",e.HUMAN_AGENT_MESSAGE_SEEN="human-agent-message-seen",e.SMART_FOLLOW_UPS_SEEN="smart-follow-ups-seen",e.SMART_FOLLOW_UPS_CLICKED="smart-follow-ups-clicked",e.PRODUCT_RECOMMENDATIONS_SEEN="product-recommendations-seen",e.PRODUCT_CARD_CLICKED="product-card-clicked",e.PRODUCT_CARD_ADD_TO_CART_CLICKED="product-card-add-to-cart-clicked",e.PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED="product-details-drawer-images-swiped",e.PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED="product-details-drawer-image-zoomed",e.PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED="product-details-drawer-suggested-product-question-clicked",e.PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED="product-details-drawer-more-like-this-clicked",e.PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED="product-details-drawer-cart-add-to-cart-clicked",e.PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED="product-details-drawer-card-checkout-clicked",e.CAMPAIGN_PRODUCT_RECOMMENDATIONS_SEEN="campaign-product-recommendations-seen",e.CAMPAIGN_PRODUCT_CARD_CLICKED="campaign-product-card-clicked",e.CAMPAIGN_PRODUCT_CARD_ADD_TO_CART_CLICKED="campaign-product-card-add-to-cart-clicked",e.CAMPAIGN_PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED="campaign-product-details-drawer-images-swiped",e.CAMPAIGN_PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED="campaign-product-details-drawer-image-zoomed",e.CAMPAIGN_PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED="campaign-product-details-drawer-suggested-product-question-clicked",e.CAMPAIGN_PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED="campaign-product-details-drawer-more-like-this-clicked",e.CAMPAIGN_PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED="campaign-product-details-drawer-cart-add-to-cart-clicked",e.CAMPAIGN_PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED="campaign-product-details-drawer-card-checkout-clicked",e.AI_AGENT_PRODUCT_RECOMMENDATIONS_SEEN="ai-agent-product-recommendations-seen",e.AI_AGENT_PRODUCT_CARD_CLICKED="ai-agent-product-card-clicked",e.AI_AGENT_PRODUCT_CARD_ADD_TO_CART_CLICKED="ai-agent-product-card-add-to-cart-clicked",e.AI_AGENT_PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED="ai-agent-product-details-drawer-images-swiped",e.AI_AGENT_PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED="ai-agent-product-details-drawer-image-zoomed",e.AI_AGENT_PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED="ai-agent-product-details-drawer-suggested-product-question-clicked",e.AI_AGENT_PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED="ai-agent-product-details-drawer-more-like-this-clicked",e.AI_AGENT_PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED="ai-agent-product-details-drawer-cart-add-to-cart-clicked",e.AI_AGENT_PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED="ai-agent-product-details-drawer-card-checkout-clicked",e.CONVERSATION_PRODUCT_RECOMMENDATIONS_SEEN="conversation-product-recommendations-seen",e.CONVERSATION_PRODUCT_CARD_CLICKED="conversation-product-card-clicked",e.CONVERSATION_PRODUCT_CARD_ADD_TO_CART_CLICKED="conversation-product-card-add-to-cart-clicked",e.CONVERSATION_PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED="conversation-product-details-drawer-images-swiped",e.CONVERSATION_PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED="conversation-product-details-drawer-image-zoomed",e.CONVERSATION_PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED="conversation-product-details-drawer-suggested-product-question-clicked",e.CONVERSATION_PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED="conversation-product-details-drawer-more-like-this-clicked",e.CONVERSATION_PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED="conversation-product-details-drawer-cart-add-to-cart-clicked",e.CONVERSATION_PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED="conversation-product-details-drawer-card-checkout-clicked",e.CONVERSATION_STARTERS_DISPLAYED="conversation-starters-displayed",e}({});var V=r(2216);const z=e=>{const t=e.split(".")[1];return JSON.parse(atob(t))},$=e=>{const t=Math.floor(Date.now()/1e3);return e.exp-60<=t},W=async()=>{const t=(0,C.Gq)(e.A.localStorageShopifySessionToken);if(t){const r=z(t);if(!$(r))return t;(0,C.Ai)(e.A.localStorageShopifySessionToken)}const r=(0,C.Gq)(e.A.localStorageAnonymousShopifySessionToken);if(r){const t=z(r);if(!$(t))return r;(0,C.Ai)(e.A.localStorageAnonymousShopifySessionToken)}const n=await(0,p.l)("/apps/gorgias/ssp/identity-verification/shopify-session?allow_anonymous=1",{method:"GET"});if(!n.ok)throw new g.G(`response status not ok: ${n.status}`);const o=await n.json();switch(z(o.idToken).type){case"shopify-logged-in-customer":localStorage.setItem(e.A.localStorageShopifySessionToken,o.idToken);break;case"shopify-anonymous-customer":localStorage.setItem(e.A.localStorageAnonymousShopifySessionToken,o.idToken)}return o.idToken},K=()=>{let r;const n=async o=>{const i=o;if(window.GorgiasChat?.isOpen?.())window.GorgiasChat?.off?.("event:sent",n);else if(i.event===H.PRODUCT_SEARCHED&&i.search_query&&i.search_query.length>=4){const n=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchState);if(n){let t=null;try{t=JSON.parse(n)}catch{(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState)}if(t&&t.query===i.search_query)return}const o=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchOutput);if(o){let t=null;try{t=JSON.parse(o)}catch{(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput)}if(t&&t.query===i.search_query)return}const a=i.search_query,u=(0,V.A)();r=u,(async r=>{const n=await W();let o;try{const t=`${e.A.aiAgentUrl}/api/external/sales-on-search/help`;o={accountId:r.account_id,query:r.search_query,language:window.GorgiasChat?.getLanguage?.(),marketingId:[s(),c(),(0,f.Ww)(),(0,d.u0)()].map((e=>e||"")).join(":"),integrationId:window.gorgiasChatConfiguration?.application?.helpdeskIntegrationId,experiments:window.GorgiasChat?.getExperiments?.()};const i={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:`Bearer ${n}`},body:JSON.stringify(o)},a=await(0,p.l)(t,i);if(!a.ok)throw new g.G(`response status not ok: ${a.status}`);return(await a.json()).encryptedExecutionId}catch(i){throw t.A.error(i,{},{payload:o}),new g.G(`Error while sending sales help on search request: ${i}`)}})(i).then((t=>{r===u&&(0,C.SO)(e.A.localStorageSalesHelpOnSearchState,{encryptedExecutionId:t,query:a,timestamp:Date.now()})})).catch((e=>{t.A.error(e,{},{event:i})}))}};window.GorgiasChat?.on?.("event:sent",n)},q=e=>{window.GorgiasChat?.createChatCampaign?.({id:e.executionId,name:"",message:{text:e.message,html:`<div>${e.message}</div>`},triggers:[{key:"manual",value:e.query,operator:"aiSalesAgentHelpOnSearch"}],agent:null,language:window.GorgiasChat?.getLanguage?.()??"en-US",source:"ai-agent"})},Y=()=>{const r=setInterval((()=>{if(window.GorgiasChat?.isOpen?.())return void clearInterval(r);const n=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchState);if(n){let r;try{r=JSON.parse(n)}catch{return void(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState)}const o=r.timestamp,i=r.query,a=r.encryptedExecutionId,s=Date.now();s-o>14e3?(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState):s-o>4e3&&(async r=>{const n=await W();try{const t=`${e.A.aiAgentUrl}/api/external/sales-help-on-search-outputs/${r}`,o={method:"GET",headers:{Authorization:`Bearer ${n}`}},i=await(0,p.l)(t,o);switch(i.status){case 200:return[!0,await i.json()];case 404:return[!0,null];default:return[!1,null]}}catch(o){throw t.A.error(o,{},{encryptedExecutionId:r}),new g.G(`Error while sending get sales help on search output request: ${o}`)}})(a).then((([t,r])=>{if(r){const t={executionId:r.executionId,message:r.message,query:i};q(t),(0,C.SO)(e.A.localStorageSalesHelpOnSearchOutput,t)}if(t){(0,C.Gq)(e.A.localStorageSalesHelpOnSearchState)===n&&(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState)}})).catch((e=>{t.A.error(e,{},{encryptedExecutionId:a})}))}}),1e3)},J=e=>{const t=e.split(".")[1];return JSON.parse(atob(t))},X=e=>{const t=Math.floor(Date.now()/1e3);return e.exp-60<=t},Q=async r=>{const n=await(async()=>{const t=(0,C.Gq)(e.A.localStorageShopifySessionToken);if(t){const r=J(t);if(!X(r))return t;(0,C.Ai)(e.A.localStorageShopifySessionToken)}const r=(0,C.Gq)(e.A.localStorageAnonymousShopifySessionToken);if(r){const t=J(r);if(!X(t))return r;(0,C.Ai)(e.A.localStorageAnonymousShopifySessionToken)}const n=await(0,p.l)("/apps/gorgias/ssp/identity-verification/shopify-session?allow_anonymous=1",{method:"GET"});if(!n.ok)throw new g.G(`response status not ok: ${n.status}`);const o=await n.json();switch(J(o.idToken).type){case"shopify-logged-in-customer":localStorage.setItem(e.A.localStorageShopifySessionToken,o.idToken);break;case"shopify-anonymous-customer":localStorage.setItem(e.A.localStorageAnonymousShopifySessionToken,o.idToken)}return o.idToken})();try{const t=new URLSearchParams({accountId:r.accountId.toString(),query:r.query,language:r.language,integrationId:r.integrationId.toString()}),o=`${e.A.aiAgentUrlV2}/api/external/sales-on-search/help/v2?${t.toString()}`,i={method:"GET",headers:{Authorization:`Bearer ${n}`}},a=await(0,p.l)(o,i);switch(a.status){case 200:{const e=await a.json(),t=a.headers.get("cf-cache-status");let r="MISS";return"HIT"===t?r="EDGE_HIT":"HIT"===e.cacheStatus&&(r="APP_HIT"),[!0,e,r]}case 202:return[!1,null,"MISS"];default:return[!0,null,"MISS"]}}catch(o){throw t.A.error(o,{},{searchState:r}),new g.G(`Error while sending get sales help on search output request: ${o}`)}},Z=e=>{window.GorgiasChat?.createChatCampaign?.({id:e.executionId,name:"",message:{text:e.message,html:`<div>${e.message}</div>`},triggers:[{key:"manual",value:e.query,operator:"aiSalesAgentHelpOnSearch"}],agent:null,language:window.GorgiasChat?.getLanguage?.()??"en-US",source:"ai-agent",cache_status:e.cacheStatus})},ee=()=>{let r,n=null;const o=async i=>{const a=i;if(window.GorgiasChat?.isOpen?.())window.GorgiasChat?.off?.("event:sent",o);else if(a.event===H.PRODUCT_SEARCHED&&a.search_query&&a.search_query.trim().length>=4){const o=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchState);if(o){let t=null;try{t=JSON.parse(o)}catch{(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState)}if(t&&t.query===a.search_query)return}const i=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchOutput);if(i){let t=null;try{t=JSON.parse(i)}catch{(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput)}if(t&&t.query===a.search_query)return}const s=a.search_query,c=(0,V.A)();r=c,(async e=>{if(!(e.account_id&&e.search_query&&window.GorgiasChat?.getLanguage?.()&&window.gorgiasChatConfiguration?.application?.helpdeskIntegrationId))throw new g.G("Invalid event data");const t={accountId:e.account_id,query:e.search_query.toLowerCase().trim(),language:window.GorgiasChat?.getLanguage?.(),integrationId:window.gorgiasChatConfiguration?.application?.helpdeskIntegrationId,timestamp:Date.now()},[r,n,o]=await Q(t);return{isDone:r,response:n,searchState:t,cacheStatus:o}})(a).then((({isDone:t,response:o,searchState:i,cacheStatus:u})=>{if(r===c){if(o){const t=()=>{const t={executionId:o.executionId,message:o.message,query:s,cacheStatus:u};Z(t),(0,C.SO)(e.A.localStorageSalesHelpOnSearchOutput,t)};return a.is_search_committed?void t():(n&&clearTimeout(n),void(n=setTimeout(t,1500)))}if(t)return;(0,C.SO)(e.A.localStorageSalesHelpOnSearchState,i)}})).catch((e=>{t.A.error(e,{},{event:a})}))}};window.GorgiasChat?.on?.("event:sent",o)};var te=r(1926);const re={[F.SESSION_START]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"session"},[F.FLOWS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"flows"},[F.MESSAGE_SENT_BY_SHOPPER]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"messages"},[F.HEADER_ORDERS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"order"},[F.HEADER_PRODUCT_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.AI_AGENT_TIMESTAMP_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"messages"},[F.AI_AGENT_MESSAGE_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"messages"},[F.HUMAN_AGENT_MESSAGE_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"messages"},[F.SMART_FOLLOW_UPS_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"follow-ups"},[F.SMART_FOLLOW_UPS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"follow-ups"},[F.PRODUCT_RECOMMENDATIONS_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.PRODUCT_CARD_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.PRODUCT_CARD_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CAMPAIGN_PRODUCT_RECOMMENDATIONS_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CAMPAIGN_PRODUCT_CARD_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CAMPAIGN_PRODUCT_CARD_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CAMPAIGN_PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CAMPAIGN_PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CAMPAIGN_PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CAMPAIGN_PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CAMPAIGN_PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CAMPAIGN_PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.AI_AGENT_PRODUCT_RECOMMENDATIONS_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.AI_AGENT_PRODUCT_CARD_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.AI_AGENT_PRODUCT_CARD_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.AI_AGENT_PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.AI_AGENT_PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.AI_AGENT_PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.AI_AGENT_PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.AI_AGENT_PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.AI_AGENT_PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CONVERSATION_PRODUCT_RECOMMENDATIONS_SEEN]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CONVERSATION_PRODUCT_CARD_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CONVERSATION_PRODUCT_CARD_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CONVERSATION_PRODUCT_DETAILS_DRAWER_IMAGES_SWIPED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CONVERSATION_PRODUCT_DETAILS_DRAWER_IMAGE_ZOOMED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CONVERSATION_PRODUCT_DETAILS_DRAWER_SUGGESTED_PRODUCT_QUESTION_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CONVERSATION_PRODUCT_DETAILS_DRAWER_MORE_LIKE_THIS_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"products"},[F.CONVERSATION_PRODUCT_DETAILS_DRAWER_CART_ADD_TO_CART_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CONVERSATION_PRODUCT_DETAILS_DRAWER_CARD_CHECKOUT_CLICKED]:{namespace:"chat",eventType:"redesign.generic-event",version:"1.0.1",subject:"cart"},[F.CONVERSATION_STARTERS_DISPLAYED]:{namespace:"chat",eventType:"conversation-starters.displayed",version:"1.0.0",subject:"conversation-starters"}},ne={[H.APP_LOADED]:{namespace:"convert",eventType:"app.loaded",version:"1.0.1",subject:"app"},[H.DISCOUNT_CODE_SENT]:{namespace:"convert",eventType:"discount-code.sent",version:"1.0.2",subject:"discount-code"},[H.CAMPAIGN_LINK_CLICKED]:{namespace:"convert",eventType:"campaign-link.clicked",version:"1.0.6",subject:"campaign-link"},[H.CAMPAIGN_TRIGGERS_MET]:{namespace:"convert",eventType:"campaign-triggers.met",version:"1.0.3",subject:"campaign-triggers"},[H.CAMPAIGN_CLICKED]:{namespace:"convert",eventType:"campaign.clicked",version:"1.0.4",subject:"campaign"},[H.CAMPAIGN_DISPLAYED]:{namespace:"convert",eventType:"campaign.displayed",version:"1.0.3",subject:"campaign"},[H.CART_UPDATED]:{namespace:"convert",eventType:"cart.updated",version:"1.0.3",subject:"cart"},[H.COLLECTION_VIEWED]:{namespace:"convert",eventType:"collection.viewed",version:"1.0.2",subject:"collection"},[H.PRODUCT_ADD_TO_CART]:{namespace:"convert",eventType:"product.add-to-cart",version:"1.0.2",subject:"product"},[H.PRODUCT_CLICKED]:{namespace:"convert",eventType:"product.clicked",version:"1.0.7",subject:"product"},[H.PRODUCT_VIEWED]:{namespace:"convert",eventType:"product.viewed",version:"1.0.3",subject:"product"},[H.PRODUCT_SEARCHED]:{namespace:"convert",eventType:"product.searched",version:"1.0.1",subject:"product"},[H.AI_JOURNEY_FORM_SUBMITTED]:{namespace:"ai-journey",eventType:"form.submitted",version:"1.0.1",subject:"form"}},oe={...ne,...re};async function ie(e,r,n,o=!0){t.A.debug("Send Cloud Event",n);const{eventType:i,namespace:a,version:s,subject:c}=oe[r],u={id:(0,V.A)(),type:`com.gorgias.${a}.${i}`,subject:c,data:n,time:(new Date).toISOString(),source:"gorgias/convert/web",partitionkey:`{"account_id": ${n.accountId}}`,dataschema:`https://${a}/${i}/${s}`},l=new te.CloudEvent(u),f=te.HTTP.binary(l);return(0,p.l)(e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",...o?{"x-cloudevent-stripadditionalproperties":"true"}:{},...f.headers},body:f.body}).then((e=>e.ok))}function ae(r){try{const{eventType:n,payload:o}=function(e){const t=(0,f.YK)(),r=Math.floor((new Date).getTime()/1e3),n=(e,t)=>({eventType:e,sessionId:(0,d.u0)(),accountId:u(),shopName:s()+":"+c(),guestId:(0,f.Ww)(),timestamp:r,updateTimestamp:r,...t});switch(e.event){case H.APP_LOADED:{const t=n(H.APP_LOADED,{trafficMetadata:{referrer:e.traffic_metadata?.referrer,utm_source:e.traffic_metadata?.utm_source,utm_medium:e.traffic_metadata?.utm_medium,utm_campaign:e.traffic_metadata?.utm_campaign,utm_term:e.traffic_metadata?.utm_term,utm_content:e.traffic_metadata?.utm_content,gclid:e.traffic_metadata?.gclid,fbclid:e.traffic_metadata?.fbclid}});return{eventType:H.APP_LOADED,payload:t}}case H.AI_JOURNEY_FORM_SUBMITTED:{const t=n(H.AI_JOURNEY_FORM_SUBMITTED,{marketingId:e.marketingId,customerId:e.customerId,type:e.type,value:e.value,source:e.source});return{eventType:H.AI_JOURNEY_FORM_SUBMITTED,payload:t}}case H.DISCOUNT_CODE_SENT:case H.PRODUCT_ADD_TO_CART:case H.PRODUCT_CLICKED:case H.PRODUCT_VIEWED:case H.PRODUCT_SEARCHED:case H.CAMPAIGN_CLICKED:case H.CAMPAIGN_LINK_CLICKED:case H.CAMPAIGN_DISPLAYED:case H.CAMPAIGN_TRIGGERS_MET:case H.COLLECTION_VIEWED:case H.CART_UPDATED:{const r=n(e.event,{abVariant:e.ab_revenue_variant,campaignId:e.campaign_id,campaignIsLight:"true"===e.campaign_is_light?.toString(),discountCode:e.campaign_discount_code,url:e.campaign_link??e.page_url,pageTitle:e.page_title,searchQuery:e.search_query,productId:e.product?.id?e.product?.id.toString():void 0,customerId:t?parseInt(t):void 0,source:e.source,collectionId:e.collection_id?e.collection_id.toString():void 0,cart:e.cart,cacheStatus:e.campaign_cache_status});return{eventType:e.event,payload:r}}default:throw new Error("[CONVERT-ANALYTICS]: Unknown business event type")}}(r);ie(`${e.A.eventIngestionUrl}/public/t`,n,o).then((e=>{e||t.A.error(new Error("[CONVERT-ANALYTICS]: can't perform request"),{},{eventPayload:o})}))}catch(n){t.A.error(n,{},{data:r})}}const se=e=>{const t={...e};return Object.keys(t).forEach((e=>void 0===t[e]?delete t[e]:{})),t};const ce=new Set(Object.values(F));function ue(e){const t=u();if(!t)throw new Error("[CHAT-ANALYTICS]: accountId is required");return{accountId:t,shopName:s()+":"+c(),locale:e.locale,pathname:e.pathname,url:e.url,conversationStarterIds:e.conversation_starter_ids,displayLocation:e.display_location,device:e.device,conversationId:e.conversation_id,sessionId:(0,d.u0)()??void 0,guestId:(0,f.Ww)(),customerId:e.customer_id?parseInt(e.customer_id,10):void 0}}function le(e){if(!ce.has(e.event))throw new Error("[CHAT-ANALYTICS]: Unknown event type");if(e.event===F.CONVERSATION_STARTERS_DISPLAYED)return{eventType:F.CONVERSATION_STARTERS_DISPLAYED,payload:ue(e)};const t=function(e){const t=(new Date).toISOString();return{eventType:e.event,metadata:{...e.metadata},chatVersion:e.chat_version,device:e.deviceType,conversationId:e.conversation_id,timestamp:t,updateTimestamp:t,sessionId:(0,d.u0)(),accountId:u(),shopName:s()+":"+c(),guestId:(0,f.Ww)()}}(e);return{eventType:t.eventType,payload:t}}const fe=new Set(Object.values(F));function de(){let r=!1,n=!1,o=!1;const i=[];if(null==(0,d.l)()){const e=function(){const e=new URLSearchParams(window.location.search),t=t=>e.get(t)??void 0;return{event:H.APP_LOADED,traffic_metadata:se({referrer:document.referrer||void 0,utm_source:t("utm_source"),utm_medium:t("utm_medium"),utm_campaign:t("utm_campaign"),utm_term:t("utm_term"),utm_content:t("utm_content"),gclid:t("gclid"),fbclid:t("fbclid")})}}();i.push(e),(0,d.RM)()}const a=setInterval((function(){r||o?i.forEach((function(n,a,s){return s.splice(a,1),o&&fe.has(n.event)?(function(r){try{const{eventType:n,payload:o}=le(r);ie(`${e.A.chatEventIngestionUrl}/public/t`,n,o,!1).then((e=>{e||t.A.error(new Error("[CHAT-ANALYTICS]: can't perform request"),{},{eventPayload:o})}))}catch(n){t.A.error(n,{},{data:r})}}(n),void t.A.debug("Remaining events: ",i)):(t.A.debug(`Skipping event ${n.event} processing for chat event pipeline because chat is not active or event is not a chat tracking event`),r&&ne[n.event]?(ae(n),void t.A.debug("Remaining events: ",i)):void t.A.debug(`Skipping event ${n.event} processing because Convert or AI Sales Agent is not enabled`))})):t.A.debug("Skipping event because the conditions were not met")}),100);if(!window.GorgiasChat||"function"!=typeof window.GorgiasChat.on)throw new Error("GorgiasChat is not defined or not loaded");window.GorgiasChat.on("event:sent",(e=>{const a=e;!n||r||o?(i.push(a),t.A.debug("Subscribed to chat events")):t.A.debug("Skipping event processing because conditions were not met")})),A().then((({aiSalesAgent:e,convert:i})=>{r=i||e,n=!0,o=!!window.gorgiasChatConfiguration.application&&!window.gorgiasChatConfiguration.application.deactivatedDatetime,r||o||(t.A.debug("Convert and chat event processing are not enabled for this account"),clearInterval(a))}))}let pe=function(e){return e.Email="email",e.PhoneNumber="phone",e}({});const ge=async e=>{const t=(new TextEncoder).encode(e+"6cea79c2ad8e14ab52d02d364ba8e891d0b"),r=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")},he=["submit"],ye="+1",Ee=()=>{t.A.debug("Listening for Attentive form events via postMessage..."),window.addEventListener("message",(async e=>{if("https://creatives.attn.tv"!==e.origin)return;if("LEAD"!==e.data.__attentive.action)return;t.A.debug("Received message from Attentive iframe:",e);const r=e.data.__attentive.email,n=((e,t)=>{if(!e)return null;let r=String(e).trim();r.startsWith("00")&&(r="+"+r.slice(2)),r=r.replace(/[^\d+]/g,""),r.startsWith("0")?t&&(r=t+r.replace(/^0+/,"")):r.startsWith("+")||t&&(r=t+r),r.startsWith("+")||(r="+"+r.replace(/^\+*/,"")),r="+"+r.slice(1).replace(/\D/g,"");const n=r.slice(1);return n.length<8||n.length>15?null:r})(e.data.__attentive.phone,ye),o=(0,f.Ww)(),i=(0,f.YK)(),a=async(e,t)=>{const r=await ge(e);ae({event:H.AI_JOURNEY_FORM_SUBMITTED,...se({marketingId:o,source:"attentive",customerId:i,type:t,value:r})})};r&&await a(r,pe.Email),n&&await a(n,pe.PhoneNumber)}))};function _e(){return window.GorgiasChat?window.GorgiasChat.init():new Promise((e=>{window.addEventListener("gorgias-widget-loaded",(()=>{e(!0)}))}))}const ve=async()=>{await _e(),t.A.debug("Widget loaded"),de(),N()&&!E()&&((()=>{if(window.GorgiasChat?.isOpen?.())return void(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput);const t=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchOutput);if(t){let r;try{r=JSON.parse(t)}catch{return void(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput)}q(r)}})(),K(),Y(),window.GorgiasChat?.on?.("campaign:closed",(()=>{(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput)}))),N()&&E()&&((()=>{if(window.GorgiasChat?.isOpen?.())return void(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput);const t=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchOutput);if(t){let r;try{r=JSON.parse(t)}catch{return void(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput)}Z(r)}})(),ee(),setInterval((()=>{if(window.GorgiasChat?.isOpen?.())return;const r=(0,C.Gq)(e.A.localStorageSalesHelpOnSearchState);if(r){let n;try{n=JSON.parse(r)}catch{return void(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState)}const o=n.timestamp,i=n.query,a=Date.now();a-o>14e3?(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState):a-o>4e3&&Q(n).then((([t,n,o])=>{if(n){const t={executionId:n.executionId,message:n.message,query:i,cacheStatus:o};Z(t),(0,C.SO)(e.A.localStorageSalesHelpOnSearchOutput,t)}t&&(0,C.Gq)(e.A.localStorageSalesHelpOnSearchState)===r&&(0,C.Ai)(e.A.localStorageSalesHelpOnSearchState)})).catch((e=>{t.A.error(e,{},{state:n})}))}}),1e3),window.GorgiasChat?.on?.("campaign:closed",(()=>{(0,C.Ai)(e.A.localStorageSalesHelpOnSearchOutput)})));const{analytics:r,convert:n}=await A();if(y("ai-journey-enabled")&&(t.A.debug("Listening for Klaviyo form events..."),window.addEventListener("klaviyoForms",(async e=>{const t=e;if(-1===he.indexOf(t.detail.type))return;const r=t.detail.metaData.$email,n=t.detail.metaData.$phone_number,o=(0,f.Ww)(),i=await ge(r||n||"");ae({event:H.AI_JOURNEY_FORM_SUBMITTED,...se({marketingId:o,source:"klaviyo",customerId:(0,f.YK)(),type:r?pe.Email:pe.PhoneNumber,value:i})})})),Ee()),r){if(setTimeout(f.yf,700),n){const e=await G();Object.keys(e).length>0&&(0,d.Wq)(e)}}else t.A.debug("Not subscribed to Convert or AI Sales Agent, exiting.")},Te=/(?:\/[a-zA-Z]+(?:-[a-zA-Z]+)?)?\/cart\/(add|change|clear)(?:\.js|\.json)?/,Ae=/search\/suggest\?q=([^&]*)/,me="cart-updated",Se="product-searched",be=()=>{const e=new PerformanceObserver((e=>{e.getEntriesByType("resource").forEach((e=>{const t=e;if(["xmlhttprequest","fetch"].includes(t?.initiatorType||"")&&(Te.test(t.name)&&window.dispatchEvent(new CustomEvent(me)),Ae.test(t.name))){const e=(e=>{try{return new URL(e.name)?.searchParams.get("q")}catch{return null}})(t);if(!e)return;window.dispatchEvent(new CustomEvent(Se,{detail:{searchQuery:e,url:window.location.href}}))}}))}));return e.observe({entryTypes:["resource"]}),e},Ce=async(r,n,o)=>{const i=O(),a=`${e.A.revenueAddonUrl}/assistant/contact-form/`+i.id,u={campaign_id:n,ab_variant:o,guest_id:(0,f.Ww)(),session_id:(0,d.u0)(),shop_name:s()+":"+c(),...r},l={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)};try{const e=await(0,p.l)(a,l);if(!e.ok)throw new g.G("Error while submitting the form");return await e.json(),!0}catch(h){throw t.A.error(h,{},{payload:u}),new g.G(`Error while submitting the form: ${h}`)}};var Oe=r(3853);const we=e=>({id:e.id,title:e.title,body_html:"",handle:e.handle,variants:e.variants.map(((t,r)=>Ie(e.id,t,r))),available:!0,tags:[],options:e.options.map(((t,r)=>Re(e.id,t,r))),featured_image:e.image_url||void 0}),Ie=(e,t,r)=>{let n={};return t.options&&(n=t.options.reduce(((e,t,r)=>(r>=5||(e[`option${r+1}`]=t),e)),{})),{id:t.id,product_id:e,title:t.title,price:t.price.toString(),position:r,...n}},Re=(e,t,r)=>({id:t.id,product_id:e,name:t.name,position:r,values:t.values}),De=async r=>{let n={};try{const t=`${e.A.revenueAddonUrl}/assistant/recommend/p`;if(!r||0===Object.keys(r).length)throw new g.G("Context is required");const o=l();if(!o)throw new g.G("Widget app id is required");const i=O();n={shop_name:c(),installation_id:i.id,widget_app_id:o.toString(),customer_id:(0,f.YK)(),guest_id:(0,f.Ww)(),...r};const a={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n)},s=await(0,p.l)(t,a);if(!s.ok)throw new g.G(`response status not ok: ${s.status}`);const u=await s.json();return u.products.map((e=>we(e)))}catch(o){throw t.A.error(o,{},{context:r,payload:n}),new g.G(`Error while getting product recommendations: ${o}`)}},Ne=async()=>{try{const e=await A();if(!e)return void t.A.debug("Cart observation not started - features not available");const{convert:r,aiSalesAgent:n}=e;n||r?(t.A.debug("Starting cart and search observation - Shopping Assistant or Convert enabled"),be()):t.A.debug("Cart observation not started - Shopping Assistant and Convert not enabled")}catch(e){t.A.debug("Error checking features for cart observation:",e)}};t.A.init(),(async()=>{try{await _e();const n=await(async()=>{const r=c();r||t.A.error(new Error("Missing window.gorgiasChatConfiguration.application.config.shopName value. Chat may not have loaded correctly."),{},{gorgiasChatConfiguration:window.gorgiasChatConfiguration});const n=window.REVENUE_ADDON_ID,o=r||window.CONVERT_SHOP_NAME,i=new URL(`${e.A.revenueAddonUrl}/assistant/configs`);i.pathname+=n?`/${n}`:`/shop/${o}`;const a=l();void 0!==a&&i.searchParams.append("widget-app-id",a.toString());try{const e=await(0,p.l)(i.href);if(!e.ok)throw new g.G("Error while fetching the subscription");return await e.json()}catch(s){t.A.error(s,{},{revenueId:n,shopName:o})}})()??{subscription:{status:v.INACTIVE,usage_status:T.OK},campaigns:[],ab_test:null,settings:void 0};window.RevenueAddon={...n,getProductRecommendations:De,submitContactCaptureForm:Ce,revealDiscountOffer:Oe.X,CART_UPDATED_EVENT_NAME:me,PRODUCT_SEARCHED_EVENT_NAME:Se},window.dispatchEvent(new Event("gorgias-convert-bundle-loaded")),t.A.debug("Library loaded"),ve(),(async()=>{const t=await Promise.resolve().then(r.bind(r,6021)).then((e=>e.default));await o(),window[e.A.globalBridgeApiVariable].resolve({...t}),i()})(),Ne()}catch(n){t.A.debug("Error during bundle initialization:",n)}})()})(),ConvertBundle=n})();